{"version":3,"sources":["components/molecules/TabContainer/index.jsx","components/molecules/Avatar/index.jsx","components/molecules/Socialdata/index.jsx","components/helpers/changeHue.js","components/molecules/Calendar2D/index.jsx","components/molecules/Calendar3D/index.jsx","components/molecules/LanguageChart/index.jsx","components/molecules/Navbar/index.jsx","components/molecules/TextTypist/index.jsx","components/molecules/SearchBar/index.jsx","components/molecules/ContribChart/index.jsx","components/pages/Redirect/index.jsx","components/pages/Settings/index.jsx","components/organisms/tabs/Resume/index.jsx","components/organisms/tabs/Projects/index.jsx","components/organisms/tabs/Overview/index.jsx","components/organisms/tabs/Education/index.jsx","components/pages/Profile/index.jsx","intel/OAuthGithub/providers/github.ts","intel/OAuthGithub/services/utilities.js","intel/AuthGitLab/providers/gitlab.ts","components/organisms/sections/Register/index.jsx","components/organisms/sections/Login/index.jsx","components/pages/Landing/index.jsx","components/pages/GitLab/index.jsx","Routes.js","intel/Database/index.js","intel/Database/Statements/Create/index.js","intel/Database/Statements/Insert/index.js","intel/utils/UtilsGitlab/index.js","intel/utils/UtilsWebscrap/index.js","intel/utils/UtilsApollo/index.js","intel/Database/Statements/Update/index.js","intel/utils/UtilsGithub/GqlData/index.js","intel/utils/UtilsGithub/Translator/index.js","intel/utils/UtilsGithub/index.js","intel/IntelData/index.js","intel/Database/Statements/Select/index.js","intel/Database/Converter/index.js","intel/index.js","App.js","registerServiceWorker.js","index.js"],"names":["TabContainer","state","activeItemInnerPills","activeSubItem","activeHorizontalItem","toggleOuterPills","tab","e","_this","setState","toggleSub","toggleHorizontal","_this2","this","props","vertical","react_default","a","createElement","mdbreact_esm","id","md","pills","color","className","settings","map","setting","key","to","active","onClick","icon","title","activeItem","Fragment","tabId","subtitles","subtitle","subkey","role","horizontal","items","item","visible","notification","pill","children","React","Component","Avatar","src","url","alt","Socialdata","_this$props","status","name","company","location","email","website","accounts","console","log","message","dangerouslySetInnerHTML","__html","href","target","rel","molecules_LanguageChart","languages","changeHue","rgb","degree","hsl","replace","length","r","parseInt","substr","g","b","cMax","Math","max","cMin","min","delta","l","h","s","abs","rgbToHSL","c","x","m","normalize_rgb_value","toString","slice","rgbToHex","hslToRGB","floor","months","Calender2D","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","updateDimensions","width","myInput","current","offsetWidth","componentDidMount","window","addEventListener","contributions","calendar","currentYear","contributionsList","countContribs","setInterval","cycleHue","hue","totalContributions","getEachMonth","pos","month","Array","Date","getMonth","createRef","removeEventListener","size","ref","height","weeks","week","wkey","contributionDays","day","dkey","y","data-data","date","data-count","total","fill","Calender3D","renderIsometrics","obelisk","require","point","Point","pixelView","PixelView","context","maxCount","values","wi","di","cubeHeight","CubeColor","getByHorizontalColor","dimension","CubeDimension","p3d","Point3D","cube","Cube","renderObject","countTotal","averageCount","datesTotal","dateBest","contribData","contrib","contributionCalendar","average","moment","fromDate","format","toDate","busiestDay","concat","streakLongest","datesLongest","streakCurrent","datesCurrent","longestStreak","startDate","endDate","currentStreak","renderTopStats","renderBottomStats","LanguageChart","dataPolar","datasets","data","backgroundColor","label","labels","slices","colors","language","i","push","share","es","options","legend","display","Navbar","isOpen","toggleCollapse","dark","expand","navbar","molecules_SearchBar","left","right","pageLogin","pathname","changeState","withRouter","TextTypist","scope","onTypingDone","dist_Typist_default","cursor","show","blink","element","Delay","ms","text","Backspace","count","delay","SearchBar","search","handleChange","defineProperty","value","outline","maxLength","type","onChange","placeholder","aria-label","fab","ChartsPage","dataRadar","calculateSources","dataRadarOptions","responsive","elements","line","tension","scale","ticks","beginAtZero","stepSize","scales","yAxes","gridLines","drawBorder","xAxes","totalReviews","totalIssues","totalRequests","totalCommits","results","types","contribs","codeReviews","issue","pullRequest","commit","borderColor","Redirect","getRedirect","_callee","requestKey","regenerator_default","wrap","_context","prev","next","localStorage","setItem","close","stop","Settings","molecules_TabContainer","Resume","Projects","repos","repo","Overview","Calendar2D","Calendar3D","ContribChart","contribTypes","Education","tabitems","Dashboard","globalStore","logged","react_router","testimonial","molecules_Avatar","user","avatarUrl","molecules_Socialdata","statusEmojiHTML","websiteUrl","github","tabs_Overview","contribCalendar","tabs_Resume","tabs_Projects","tabs_Education","client_secret","d","getTime","random","guid","redirect_uri","encodeURIComponent","githubProvider","buildAuthorizeUrl","extractError","redirectUrl","errorMatch","match","errorReason","errorDescriptionMatch","errorDescription","Error","extractSession","_extractSession","asyncToGenerator","mark","_callee4","code","codeMatch","stateMatch","AuthorizeUrl","_context4","fetch","headers","Accept","Access-Allow-Credentials","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Content-Type","Vary","method","then","_ref","res","json","abrupt","sent","_x2","apply","arguments","_ref2","_callee3","access_token","_context3","_ref3","_callee2","_context2","_x4","username","login","_x3","_x","gitlabProvider","server","usernameMatch","serverMatch","CREATE_USER_MUTATION","gql","_templateObject","Register","password","password1","plattform","oAuthGitHubButton","oAuthGitHubData","AuthGitLabButton","sourceList","verifiedSourceList","customUsername","usernames","addToUsernames","includes","changeHandler","connectGitHub","RSA","acquireTokenAsync","pushToSourceList","connectGitLab","token","source","removeSource","filter","obj","handleUserNamePick","handleSubmit","sources","JSON","stringify","sha256","platform_data","register","variables","alert","catch","error","warn","placement","floating","disabled","social","domElement","clickable","popover","tag","checked","password2","compose","graphql","LOGIN_USER","Login_templateObject","Login","tokenAuth","loginHandler","withApollo","Landing","logMeIn","loaded","molecules_TextTypist","sections_Login","sections_Register","GitLab","open","Routes","exact","path","component","pages_Landing","assign","SettingsPage","Profile","RedirectPage","render","alasql","initTables","db","platform","organization","member","repository","statistic","platformHasOrganization","platformHasRepository","proxy","fetchJson","urlIn","X-Requested-With","fetchHtml","parseJsonToDOM","parser","DOMParser","parseFromString","html","parseTextToDOM","prototype","getWeekNumber","UTC","getFullYear","getDate","dayNum","getUTCDay","setUTCDate","getUTCDate","yearStart","getUTCFullYear","ceil","LINK","cache","fillPlatform","coverDesc","fullName","createdAt","webscrap","getElementsByTagName","getElementsByClassName","getAttribute","innerHTML","trim","substring","exec","insert","fillOrganizations","rows","_i","_Array$from","_org","orgUrl","idPlatform","idOrganization","from","pop","fillContribution","datetime","nameWithOwner","repoUrl","ownerId","languagePieId","repoExists","undefined","platformId","repositoryId","fillRepositories","calendarId","fillCalendar","activities","_i2","_Array$from2","weekday","statYear","year","getDay","_db","t0","t1","init","apiLink","authorization","fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","__schema","InMemoryCache","HttpLink","uri","ApolloClient","link","GET_PROFILE","GqlData_templateObject","getRepositoryHistory","owner","index","generateRepositoryHistoryQuery","bigRepos","queryParts","queries","forEach","part","runtime","defaultBranchRef","history","totalCount","pageInfo","endCursor","split","maxRuntime","partsCount","append","_templateObject2","getCalendar","_templateObject3","createdAtDate","fromYear","toYear","query","toJSON","setFullYear","generateCalendarsQuery","streak","streakStart","streakTotal","genContributionsByRepositories","contributionsByRepository","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_loop","_iterator","_step","nodes","committer","toLowerCase","_node","con","committedDate","additions","deletions","changedFiles","issues","author","pullRequests","Symbol","iterator","done","delegateYield","return","finish","fillOrganization","objUser","profile","organizations","edges","node","orgId","organizationId","membersWithRole","_member","memberAvatarUrl","memberName","memberWebUrl","memberUsername","memberId","fillStats","years","days","getYearsDict","keys","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","entries","slicedToArray","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_ref6","_ref5","err","getDaysArray","str","yearObj","yearNum","dayTotal","contributionCount","dayDate","statisticId","fillRepoOwner","_repo","repoOwnerUsername","repoOwnerAvatarUrl","repoOwnerName","repoOwnerUrl","repoOwnerId","openGraphImageUrl","pieId","repoId","fillRepository","fillPie","reposi","languagesCount","languagesSize","totalSize","_edge","nodeName","nodeSize","nodeColor","fillLanguageSlice","fillContribs","repoNameWithOwner","fillDB","statusMessage","emojiHTML","commitContributionsByRepository","fillRepos","commits","repoCommitHistory","flat","reduce","issueContributionsByRepository","pullRequestContributionsByRepository","currentContributions","octoCats","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref9","_ref8","w","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_ref12","_ref11","addOctocat","cat","dDay","lastCat","_fill","getPlatform","client","resProfile","resCalendar","allReposWithHistory","reposPerName","apollo","gqlData","q","resRepoHistory","l1","l2","_x5","translator","dbName","Database","statement","intel_IntelData_fill","gitlab","totalLanguageSize","baseYearOfPlatforms","contribPerPlatform","formatDate","toISOString","expandDaysToFullYear","fullDays","startDay","firstDate","breakDate","setDate","reverse","getCalendarFromDates","indexW","indexD","generateCalendarGrid","flag","emptyContributionYear","calculateColorsForCalendarDay","calendarYear","_week","_day","precision","dictCalendarToArray","dict","parse","src_intel_fill","userList","_user","select","isEmployee","isHireable","converter","repositories","repoWithExtras","rId","rName","oAvatarUrl","oName","oUsername","oUrl","languagePie","lSize","lTotal","members","memberCount","mId","mName","mUsername","mAvatarUrl","mUrl","projectsUrl","sId","sName","sColor","sSize","orgs","orgWithMember","oId","org","oid","num","pie","languageSlice","round","baseYear","calendarGrid","today","indexY","cYear","cWeek","cWeekday","cColor","nowYear","lastYear","nowDate","currentCalendar","_Object$entries","k","v","stats","totalContributionsPerYear","bDays","elem","statistics","stat","sYear","stId","stsDate","steDate","stTotal","streaks","dateDiff","date1","date2","streakDiff","contribPerPlatforms","pName","pId","cType","VERIFY_TOKEN","App_templateObject","LOGIN_REAL_USER","App_templateObject2","REFRESH_TOKEN","App_templateObject3","_templateObject4","App","getItem","_verifyToken","_loginUser","verify","verifyToken","_isLogged","payload","exp","origIat","_setLogged","orig","now","_refeshToken","refresh","_ref4","refreshToken","handleChangeState","handleLogin","_ref7","registrationData","sourceTemp","sourceData","intel","react_router_dom","molecules_Navbar","src_Routes","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","httpLink","createHttpLink","ReactDOM","react_common_esm","src_App","document","getElementById","URL","process","origin","response","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.46eb1978.chunk.js","sourcesContent":["//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBTabPane,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBNav,\r\n  MDBNavItem,\r\n  MDBNavLink,\r\n  MDBIcon,\r\n  MDBTabContent,\r\n  MDBBadge\r\n} from \"mdbreact\";\r\n\r\n//> CSS\r\nimport \"./tabcontainer.scss\";\r\n\r\nclass TabContainer extends React.Component {\r\n  state = {\r\n    activeItemInnerPills: 0,\r\n    activeSubItem: 0,\r\n    activeHorizontalItem: 0\r\n  };\r\n\r\n  toggleOuterPills = tab => e => {\r\n    if (this.state.activeItemInnerPills !== tab) {\r\n      this.setState({\r\n        activeItemInnerPills: tab\r\n      });\r\n    }\r\n  };\r\n\r\n  toggleSub = tab => e => {\r\n    if (this.state.activeSubItem !== tab) {\r\n      this.setState({\r\n        activeSubItem: tab\r\n      });\r\n    }\r\n  };\r\n\r\n  toggleHorizontal = tab => e => {\r\n    if (this.state.activeHorizontalItem !== tab) {\r\n      this.setState({\r\n        activeHorizontalItem: tab\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (this.props.vertical) {\r\n      return (\r\n        <MDBRow id=\"tabcontainer\">\r\n          <MDBCol md=\"3\">\r\n            <MDBNav pills color=\"primary\" className=\"flex-column\">\r\n              {this.props.settings.map((setting, key) => {\r\n                return (\r\n                  <MDBNavItem key={key}>\r\n                    <MDBNavLink\r\n                      to=\"#\"\r\n                      active={this.state.activeItemInnerPills === key}\r\n                      onClick={this.toggleOuterPills(key)}\r\n                      className=\"text-left\"\r\n                    >\r\n                      <MDBIcon icon={setting.icon} className=\"mr-2\" />{\" \"}\r\n                      {setting.title}\r\n                    </MDBNavLink>\r\n                  </MDBNavItem>\r\n                );\r\n              })}\r\n            </MDBNav>\r\n          </MDBCol>\r\n          <MDBCol md=\"9\">\r\n            <MDBTabContent activeItem={this.state.activeItemInnerPills}>\r\n              {this.props.settings &&\r\n                this.props.settings.map((setting, key) => {\r\n                  return (\r\n                    <>\r\n                      <MDBTabPane tabId={key} key={key}>\r\n                        <MDBNav className=\"nav-tabs mt-5\">\r\n                          {setting.subtitles &&\r\n                            setting.subtitles.map((subtitle, subkey) => {\r\n                              return (\r\n                                <MDBNavItem>\r\n                                  <MDBNavLink\r\n                                    to=\"#\"\r\n                                    active={this.state.activeSubItem === subkey}\r\n                                    onClick={this.toggleSub(subkey)}\r\n                                    role=\"tab\"\r\n                                  >\r\n                                    {subtitle.title}\r\n                                  </MDBNavLink>\r\n                                </MDBNavItem>\r\n                              );\r\n                            })}\r\n                        </MDBNav>\r\n                        <MDBTabContent activeItem={this.state.activeSubItem}>\r\n                          {/* \r\n                                                To be added\r\n                                            */}\r\n                        </MDBTabContent>\r\n                      </MDBTabPane>\r\n                    </>\r\n                  );\r\n                })}\r\n            </MDBTabContent>\r\n          </MDBCol>\r\n        </MDBRow>\r\n      );\r\n    } else if (this.props.horizontal) {\r\n      return (\r\n        <>\r\n          <MDBNav className=\"nav-tabs mt-5\">\r\n            {this.props.items &&\r\n              this.props.items.map((item, key) => {\r\n                if (item.visible) {\r\n                  return (\r\n                    <MDBNavItem key={key}>\r\n                      <MDBNavLink\r\n                        to=\"#\"\r\n                        active={this.state.activeHorizontalItem === key}\r\n                        onClick={this.toggleHorizontal(key)}\r\n                        role=\"tab\"\r\n                      >\r\n                        {item.title}\r\n                        {item.notification && (\r\n                          <MDBBadge pill color=\"danger\">\r\n                            {\" \"}\r\n                          </MDBBadge>\r\n                        )}\r\n                        {item.pill && (\r\n                          <MDBBadge className=\"ml-2\" pill color=\"light\">\r\n                            {item.pill}\r\n                          </MDBBadge>\r\n                        )}\r\n                      </MDBNavLink>\r\n                    </MDBNavItem>\r\n                  );\r\n                } else {\r\n                  return null;\r\n                }\r\n              })}\r\n          </MDBNav>\r\n          <MDBTabContent activeItem={this.state.activeHorizontalItem}>\r\n            {this.props.children}\r\n          </MDBTabContent>\r\n        </>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TabContainer;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBAvatar } from \"mdbreact\";\r\n\r\nclass Avatar extends React.Component {\r\n  render() {\r\n    return (\r\n      <MDBAvatar className=\"mx-auto white\">\r\n        <img\r\n          src={this.props.url}\r\n          alt={this.props.alt}\r\n          className=\"rounded-circle img-fluid\"\r\n        />\r\n      </MDBAvatar>\r\n    );\r\n  }\r\n}\r\nexport default Avatar;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBCardBody, MDBIcon } from \"mdbreact\";\r\n\r\n//> Components\r\nimport { LanguageChart } from \"../\";\r\n\r\n//> CSS\r\nimport \"./socialdata.scss\";\r\n\r\nclass Socialdata extends React.Component {\r\n  render() {\r\n    const {\r\n      status,\r\n      name,\r\n      company,\r\n      location,\r\n      email,\r\n      website,\r\n      accounts\r\n    } = this.props;\r\n\r\n    console.log(\"Social\",this.props);\r\n\r\n    return (\r\n      <MDBCardBody id=\"socialdata\">\r\n        <h4 className=\"font-weight-bold mb-4\">{name}</h4>\r\n        {status && (status.message || status.icon) && (\r\n          <>\r\n            <hr />\r\n            {status.icon && (\r\n              <div dangerouslySetInnerHTML={{ __html: status.icon }}></div>\r\n            )}\r\n            {status.message && (\r\n              <p className=\"dark-grey-text\">{status.message}</p>\r\n            )}\r\n          </>\r\n        )}\r\n        {(company || location || email || website) && <hr />}\r\n        <div className=\"vcard text-left\">\r\n          {company && (\r\n            <span>\r\n              <MDBIcon icon=\"building\" />\r\n              {company}\r\n            </span>\r\n          )}\r\n          {location && (\r\n            <span>\r\n              <MDBIcon icon=\"map-marker-alt\" />\r\n              {location}\r\n            </span>\r\n          )}\r\n          {email && (\r\n            <a href={\"mailto:\" + email}>\r\n              <span>\r\n                <MDBIcon icon=\"envelope\" />\r\n                {email}\r\n              </span>\r\n            </a>\r\n          )}\r\n          {website && (\r\n            <a\r\n              href={\"https://\" + website}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <span>\r\n                <MDBIcon icon=\"link\" />\r\n                {website}\r\n              </span>\r\n            </a>\r\n          )}\r\n          <LanguageChart languages={this.props.languages} />\r\n        </div>\r\n      </MDBCardBody>\r\n    );\r\n  }\r\n}\r\nexport default Socialdata;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","export default function changeHue(rgb, degree) {\r\n  var hsl = rgbToHSL(rgb);\r\n  hsl.h += degree;\r\n  if (hsl.h > 360) {\r\n    hsl.h -= 360;\r\n  } else if (hsl.h < 0) {\r\n    hsl.h += 360;\r\n  }\r\n  return hslToRGB(hsl);\r\n}\r\n\r\n// exepcts a string and returns an object\r\nfunction rgbToHSL(rgb) {\r\n  // strip the leading # if it's there\r\n  rgb = rgb.replace(/^\\s*#|\\s*$/g, \"\");\r\n\r\n  // convert 3 char codes --> 6, e.g. `E0F` --> `EE00FF`\r\n  if (rgb.length == 3) {\r\n    rgb = rgb.replace(/(.)/g, \"$1$1\");\r\n  }\r\n\r\n  var r = parseInt(rgb.substr(0, 2), 16) / 255,\r\n    g = parseInt(rgb.substr(2, 2), 16) / 255,\r\n    b = parseInt(rgb.substr(4, 2), 16) / 255,\r\n    cMax = Math.max(r, g, b),\r\n    cMin = Math.min(r, g, b),\r\n    delta = cMax - cMin,\r\n    l = (cMax + cMin) / 2,\r\n    h = 0,\r\n    s = 0;\r\n\r\n  if (delta == 0) {\r\n    h = 0;\r\n  } else if (cMax == r) {\r\n    h = 60 * (((g - b) / delta) % 6);\r\n  } else if (cMax == g) {\r\n    h = 60 * ((b - r) / delta + 2);\r\n  } else {\r\n    h = 60 * ((r - g) / delta + 4);\r\n  }\r\n\r\n  if (delta == 0) {\r\n    s = 0;\r\n  } else {\r\n    s = delta / (1 - Math.abs(2 * l - 1));\r\n  }\r\n\r\n  return {\r\n    h: h,\r\n    s: s,\r\n    l: l\r\n  };\r\n}\r\n\r\n// expects an object and returns a string\r\nfunction hslToRGB(hsl) {\r\n  var h = hsl.h,\r\n    s = hsl.s,\r\n    l = hsl.l,\r\n    c = (1 - Math.abs(2 * l - 1)) * s,\r\n    x = c * (1 - Math.abs(((h / 60) % 2) - 1)),\r\n    m = l - c / 2,\r\n    r,\r\n    g,\r\n    b;\r\n\r\n  if (h < 60) {\r\n    r = c;\r\n    g = x;\r\n    b = 0;\r\n  } else if (h < 120) {\r\n    r = x;\r\n    g = c;\r\n    b = 0;\r\n  } else if (h < 180) {\r\n    r = 0;\r\n    g = c;\r\n    b = x;\r\n  } else if (h < 240) {\r\n    r = 0;\r\n    g = x;\r\n    b = c;\r\n  } else if (h < 300) {\r\n    r = x;\r\n    g = 0;\r\n    b = c;\r\n  } else {\r\n    r = c;\r\n    g = 0;\r\n    b = x;\r\n  }\r\n\r\n  r = normalize_rgb_value(r, m);\r\n  g = normalize_rgb_value(g, m);\r\n  b = normalize_rgb_value(b, m);\r\n\r\n  return rgbToHex(r, g, b);\r\n}\r\n\r\nfunction normalize_rgb_value(color, m) {\r\n  color = Math.floor((color + m) * 255);\r\n  if (color < 0) {\r\n    color = 0;\r\n  }\r\n  return color;\r\n}\r\n\r\nfunction rgbToHex(r, g, b) {\r\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBRow, MDBCol } from \"mdbreact\";\r\n\r\n//> Helpers\r\nimport changeHue from \"../../helpers/changeHue.js\";\r\n\r\n//> CSS\r\nimport \"./calendar.scss\";\r\n\r\nconst months = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];\r\n\r\nclass Calender2D extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.myInput = React.createRef();\r\n\r\n    this.state = {\r\n      width: 0,\r\n      hue: 0\r\n    };\r\n  }\r\n\r\n  updateDimensions = () => {\r\n    this.setState({\r\n      width: this.myInput.current.offsetWidth\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    // Add resize listener\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n\r\n    let contributions = this.props.calendar.currentYear;\r\n\r\n    this.setState(\r\n      {\r\n        width: this.myInput.current.offsetWidth,\r\n        contributionsList: contributions\r\n      },\r\n      () => this.countContribs()\r\n    );\r\n\r\n    // Color RGB cycling\r\n    let intervalID = window.setInterval(this.cycleHue, 70);\r\n  };\r\n\r\n  cycleHue = () => {\r\n    if (this.state.hue > 365) {\r\n      this.setState({\r\n        hue: 0\r\n      });\r\n    }\r\n    this.setState({\r\n      hue: this.state.hue + 0\r\n    });\r\n  };\r\n\r\n  countContribs = () => {\r\n    if (this.state.contributionsList) {\r\n      return this.state.contributionsList.totalContributions;\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  getEachMonth = pos => {\r\n    // Create new empty array\r\n    let month = new Array();\r\n\r\n    // Get current month\r\n    let current = new Date().getMonth();\r\n\r\n    // Have each month two times\r\n    month[0] = \"Jan\";\r\n    month[1] = \"Feb\";\r\n    month[2] = \"Mar\";\r\n    month[3] = \"Apr\";\r\n    month[4] = \"May\";\r\n    month[5] = \"Jun\";\r\n    month[6] = \"Jul\";\r\n    month[7] = \"Aug\";\r\n    month[8] = \"Sep\";\r\n    month[9] = \"Oct\";\r\n    month[10] = \"Nov\";\r\n    month[11] = \"Dec\";\r\n    month[12] = \"Jan\";\r\n    month[13] = \"Feb\";\r\n    month[14] = \"Mar\";\r\n    month[15] = \"Apr\";\r\n    month[16] = \"May\";\r\n    month[17] = \"Jun\";\r\n    month[18] = \"Jul\";\r\n    month[19] = \"Aug\";\r\n    month[20] = \"Sep\";\r\n    month[21] = \"Oct\";\r\n    month[22] = \"Nov\";\r\n    month[23] = \"Dec\";\r\n\r\n    return month[current + pos];\r\n  };\r\n\r\n  render() {\r\n    //console.log(this.state);\r\n    //console.log(this.state.contributionsList);\r\n    return (\r\n      <div id=\"calendar2d\">\r\n        <div className=\"text-right\">\r\n          <h3 className=\"font-weight-bold d-inline-block\">\r\n            {this.countContribs()}\r\n          </h3>\r\n          <span> contributions in the last year</span>\r\n        </div>\r\n        <MDBRow className=\"text-center\">\r\n          {months.map((month, key) => {\r\n            return (\r\n              <MDBCol size=\"months\" key={key}>\r\n                <small>{this.getEachMonth(key)}</small>\r\n              </MDBCol>\r\n            );\r\n          })}\r\n        </MDBRow>\r\n        <div ref={this.myInput}>\r\n          <svg className=\"calendar\" height={(this.state.width / 53) * 7}>\r\n            {this.state.contributionsList &&\r\n              this.state.contributionsList.weeks.map((week, wkey) => {\r\n                return week.contributionDays.map((day, dkey) => {\r\n                  if (wkey === 0) {\r\n                    return (\r\n                      <rect\r\n                        key={wkey + \"-\" + dkey}\r\n                        y={\r\n                          (this.state.width / 53) * 7 +\r\n                          (this.state.width / 53) * dkey -\r\n                          week.contributionDays.length * (this.state.width / 53)\r\n                        }\r\n                        x={0}\r\n                        width={this.state.width / 53}\r\n                        height={this.state.width / 53}\r\n                        data-data={day.date}\r\n                        data-count={day.total}\r\n                        fill={changeHue(day.color, this.state.hue)}\r\n                      ></rect>\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <rect\r\n                        key={wkey + \"-\" + dkey}\r\n                        y={(this.state.width / 53) * dkey}\r\n                        x={(this.state.width / 53) * wkey}\r\n                        width={this.state.width / 53}\r\n                        height={this.state.width / 53}\r\n                        data-data={day.date}\r\n                        data-count={day.total}\r\n                        fill={changeHue(day.color, this.state.hue)}\r\n                      ></rect>\r\n                    );\r\n                  }\r\n                });\r\n              })}\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Calender2D;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Additional libraries\r\n// Time management\r\nimport moment from \"moment\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBRow, MDBCol } from \"mdbreact\";\r\n\r\n//> Helpers\r\nimport changeHue from \"../../helpers/changeHue.js\";\r\n\r\n//> Dummy data\r\n//import dummyData from \"./dummydata.js\";\r\n\r\n//> CSS\r\nimport \"./calendar3d.scss\";\r\n\r\nclass Calender3D extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.myInput = React.createRef();\r\n    this.state = {\r\n      width: 0,\r\n      hue: 0\r\n    };\r\n  }\r\n\r\n  updateDimensions = () => {\r\n    this.setState({\r\n      width: this.myInput.current.offsetWidth\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    // Add resize listener\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n    this.setState({\r\n      width: this.myInput.current.offsetWidth\r\n    }, () => this.renderIsometrics());\r\n  };\r\n\r\n  renderTopStats() {\r\n    let countTotal, averageCount, datesTotal, maxCount, dateBest;\r\n\r\n    let contribData = this.props.contrib[\"2019\"];\r\n    let contributionCalendar = this.props.calendar.currentYear;\r\n\r\n    console.log(45, contribData);\r\n\r\n    countTotal = contributionCalendar.total;\r\n    averageCount = contribData.average;\r\n    datesTotal = moment(contributionCalendar.fromDate).format(\"MMM DD, YYYY\") + \" - \" + moment(contributionCalendar.toDate).format(\"MMM DD, YYYY\");\r\n    maxCount = contribData.busiestDay.total;\r\n    dateBest = moment(contribData.busiestDay.date).format(\"MMM DD, YYYY\");\r\n\r\n    // \"Oct 7, 2018 - Oct 9, 2019\"\r\n\r\n    let html;\r\n    html = `<div class=\"ic-stats-block ic-stats-top\">\\n\r\n    <span class=\"ic-stats-table\">\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">1 year total\\n\r\n    <span class=\"ic-stats-count\">${countTotal}</span>\\n\r\n    <span class=\"ic-stats-average\">${averageCount}</span> per day\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta ic-stats-total-meta\">\\n\r\n    <span class=\"ic-stats-unit\">contributions</span>\\n\r\n    <span class=\"ic-stats-date\">${datesTotal}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">Busiest day\\n\r\n    <span class=\"ic-stats-count\">${maxCount}</span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta\">\\n\r\n    <span class=\"ic-stats-unit\">contributions</span>\\n\r\n    <span class=\"ic-stats-date\">${dateBest}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </div>`;\r\n    return { __html: html };\r\n  }\r\n\r\n  renderBottomStats() {\r\n    let streakLongest, datesLongest, streakCurrent, datesCurrent;\r\n\r\n    let contribData = this.props.contrib[\"2019\"];\r\n    let contributionCalendar = this.props.calendar;\r\n\r\n    streakLongest = contribData.longestStreak.total;\r\n    datesLongest = moment(contribData.longestStreak.startDate).format(\"MMM DD, YYYY\") \r\n    + \" - \" \r\n    + moment(contribData.longestStreak.endDate).format(\"MMM DD, YYYY\");\r\n    streakCurrent = contribData.currentStreak.total;\r\n    datesCurrent = moment(contribData.currentStreak.startDate).format(\"MMM DD, YYYY\") \r\n    + \" - \" \r\n    + moment(contribData.currentStreak.endDate).format(\"MMM DD, YYYY\");\r\n\r\n    let html;\r\n    html = `<div class=\"ic-stats-block ic-stats-bottom\">\\n\r\n    <span class=\"ic-stats-table\">\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">Longest streak\\n\r\n    <span class=\"ic-stats-count\">${streakLongest}</span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta\">\\n\r\n    <span class=\"ic-stats-unit\">days</span>\\n\r\n    <span class=\"ic-stats-date\">${datesLongest}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">Current streak\\n\r\n    <span class=\"ic-stats-count\">${streakCurrent}</span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta\">\\n\r\n    <span class=\"ic-stats-unit\">days</span>\\n\r\n    <span class=\"ic-stats-date\">${datesCurrent}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </div>`;\r\n    return { __html: html };\r\n  }\r\n\r\n  renderIsometrics = () => {\r\n    const obelisk = require(\"obelisk.js\");\r\n\r\n    // Create a canvas 2D point for pixel view world\r\n    let point = new obelisk.Point(70, 70);\r\n\r\n    // Create view instance to nest everything\r\n    // Canvas could be either DOM or jQuery element\r\n    let pixelView = new obelisk.PixelView(this.context, point);\r\n\r\n    // Get contribs\r\n    let contributions = this.props.calendar.currentYear;\r\n    console.log(4, contributions);\r\n    // Define basic variables\r\n    let SIZE = 10;\r\n    let MAXHEIGHT = 100;\r\n    let x = 0;\r\n    let y = 0;\r\n    let maxCount = 0; // Max number of contributions / day in the last year\r\n\r\n    let values = [];\r\n\r\n    contributions.weeks.map((week, wkey) => {\r\n      values[wkey] = [];\r\n      week.contributionDays.map((day, dkey) => {\r\n        // Get max number of contributions\r\n        if (day.total > maxCount) {\r\n          maxCount = day.total;\r\n        }\r\n        values[wkey][dkey] = day;\r\n      });\r\n    });\r\n\r\n    values.map((week, wi) => {\r\n      week.map((day, di) => {\r\n        // Normalize the values to achieve even distribution\r\n        let cubeHeight = 3;\r\n        if (maxCount > 0) {\r\n          cubeHeight += parseInt(\r\n            (MAXHEIGHT / maxCount) * day.total\r\n          );\r\n        }\r\n\r\n        // Offsets\r\n        let x = wi;\r\n        let y = di;\r\n\r\n        // Create cube dimension and color instance\r\n        //let gray = obelisk.ColorPattern.GRAY;\r\n        let fill = day.color;\r\n        let color = new obelisk.CubeColor().getByHorizontalColor(\r\n          parseInt(\"0x\" + fill.replace(\"#\", \"\"))\r\n        );\r\n\r\n        let dimension = new obelisk.CubeDimension(SIZE, SIZE, cubeHeight);\r\n        // Build cube with dimension and color instance\r\n        let p3d = new obelisk.Point3D(SIZE * x, SIZE * y, 0);\r\n        var cube = new obelisk.Cube(dimension, color, false);\r\n\r\n        // Render cube primitive into view\r\n        pixelView.renderObject(cube, p3d);\r\n      });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    console.log(this.state);\r\n    return (\r\n      <div id=\"calendar3d\">\r\n        <div dangerouslySetInnerHTML={this.renderTopStats()} />\r\n        <div dangerouslySetInnerHTML={this.renderBottomStats()} />\r\n        <div ref={this.myInput}>\r\n          <canvas\r\n            ref={c => (this.context = c)}\r\n            width={this.state.width}\r\n            height=\"410\"\r\n          ></canvas>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Calender3D;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Chart.js\r\n// \"Material Design for Bootstrap\" is using chart.js to generate its charts\r\nimport { Radar } from \"react-chartjs-2\";\r\n\r\nclass LanguageChart extends React.Component {\r\n  state = {\r\n    dataPolar: {\r\n      datasets: [\r\n        {\r\n          data: [300, 250, 100, 40],\r\n          backgroundColor: [\r\n            \"rgba(247, 70, 74, 0.8)\",\r\n            \"rgba(70, 191, 189, 0.8)\",\r\n            \"rgba(253, 180, 92, 0.8)\",\r\n            \"rgba(148, 159, 177, 0.8)\"\r\n          ],\r\n          label: \"Your top languages\"\r\n        }\r\n      ],\r\n      labels: [\"JavaScript\", \"Python\", \"CSS\", \"Roff\"]\r\n    }\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    let languages = this.props.languages.slices;\r\n\r\n    let colors = [];\r\n    let labels = [];\r\n    let data = [];\r\n\r\n    Object.values(languages).map((language, i) => {\r\n      colors.push(language.color);\r\n      labels.push(language.name);\r\n      data.push(language.share);\r\n    });\r\n    console.log(colors, labels);\r\n\r\n    this.setState({\r\n      dataPolar: {\r\n        datasets: [\r\n          {\r\n            data,\r\n            backgroundColor: colors,\r\n            label: \"Your top languages\"\r\n          }\r\n        ],\r\n        labels\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <p className=\"lead font-weight-bold text-center mt-3\">\r\n          Your top languages\r\n        </p>\r\n        {this.state.dataPolar &&\r\n          <Radar\r\n            className=\"w-100 h-auto\"\r\n            data={this.state.dataPolar}\r\n            options={\r\n              ({\r\n                responsive: true\r\n              },\r\n              {\r\n                legend: {\r\n                  display: false\r\n                }\r\n              })\r\n            }\r\n          />\r\n        }\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LanguageChart;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// Router\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBNavbar,\r\n  MDBContainer,\r\n  MDBNavbarBrand,\r\n  MDBNavbarNav,\r\n  MDBNavItem,\r\n  MDBNavLink,\r\n  MDBNavbarToggler,\r\n  MDBCollapse,\r\n  MDBFormInline,\r\n  MDBInput,\r\n  MDBIcon,\r\n  MDBDropdown,\r\n  MDBDropdownToggle,\r\n  MDBDropdownMenu,\r\n  MDBDropdownItem\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\nimport { \r\n  SearchBar\r\n} from \"../../molecules\";\r\n\r\n//> CSS\r\nimport \"./navbar.scss\";\r\n\r\nclass Navbar extends React.Component {\r\n  state = {\r\n    isOpen: false\r\n  };\r\n\r\n  toggleCollapse = () => {\r\n    this.setState({ isOpen: !this.state.isOpen });\r\n  };\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const { data } = this.props;\r\n    return (\r\n      <MDBNavbar color=\"elegant-color\" dark expand=\"md\">\r\n        <MDBContainer>\r\n          <MDBNavbarBrand>\r\n            <strong className=\"white-text\">SNEK</strong>\r\n          </MDBNavbarBrand>\r\n          <MDBNavbarToggler onClick={this.toggleCollapse} />\r\n          <MDBCollapse id=\"navbarCollapse3\" isOpen={this.state.isOpen} navbar>\r\n            <SearchBar />\r\n            <MDBNavbarNav left>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Ranking</MDBNavLink>\r\n              </MDBNavItem>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Developer</MDBNavLink>\r\n              </MDBNavItem>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Jobs</MDBNavLink>\r\n              </MDBNavItem>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Trends</MDBNavLink>\r\n              </MDBNavItem>\r\n            </MDBNavbarNav>\r\n            <MDBNavbarNav right>\r\n              <MDBNavItem active={data.pageLogin}>\r\n              {location.pathname === \"/\" ? (\r\n                <span \r\n                className=\"nav-link cursor-pointer\"\r\n                onClick={() => this.props.changeState(\"pageLogin\", true)}\r\n                >\r\n                Sign in\r\n                </span>\r\n              ) : (\r\n                <MDBNavLink to=\"/\">Sign in</MDBNavLink>\r\n              )}\r\n              </MDBNavItem>\r\n              <MDBNavItem active={!data.pageLogin}>\r\n                {location.pathname === \"/\" ? (\r\n                <span \r\n                className=\"nav-link cursor-pointer\"\r\n                onClick={() => this.props.changeState(\"pageLogin\", false)}\r\n                >\r\n                Sign up\r\n                </span>\r\n              ) : (\r\n                <MDBNavLink to=\"/\">Sign up</MDBNavLink>\r\n              )}\r\n              </MDBNavItem>\r\n            </MDBNavbarNav>\r\n          </MDBCollapse>\r\n        </MDBContainer>\r\n      </MDBNavbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Navbar);\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Additional packages\r\nimport Typist from \"react-typist\";\r\n\r\nclass TextTypist extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { \r\n      active: 0\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      scope: this.props.scope\r\n    });\r\n  }\r\n\r\n  onTypingDone = () => {\r\n    this.setState({\r\n      scope: null\r\n    }, () => this.setState({\r\n      scope: this.props.scope\r\n    }));\r\n  };\r\n\r\n  render(){\r\n    if(this.state.scope){\r\n      return(\r\n        <Typist \r\n        className=\"d-inline typist\"\r\n        cursor={{\r\n          show: true,\r\n          blink: true,\r\n          element: \"_\",\r\n        }}\r\n        onTypingDone={() => this.onTypingDone()}\r\n        >\r\n          <Typist.Delay ms={2000} />\r\n          {this.state.scope.map((text, i) => {\r\n            return (\r\n              <span key={i}>\r\n                {text}\r\n                {<Typist.Backspace count={text.length + 10} delay={2000} />}\r\n              </span>\r\n            );\r\n          })}\r\n        </Typist>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TextTypist;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBInput,\r\n  MDBIcon,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n} from \"mdbreact\";\r\n\r\nclass SearchBar extends React.Component {\r\n  state = {\r\n    search: \"\",\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const { data } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"md-form my-0 mx-2\">\r\n          <MDBInput\r\n            className=\"mr-sm-2\"\r\n            outline\r\n            maxLength=\"20\"\r\n            value={this.state.search}\r\n            name=\"search\"\r\n            type=\"search\"\r\n            onChange={this.handleChange}\r\n            placeholder=\"Search\"\r\n            aria-label=\"Search\"\r\n          />\r\n          <MDBIcon icon=\"search\" />\r\n        </div>\r\n        {this.state.search &&\r\n        <div className=\"search-results\">\r\n          <MDBListGroup>\r\n          <a \r\n          href={\"https://www.google.com/search?q=\"+this.state.search}\r\n          target=\"_blank\"\r\n          className=\"text-muted\"\r\n          >\r\n            <MDBListGroupItem><MDBIcon fab icon=\"google\" className=\"mr-2\" />\r\n            {this.state.search}\r\n            </MDBListGroupItem>\r\n          </a>\r\n          </MDBListGroup>\r\n        </div>\r\n        }\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Additional\r\n// Charts\r\nimport { \r\n  Radar\r\n} from \"react-chartjs-2\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBContainer\r\n} from \"mdbreact\";\r\n\r\nclass ChartsPage extends React.Component {\r\n\r\n  state={\r\n    dataRadar: {\r\n      labels: [\"Loading\"],\r\n      datasets: [{\r\n        label: \"Loading\"\r\n      }]\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    console.log(this.props);\r\n    this.setState({\r\n      dataRadar: {\r\n        labels: [\"Code review\", \"Issues\", \"Pull request\", \"Commits\"],\r\n        datasets: this.calculateSources()\r\n      },\r\n      dataRadarOptions: {\r\n        responsive: true,\r\n        elements: {\r\n          line: {\r\n            tension: 0\r\n          }\r\n        },\r\n        legend: {\r\n          display: true,\r\n        },\r\n        scale: {\r\n          ticks: {\r\n            beginAtZero: true,\r\n            max: 100,\r\n            min: 0,\r\n            stepSize: 20\r\n          }\r\n        },\r\n        scales: {\r\n            yAxes: [{\r\n              gridLines: {\r\n                display: false,\r\n                drawBorder: false\r\n              },\r\n              ticks: {\r\n                display: false\r\n              }\r\n            }],\r\n            xAxes: [{\r\n              gridLines: {\r\n                display: false,\r\n                drawBorder: false\r\n              },\r\n              ticks: {\r\n                beginAtZero: true,\r\n                display: false,\r\n              }\r\n            }]\r\n        }\r\n    }\r\n    })\r\n  }\r\n\r\n  calculateSources = () => {\r\n    let totalReviews = 0, totalIssues = 0, totalRequests = 0, totalCommits = 0, totalSources = 1, results = [];\r\n\r\n    // Get data points for all sources\r\n    let types = this.props.types.contribs;\r\n    totalReviews = types.codeReviews.share;\r\n    totalIssues = types.issue.share;\r\n    totalRequests = types.pullRequest.share;\r\n    totalCommits = types.commit.share;\r\n\r\n    let values = [\r\n      totalReviews,\r\n      totalIssues,\r\n      totalRequests,\r\n      totalCommits\r\n    ];\r\n\r\n    results.push({\r\n      label: \"GitHub\",\r\n      backgroundColor: \"rgba(51,51,51,0)\",\r\n      borderColor: \"rgba(51,51,51,.4)\",\r\n      data: values\r\n    })\r\n    \r\n    // Calculate averages\r\n    let avgReviews, avgIssues, avgRequests, avgCommits;\r\n\r\n    avgReviews = parseInt(totalReviews) / parseInt(totalSources);\r\n    avgIssues = parseInt(totalIssues) / parseInt(totalSources);\r\n    avgRequests = parseInt(totalRequests) / parseInt(totalSources);\r\n    avgCommits = parseInt(totalCommits) / parseInt(totalSources);\r\n\r\n    // Create average data points\r\n    /*results.push({\r\n      label: \"Average\",\r\n      backgroundColor: \"rgba(33, 181, 33, .7)\",\r\n      borderColor: \"rgba(33, 181, 33, .3)\",\r\n      data: [\r\n        avgReviews,\r\n        avgIssues,\r\n        avgReviews,\r\n        avgCommits\r\n      ]\r\n    });*/\r\n\r\n    console.log(results);\r\n\r\n    return results;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MDBContainer>\r\n        <Radar \r\n        data={this.state.dataRadar}\r\n        options={this.state.dataRadarOptions}\r\n        />\r\n      </MDBContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChartsPage;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\nclass Redirect extends React.Component {\r\n  componentDidMount = () => {\r\n    this.getRedirect();\r\n  };\r\n\r\n  getRedirect = async () => {\r\n    // Get name of window which was set by the parent to be the unique\r\n    // request key\r\n    const requestKey = window.name;\r\n    // Update corresponding entry with the redirected url which should\r\n    // contain either access token or failure reason in the query\r\n    // parameter / hash\r\n    localStorage.setItem(requestKey, window.location.href);\r\n    window.close();\r\n  };\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default Redirect;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBContainer,\r\n  MDBTabPane,\r\n  MDBTabContent,\r\n  MDBNav,\r\n  MDBNavItem,\r\n  MDBNavLink,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBBtn,\r\n  MDBCardBody,\r\n  MDBCardTitle,\r\n  MDBCardText,\r\n  MDBIcon\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\nimport { TabContainer } from \"../../molecules\";\r\n\r\n//> Data\r\nconst settings = [\r\n  {\r\n    title: \"General\",\r\n    subtitles: [\r\n      {\r\n        title: \"Profile\"\r\n      }\r\n    ],\r\n    icon: \"user\"\r\n  },\r\n  {\r\n    title: \"Customization\",\r\n    subtitles: [\r\n      {\r\n        title: \"Features\"\r\n      },\r\n      {\r\n        title: \"Colors\"\r\n      },\r\n      {\r\n        title: \"User profile\"\r\n      }\r\n    ],\r\n    icon: \"leaf\"\r\n  },\r\n  {\r\n    title: \"Security\",\r\n    subtitles: [\r\n      {\r\n        title: \"Login\"\r\n      }\r\n    ],\r\n    icon: \"lock\"\r\n  },\r\n  {\r\n    title: \"API\",\r\n    subtitles: [\r\n      {\r\n        title: \"Profile\"\r\n      }\r\n    ],\r\n    icon: \"network-wired\"\r\n  },\r\n  {\r\n    title: \"Billing\",\r\n    icon: \"dollar-sign\"\r\n  },\r\n  {\r\n    title: \"Stats\",\r\n    subtitles: [\r\n      {\r\n        title: \"General\"\r\n      }\r\n    ],\r\n    icon: \"lock\"\r\n  },\r\n  {\r\n    title: \"Sources\",\r\n    subtitles: [\r\n      {\r\n        title: \"General\"\r\n      }\r\n    ],\r\n    icon: \"cloud\"\r\n  }\r\n];\r\n\r\nclass Settings extends React.Component {\r\n  render() {\r\n    return (\r\n      <MDBContainer>\r\n        <h2 className=\"mt-5\">Settings</h2>\r\n        <TabContainer settings={settings} vertical />\r\n      </MDBContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Settings;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBTabPane } from \"mdbreact\";\r\n\r\nclass Resume extends React.Component {\r\n  render() {\r\n    return <MDBTabPane tabId={this.props.id} role=\"tabpanel\"></MDBTabPane>;\r\n  }\r\n}\r\n\r\nexport default Resume;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBTabPane } from \"mdbreact\";\r\n\r\nclass Projects extends React.Component {\r\n  render() {\r\n    return (\r\n      <MDBTabPane tabId={this.props.id} role=\"tabpanel\">\r\n        {this.props.repos && (\r\n          <>\r\n            <h3 className=\"font-weight-bold mt-4\">Repositories</h3>\r\n            <ul>\r\n              {this.props.repos.map((repo, key) => {\r\n                return (\r\n                  <li key={key}>\r\n                    <a\r\n                      href={repo.url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                    >\r\n                      {repo.name}\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </>\r\n        )}\r\n      </MDBTabPane>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Projects;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { \r\n  MDBTabPane\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\n// Molecules\r\nimport {\r\n  Calendar2D,\r\n  Calendar3D,\r\n  ContribChart,\r\n} from \"../../../molecules\";\r\n\r\nclass Overview extends React.Component {\r\n  render() {\r\n    return (\r\n      <MDBTabPane tabId={this.props.id} role=\"tabpanel\">\r\n        {(this.props.contrib && this.props.calendar) && (\r\n          <>\r\n            {this.props.contrib && (\r\n              <Calendar2D calendar={this.props.calendar} />\r\n            )}\r\n            <Calendar3D contrib={this.props.contrib} calendar={this.props.calendar} />\r\n            <ContribChart types={this.props.contribTypes} />\r\n          </>\r\n        )}\r\n      </MDBTabPane>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Overview;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBTabPane } from \"mdbreact\";\r\n\r\nclass Education extends React.Component {\r\n  render() {\r\n    return <MDBTabPane tabId={this.props.id} role=\"tabpanel\"></MDBTabPane>;\r\n  }\r\n}\r\n\r\nexport default Education;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// Router\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBEdgeHeader,\r\n  MDBFreeBird,\r\n  MDBContainer,\r\n  MDBCol,\r\n  MDBRow,\r\n  MDBCardBody,\r\n  MDBIcon,\r\n  MDBCard,\r\n  MDBCardTitle,\r\n  MDBCardImage,\r\n  MDBCardText,\r\n  MDBAnimation,\r\n  MDBAvatar,\r\n  MDBCardUp\r\n} from \"mdbreact\";\r\n\r\n//> Images\r\n// To be added\r\n\r\n//> Components\r\n// Molecules\r\nimport { TabContainer, Avatar, Socialdata } from \"../../molecules\";\r\n// Organisms\r\nimport {\r\n  ResumeTab,\r\n  ProjectsTab,\r\n  OverviewTab,\r\n  EducationTab,\r\n} from \"../../organisms/tabs\";\r\n\r\n//> Handlers\r\n// To be added\r\n\r\n//> CSS\r\nimport \"./profile.scss\";\r\n\r\n//> Dummy data\r\n// Tab headers\r\nconst tabitems = [\r\n  {\r\n    title: \"Overview\",\r\n    visible: true,\r\n    pill: false,\r\n    notification: false\r\n  },\r\n  {\r\n    title: \"Resume\",\r\n    visible: true,\r\n    pill: false,\r\n    notification: false\r\n  },\r\n  {\r\n    title: \"Projects\",\r\n    visible: true,\r\n    pill: \"22\",\r\n    notification: false\r\n  },\r\n  {\r\n    title: \"Education\",\r\n    visible: true,\r\n    pill: \"0\",\r\n    notification: true\r\n  }\r\n];\r\n\r\nclass Dashboard extends React.Component {\r\n  render() {\r\n    const { globalStore } = this.props;\r\n\r\n    // Debugging access point - state\r\n    console.log(globalStore);\r\n\r\n    if(!globalStore.data.logged) { return (<Redirect to=\"/\"/>) }\r\n\r\n    let data = globalStore.data;\r\n\r\n    if (data) {\r\n      return (\r\n        <div id=\"profile\">\r\n          <MDBContainer className=\"pt-5\">\r\n            <MDBRow>\r\n              <MDBCol md=\"4\" className=\"text-center\">\r\n                <MDBCard testimonial>\r\n                  <MDBCardUp color=\"info\" />\r\n                  <Avatar url={data.user.avatarUrl} alt={data.user.name} />\r\n                  <Socialdata\r\n                    status={{\r\n                      message: data.user.status, \r\n                      icon: data.user.statusEmojiHTML\r\n                    }}\r\n                    name={data.user.name}\r\n                    company={data.user.company}\r\n                    location={data.user.location}\r\n                    email={data.user.email}\r\n                    languages={data.languages}\r\n                    website={data.user.websiteUrl}\r\n                    accounts={{\r\n                      github: data.user\r\n                    }}\r\n                  />\r\n                </MDBCard>\r\n              </MDBCol>\r\n              <MDBCol md=\"8\">\r\n                <TabContainer items={tabitems} horizontal>\r\n                  <OverviewTab \r\n                  id={0}\r\n                  contrib={data.contrib}\r\n                  calendar={data.contribCalendar}\r\n                  contribTypes={data.contribTypes}\r\n                  />\r\n                  <ResumeTab id={1} />\r\n                  <ProjectsTab id={2} repos={data.repos} />\r\n                  <EducationTab id={3} />\r\n                </TabContainer>\r\n              </MDBCol>\r\n            </MDBRow>\r\n          </MDBContainer>\r\n        </div>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","// Import Modules\r\nimport { guid } from \"../services/utilities\";\r\nimport { IProvider } from \"react-very-simple-oauth\";\r\n\r\n// Set the default values needed for an OAuth-Request\r\nconst client_id = \"2148629809594d57c113\";\r\nconst client_secret = \"64a37e4846387cfcaea35d83afca3c9c8689628c\";\r\nconst state = guid();\r\nconst redirect_uri = encodeURIComponent(\"https://snek.at/redirect\");\r\nconst proxyUrl = \"https://cors-anywhere.herokuapp.com/\";\r\n\r\nexport const githubProvider: IProvider<boolean> = {\r\n  //Get Request to the GitHub OAuth Authorize-Site\r\n  buildAuthorizeUrl(): string {\r\n    return `https://github.com/login/oauth/authorize?redirect_uri=${redirect_uri}\r\n        &client_id=${client_id}\r\n        &client_secret=${client_secret}\r\n        &scope=repo, user:email, read:user, read:org\r\n        &state=${state}`;\r\n  },\r\n\r\n  // Catch any error that appears during the OAuth process\r\n  extractError(redirectUrl: string): Error | undefined {\r\n    const errorMatch = redirectUrl.match(/error=([^&]+)/);\r\n    if (!errorMatch) {\r\n      return undefined;\r\n    }\r\n\r\n    const errorReason = errorMatch[1];\r\n    const errorDescriptionMatch = redirectUrl.match(\r\n      /error_description=([^&]+)/,\r\n    );\r\n    const errorDescription = errorDescriptionMatch\r\n      ? errorDescriptionMatch[1]\r\n      : \"\";\r\n    return new Error(\r\n      `Error during login. Reason: ${errorReason} Description: ${errorDescription}`,\r\n    );\r\n  },\r\n\r\n  // This function catches the the returned value\r\n  async extractSession(redirectUrl: string) {\r\n    let data = null;\r\n    let code = null;\r\n    const codeMatch = redirectUrl.match(/code=([^&]+)/);\r\n    if (codeMatch) {\r\n      code = codeMatch[1];\r\n    }\r\n\r\n    let state = null;\r\n    const stateMatch = redirectUrl.match(/state=([^&]+)/);\r\n    if (stateMatch) {\r\n      state = stateMatch[1];\r\n    }\r\n\r\n    const AuthorizeUrl = `${proxyUrl}https://github.com/login/oauth/access_token?code=${code}\r\n        &client_secret=${client_secret}&client_id=${client_id}&redirect_uri=${redirect_uri}&state=${state}`;\r\n\r\n    // POST request to get the access token from GitHub\r\n    await fetch(AuthorizeUrl, {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Access-Allow-Credentials\": \"True\",\r\n        \"Access-Control-Allow-Methods\": \"POST\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        \"Content-Type\": \"application/json\",\r\n        Vary: \"Origin\",\r\n      },\r\n      method: \"POST\",\r\n    })\r\n    .then(async res => await res.json())\r\n    .then(async res => {\r\n      const access_token = res.access_token\r\n      // GET request to get the user used for OAuth \r\n      await fetch(`https://api.github.com/user?access_token=${access_token}`)\r\n      .then(async res => await res.json())\r\n      .then(res => {\r\n        data = {'username':res.login, 'access_token': access_token};\r\n        return data;\r\n      });\r\n    });\r\n    return data;\r\n  },\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","export function guid() {\r\n  var d = new Date().getTime();\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\r\n    var r = (d + Math.random() * 16) % 16 | 0;\r\n    d = Math.floor(d / 16);\r\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","// Import Modules\r\nimport { IProvider } from \"react-very-simple-oauth\";\r\n\r\nexport const gitlabProvider: IProvider<boolean> = {\r\n  //Get Request to the GitHub OAuth Authorize-Site\r\n  buildAuthorizeUrl(): string {\r\n    return `https://snek.at/gitlab`;\r\n  },\r\n\r\n  // Catch any error that appears during the OAuth process\r\n  extractError(redirectUrl: string): Error | undefined {\r\n    const errorMatch = redirectUrl.match(/error=([^&]+)/);\r\n    if (!errorMatch) {\r\n      return undefined;\r\n    }\r\n\r\n    const errorReason = errorMatch[1];\r\n    const errorDescriptionMatch = redirectUrl.match(\r\n      /error_description=([^&]+)/,\r\n    );\r\n    const errorDescription = errorDescriptionMatch\r\n      ? errorDescriptionMatch[1]\r\n      : \"\";\r\n    return new Error(\r\n      `Error during login. Reason: ${errorReason} Description: ${errorDescription}`,\r\n    );\r\n  },\r\n\r\n  // This function catches the the returned value\r\n  async extractSession(redirectUrl: string) {\r\n    let server = null;\r\n    let username = null;\r\n    const usernameMatch = redirectUrl.match(/username=([^&]+)/);\r\n    if (usernameMatch) {\r\n      username = usernameMatch[1];\r\n      username = username.replace(/_/g,'.')\r\n    }\r\n\r\n    const serverMatch = redirectUrl.match(/server=([^&]+)/);\r\n    if (serverMatch) {\r\n      server = serverMatch[1];\r\n      server = server.replace(/_/g,'.')\r\n    }\r\n\r\n    let data = {'server': server, 'username': username}\r\n    return data;\r\n  },\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Additional modules\r\n// Password hashing\r\nimport { sha256 } from \"js-sha256\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBCardFooter,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n  MDBCardText,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBBadge,\r\n  MDBTooltip,\r\n  MDBPopover,\r\n  MDBPopoverHeader,\r\n  MDBPopoverBody,\r\n  MDBIcon,\r\n} from \"mdbreact\";\r\n\r\n//> CSS\r\nimport \"./register.scss\";\r\n\r\n// Auth\r\nimport { githubProvider } from \"../../../../intel/OAuthGithub/providers/github\";\r\nimport { gitlabProvider } from \"../../../../intel/AuthGitLab/providers/gitlab\";\r\nimport RSA from \"react-very-simple-oauth\";\r\n\r\n// Apollo\r\nimport { graphql } from \"react-apollo\";\r\nimport * as compose from \"lodash.flowright\";\r\nimport { gql } from \"apollo-boost\";\r\n\r\n// Register mutation\r\nconst CREATE_USER_MUTATION = gql`\r\n    mutation register($token: String!, $values: GenericScalar!) {\r\n        registrationFormPage(token: $token, url: \"/registration\", values: $values) {\r\n            result\r\n            errors {\r\n            name\r\n            errors\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nclass Register extends React.Component{\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    password1: \"\",\r\n    username: \"\",\r\n    plattform: \"\",\r\n    server: \"\",\r\n    oAuthGitHubButton: true,\r\n    oAuthGitHubData: null,\r\n    AuthGitLabButton: true,\r\n    sourceList: [],\r\n    verifiedSourceList: [],\r\n    customUsername: false,\r\n    usernames: [],\r\n  }\r\n\r\n  addToUsernames = (username) => {\r\n    let usernames = this.state.usernames;\r\n    if(!usernames.includes(username)){\r\n      usernames.push(username);\r\n      this.setState({\r\n        usernames\r\n      });\r\n    }\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  connectGitHub = async () => {\r\n    // Debugging\r\n    //console.log(\"GitHub oAuth function called.\");\r\n    \r\n    // Disable button while oAuth in progress\r\n    this.setState({\r\n      oAuthGitHubButton: false\r\n    });\r\n\r\n    const data = await RSA.acquireTokenAsync(githubProvider);\r\n    this.setState({\r\n      oAuthGitHubButton: true,\r\n    }, () => this.pushToSourceList(\"github\", data.username, \"github.com\", data.access_token));\r\n  }\r\n\r\n  connectGitLab = async () => {\r\n    // Debugging\r\n    //console.log(\"GitHub oAuth function called.\");\r\n    \r\n    // Disable button while oAuth in progress\r\n    this.setState({\r\n      AuthGitLabButton: false\r\n    });\r\n\r\n    const data = await RSA.acquireTokenAsync(gitlabProvider);\r\n    this.setState({\r\n      AuthGitLabButton: true,\r\n    }, () => this.pushToSourceList(\"gitlab\", data.username, data.server, data.token));\r\n  }\r\n\r\n  pushToSourceList = (source, username, server, token) => {\r\n    //console.log(source,username);\r\n    let sourceList = this.state.sourceList;\r\n\r\n    if (source != \"gitlab\")\r\n    {\r\n      this.addToUsernames(username);\r\n    }\r\n\r\n    sourceList.push({\r\n      id: Math.random() * username.length + source.length,\r\n      source,\r\n      username,\r\n      server,\r\n      token,\r\n    });\r\n    // Set the new list\r\n    this.setState({\r\n      sourceList,\r\n      username: this.state.username ? this.state.username : sourceList[0].username\r\n    });\r\n  }\r\n\r\n  removeSource = (id) => {\r\n    let sourceList = this.state.sourceList.filter(function( obj ) {\r\n        return obj.id !== id;\r\n    });\r\n    this.setState({\r\n      sourceList\r\n    });\r\n  }\r\n\r\n  handleUserNamePick = (username) => {\r\n    this.setState({\r\n      username\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    let token = this.props.token;\r\n    let values = {\r\n      sources: JSON.stringify(this.state.sourceList),\r\n      username: this.state.username,\r\n      email: this.state.email,\r\n      password: sha256(this.state.password),\r\n      platform_data: JSON.stringify(this.state.sourceList),\r\n    };\r\n    console.log(values);\r\n    this.props.register({\r\n      variables: { \"token\": token, \"values\": values }\r\n    })\r\n    .then(() => {\r\n        alert(\"Welcome to SNEK!\")\r\n    })\r\n    .catch(error => {\r\n        console.warn(\"Mutation error:\",error.message);\r\n    })\r\n  }\r\n\r\n  render(){\r\n    console.log(this.state);\r\n    console.log(this.props);\r\n    return(\r\n      <MDBCard id=\"register\" className=\"text-dark\">\r\n        <MDBCardBody>\r\n          <h2>Join us</h2>\r\n          <MDBInput\r\n          label=\"Email\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          outline\r\n          value={this.state.email}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <div>\r\n            <div>\r\n            <p className=\"lead\">Connect your work</p>\r\n              <small>\r\n              You can connect multiple accounts - even from the same platform.\r\n              </small>\r\n            </div>\r\n            <MDBTooltip\r\n              placement=\"bottom\"\r\n            >\r\n              <MDBBtn \r\n              floating \r\n              color=\"orange\" \r\n              className=\"mx-1\" \r\n              onClick={this.connectGitLab}\r\n              disabled={!this.state.AuthGitLabButton}\r\n              >\r\n                <MDBIcon fab icon=\"gitlab\" />\r\n              </MDBBtn>\r\n              <div>\r\n                  Link GitLab account\r\n              </div>\r\n            </MDBTooltip>\r\n            <MDBTooltip\r\n              placement=\"bottom\"\r\n            >\r\n              <MDBBtn \r\n              floating\r\n              social=\"git\"\r\n              className=\"mx-1\"\r\n              onClick={this.connectGitHub}\r\n              disabled={!this.state.oAuthGitHubButton}\r\n              >\r\n                <MDBIcon fab icon=\"github\" />\r\n              </MDBBtn>\r\n                <div>\r\n                  Link GitHub account\r\n              </div>\r\n            </MDBTooltip>\r\n            <MDBTooltip\r\n              placement=\"bottom\"\r\n            >\r\n              <MDBBtn floating social=\"blue\" className=\"mx-1\" disabled>\r\n                <MDBIcon fab icon=\"bitbucket\" />\r\n              </MDBBtn>\r\n              <div>\r\n                Link Bitbucket account\r\n              </div>\r\n            </MDBTooltip>\r\n          </div>\r\n          <div>\r\n            <MDBListGroup>\r\n            {this.state.sourceList.map((source, i) => {\r\n              return(\r\n                <MDBListGroupItem \r\n                className={\"list-item-\"+source.source}\r\n                key={i}\r\n                >\r\n                  <div>\r\n                  <MDBIcon \r\n                  fab\r\n                  icon={source.source}\r\n                  className=\"company-icon\"\r\n                  />\r\n                  {source.username}\r\n                  <MDBPopover\r\n                    placement=\"right\"\r\n                    domElement\r\n                    clickable\r\n                    popover\r\n                    tag=\"span\"\r\n                    id=\"popper1\"\r\n                  >\r\n                    {source.source == \"github\" ? (  \r\n                      <span>\r\n                      <MDBIcon\r\n                      icon=\"check\"\r\n                      className=\"text-success ml-2 cursor-pointer\"\r\n                      />\r\n                      </span>\r\n                    ) : (\r\n                      <span>\r\n                      <MDBIcon\r\n                      icon=\"times\"\r\n                      className=\"red-text ml-2 cursor-pointer\"\r\n                      />\r\n                      </span>\r\n                    )}\r\n                    <div>\r\n                    <MDBPopoverHeader>Verified</MDBPopoverHeader>\r\n                      <MDBPopoverBody>\r\n                        <MDBRow className=\"justify-content-center align-items-center m-0\">\r\n                          <MDBCol size=\"auto\" className=\"p-0 text-success\">\r\n                            <MDBIcon icon=\"award\" size=\"3x\" />\r\n                          </MDBCol>\r\n                          <MDBCol className=\"p-0 pl-3\">\r\n                            This source has been <strong className=\"text-success\">verified</strong> by logging into it.\r\n                          </MDBCol>\r\n                        </MDBRow>\r\n                      </MDBPopoverBody>\r\n                    </div>\r\n                  </MDBPopover>\r\n                  </div>\r\n                  <MDBIcon \r\n                  icon=\"times\"\r\n                  className=\"close-icon\"\r\n                  onClick={() => this.removeSource(source.id)}\r\n                  />\r\n                </MDBListGroupItem>\r\n              );\r\n            })}\r\n\r\n            </MDBListGroup>\r\n          </div>\r\n          {this.state.sourceList.length > 0 &&\r\n          <div className=\"pt-4\">\r\n            <p className=\"lead\">Choose your username</p>\r\n            {this.state.usernames.map((username, i) => {\r\n              return(\r\n                <MDBInput \r\n                key={i}\r\n                onClick={(e) => this.handleUserNamePick(username)}\r\n                checked={this.state.username === username ? true : false}\r\n                label={username}\r\n                type=\"radio\"\r\n                id={\"radio\"+i}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          }\r\n          <MDBInput \r\n          label=\"Password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          outline\r\n          value={this.state.password}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <MDBInput \r\n          label=\"Repeat password\"\r\n          type=\"password\"\r\n          name=\"password2\"\r\n          outline\r\n          value={this.state.password2}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <MDBBtn\r\n          color=\"success\"\r\n          className=\"w-100 py-3 font-weight-bold mx-0\"\r\n          onClick={this.handleSubmit}\r\n          >\r\n          Sign up for SNEK\r\n          </MDBBtn>\r\n        </MDBCardBody>\r\n        <MDBCardFooter>\r\n\r\n        </MDBCardFooter>\r\n      </MDBCard>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  graphql(CREATE_USER_MUTATION, {\r\n      name: 'register'\r\n  })\r\n)(Register);\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n// Apollo\r\nimport { graphql, withApollo } from \"react-apollo\";\r\nimport * as compose from \"lodash.flowright\";\r\nimport { gql } from \"apollo-boost\";\r\n\r\n//> Additional modules\r\n// Password hashing\r\nimport { sha256 } from \"js-sha256\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBCardFooter,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n  MDBCardText,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBBadge,\r\n  MDBTooltip,\r\n  MDBPopover,\r\n  MDBPopoverHeader,\r\n  MDBPopoverBody,\r\n  MDBIcon,\r\n} from \"mdbreact\";\r\n\r\nconst LOGIN_USER = gql`\r\n    mutation tokenAuth($username: String!, $password: String!){\r\n        tokenAuth(username:$username,password:$password){\r\n            token\r\n        }\r\n    }\r\n`;\r\n\r\nclass Login extends React.Component{\r\n\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    this.props.login({\r\n      variables: { \"username\": this.state.username, \"password\": sha256(this.state.password) }\r\n    })\r\n    .then(({data}) => {\r\n      //console.log(data);\r\n      if(data.tokenAuth){\r\n        if(data.tokenAuth.token){\r\n          this.props.loginHandler(data.tokenAuth.token);\r\n        }\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.warn(\"Mutation error:\",error.message);\r\n    });\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <MDBCard id=\"login\" className=\"text-dark\">\r\n        <MDBCardBody>\r\n          <h2>Sign in</h2>\r\n          <MDBInput\r\n          label=\"Username\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          outline\r\n          value={this.state.username}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <MDBInput \r\n          label=\"Password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          outline\r\n          value={this.state.password}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <MDBBtn\r\n          color=\"success\"\r\n          className=\"w-100 py-3 font-weight-bold mx-0\"\r\n          onClick={this.handleSubmit}\r\n          >\r\n          Sign in\r\n          </MDBBtn>\r\n        </MDBCardBody>\r\n      </MDBCard>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  graphql(LOGIN_USER, { name: \"login\" }),\r\n)(withApollo(Login));\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// Router\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBContainer, MDBRow, MDBCol } from \"mdbreact\";\r\n\r\n//> Components\r\nimport {\r\n  TextTypist,\r\n} from \"../../molecules\";\r\n\r\n//> Components\r\nimport { \r\n  Register,\r\n  Login,\r\n} from \"../../organisms/sections\";\r\n\r\n//> CSS\r\nimport \"./landing.scss\";\r\n\r\n//> Typist Data\r\nconst scope = [\r\n  \"engineers\",\r\n  \"programmers\",\r\n  \"developers\",\r\n  \"entrepreneurs\",\r\n  \"students\",\r\n  \"teachers\",\r\n  \"sneks\"\r\n];\r\n\r\nclass Landing extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  logMeIn = (token) => {\r\n    localStorage.setItem(\"fprint\", token);\r\n    console.log(\"Test\");\r\n    this.props.login(token);\r\n  }\r\n\r\n  render() {\r\n    const { globalStore } = this.props;\r\n\r\n    if(globalStore.data.logged) { return (<Redirect to=\"/me\"/>) }\r\n\r\n    if(globalStore.data.loaded){\r\n      return (\r\n        <div id=\"landing\" className=\"py-5\">\r\n          <MDBContainer>\r\n            <MDBRow className=\"\">\r\n              <MDBCol md=\"6\" className=\"pt-5\">\r\n                <h1 className=\"mt-5\">\r\n                Built for <TextTypist scope={scope} />\r\n                </h1>\r\n              </MDBCol>\r\n              <MDBCol md=\"6\">\r\n                {globalStore.data.pageLogin ? (\r\n                  <Login \r\n                  token={globalStore.data.token}\r\n                  loginHandler={this.logMeIn}\r\n                  />\r\n                ) : (\r\n                  <Register \r\n                  token={globalStore.data.token}\r\n                  />\r\n                )}\r\n              </MDBCol>\r\n            </MDBRow>\r\n          </MDBContainer>\r\n        </div>\r\n      );\r\n    } else {\r\n      return <p>Loading...</p>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Landing;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBCardFooter,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n  MDBCardText,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBBadge,\r\n  MDBTooltip,\r\n  MDBPopover,\r\n  MDBPopoverHeader,\r\n  MDBPopoverBody,\r\n  MDBIcon,\r\n} from \"mdbreact\";\r\n\r\n//> CSS\r\nimport \"./gitlab.scss\";\r\n\r\nclass GitLab extends React.Component {\r\n  state = {\r\n    username: \"\",\r\n    server: \"\",\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    let server = this.state.server.replace(/./g,\"_\");\r\n    let username = this.state.username.replace(/./g,\"_\");\r\n    window.open(`https://snek.at/redirect?server=${server}&username=${username}`, \"_self\");\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <MDBCard id=\"gitlab\" className=\"text-dark\">\r\n      <MDBCardBody>\r\n        <h2>GitLab</h2>\r\n        <MDBInput\r\n        label=\"Username\"\r\n        type=\"text\"\r\n        name=\"username\"\r\n        outline\r\n        size=\"lg\"\r\n        value={this.state.username}\r\n        onChange={this.changeHandler}\r\n        />\r\n        <MDBInput \r\n        label=\"Server\"\r\n        type=\"text\"\r\n        name=\"server\"\r\n        outline\r\n        size=\"lg\"\r\n        value={this.state.server}\r\n        onChange={this.changeHandler}\r\n        />\r\n        <MDBBtn\r\n        color=\"success\"\r\n        className=\"w-100 py-3 font-weight-bold mx-0\"\r\n        onClick={this.handleSubmit}\r\n        >\r\n        Sign in\r\n        </MDBBtn>\r\n      </MDBCardBody>\r\n    </MDBCard>\r\n    )\r\n  }\r\n}\r\nexport default GitLab;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\n//> Components\r\nimport { \r\n  SettingsPage,\r\n  ProfilePage,\r\n  LandingPage,\r\n  RedirectPage,\r\n  GitLab,\r\n} from \"./components/pages\";\r\n\r\nclass Routes extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          component={(props) => (\r\n            <LandingPage \r\n            globalStore={this.props}\r\n            login={this.props.login}\r\n            {...props}\r\n            />\r\n          )}\r\n        />\r\n        <Route exact path=\"/settings\" component={SettingsPage} />\r\n        <Route\r\n          exact\r\n          path=\"/me\"\r\n          component={(props) => (\r\n            <ProfilePage \r\n            globalStore={this.props} {...props}\r\n            />\r\n          )}\r\n        />\r\n        <Route exact path=\"/redirect\" component={RedirectPage} />\r\n        <Route exact path=\"/gitlab\" component={GitLab} />\r\n        <Route\r\n          render={function() {\r\n            return <h1>Not Found</h1>;\r\n          }}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Routes;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","import * as create from \"./Statements/Create\";\r\nvar alasql = require(\"alasql\");\r\n\r\nconst initTables = `\r\n    ${create.platform}\r\n    ${create.organization}\r\n    ${create.member}\r\n    ${create.languagePie}\r\n    ${create.repository}\r\n    ${create.languageSlice}\r\n    ${create.statistic}\r\n    ${create.streak}\r\n    ${create.calendar}\r\n    ${create.contrib}\r\n    ${create.organizationHasMember}\r\n    ${create.repositoryHasMember}\r\n    ${create.platformHasOrganization}\r\n    ${create.platformHasRepository}\r\n`;\r\n\r\nexport function Database(dbName) {\r\n  let db = new alasql.Database(dbName);\r\n\r\n  db.exec(initTables);\r\n\r\n  return db;\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","export const platform = `\r\nDROP TABLE IF EXISTS platform;\r\nCREATE TABLE IF NOT EXISTS platform (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    platformName VARCHAR(80) NOT NULL,\r\n    platformUrl VARCHAR(2048) NOT NULL,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    websiteUrl VARCHAR(2048) NOT NULL,\r\n    company VARCHAR(80) NOT NULL,\r\n    email VARCHAR(254) NOT NULL,\r\n    username VARCHAR(80) NOT NULL,\r\n    fullName VARCHAR(80) NOT NULL,\r\n    createdAt DATE NOT NULL,\r\n    location VARCHAR(80) NULL,\r\n    statusMessage VARCHAR(80) NULL,\r\n    statusEmojiHTML VARCHAR(80) NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const organization = `\r\nDROP TABLE IF EXISTS organization;\r\nCREATE TABLE IF NOT EXISTS organization (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    name VARCHAR(80) NOT NULL,\r\n    url VARCHAR(2048) NOT NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const member = `\r\nDROP TABLE IF EXISTS member;\r\nCREATE TABLE IF NOT EXISTS member (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    name VARCHAR(80) NULL,\r\n    username VARCHAR(80) NOT NULL,\r\n    url VARCHAR(2048) NOT NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const languagePie = `\r\nDROP TABLE IF EXISTS languagePie;\r\nCREATE TABLE IF NOT EXISTS languagePie (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    size INT NOT NULL,\r\n    total INT NOT NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const repository = `\r\nDROP TABLE IF EXISTS repository;\r\nCREATE TABLE IF NOT EXISTS repository (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    url VARCHAR(2048) NOT NULL,\r\n    name VARCHAR(80) NOT NULL,\r\n    owner_id INT NULL,\r\n    languagePie_id INT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_repository_owner1\r\n        FOREIGN KEY (owner_id)\r\n        REFERENCES member (id),\r\n    CONSTRAINT fk_repository_languagePie1\r\n        FOREIGN KEY (languagePie_id)\r\n        REFERENCES languagePie (id)\r\n);\r\n`;\r\n\r\nexport const languageSlice = `\r\nDROP TABLE IF EXISTS languageSlice;\r\nCREATE TABLE IF NOT EXISTS languageSlice (\r\n    id INT UNSIGNED NOT NULL AUTO_INCREMENT,\r\n    color VARCHAR(7) NULL,\r\n    name VARCHAR(80) NOT NULL,\r\n    size INT NOT NULL,\r\n    pie_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_pie_id\r\n        FOREIGN KEY (pie_id)\r\n        REFERENCES languagePie (id)\r\n);\r\n`;\r\n\r\nexport const statistic = `\r\nDROP TABLE IF EXISTS statistic;\r\nCREATE TABLE IF NOT EXISTS statistic (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    year INT NOT NULL,\r\n    platform_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_statistic_platform\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id)\r\n);\r\n`;\r\n\r\nexport const streak = `\r\nDROP TABLE IF EXISTS streak ;\r\nCREATE TABLE IF NOT EXISTS streak (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    startDate DATE NULL,\r\n    endDate DATE NULL,\r\n    total INT NULL,\r\n    statistic_id INT NOT NULL REFERENCES statistic(id),\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const calendar = `\r\nDROP TABLE IF EXISTS calendar;\r\nCREATE TABLE IF NOT EXISTS calendar (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    date DATE NOT NULL,\r\n    week INT NOT NULL,\r\n    weekday INT NOT NULL,\r\n    total INT NOT NULL,\r\n    color VARCHAR(7) NULL,\r\n    platform_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_calendar_platform1\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id)\r\n);\r\n`;\r\n\r\nexport const contrib = `\r\nDROP TABLE IF EXISTS contrib;\r\nCREATE TABLE IF NOT EXISTS contrib (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    datetime DATETIME NOT NULL,\r\n    nameWithOwner VARCHAR(255) NOT NULL,\r\n    repoUrl VARCHAR(255) NOT NULL,\r\n    additions INT NULL,\r\n    deletions INT NULL,\r\n    changedFiles INT NULL,\r\n    type VARCHAR(255) NOT NULL,\r\n    calendar_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_contrib_calendar1\r\n        FOREIGN KEY (calendar_id)\r\n        REFERENCES calendar (id)\r\n);\r\n`;\r\n\r\nexport const organizationHasMember = `\r\nDROP TABLE IF EXISTS organization_has_member ;\r\nCREATE TABLE IF NOT EXISTS organization_has_member (\r\n    organization_id INT NOT NULL,\r\n    member_id INT NOT NULL,\r\n    PRIMARY KEY (organization_id, member_id),\r\n    CONSTRAINT fk_organization_has_member_organization1\r\n        FOREIGN KEY (organization_id)\r\n        REFERENCES organization (id),\r\n    CONSTRAINT fk_organization_has_member_member1\r\n        FOREIGN KEY (member_id)\r\n        REFERENCES member (id)\r\n);\r\n`;\r\n\r\nexport const repositoryHasMember = `\r\nDROP TABLE IF EXISTS repository_has_member;\r\nCREATE TABLE IF NOT EXISTS repository_has_member (\r\n    repository_id INT NOT NULL,\r\n    member_id INT NOT NULL,\r\n    PRIMARY KEY (repository_id, member_id),\r\n    CONSTRAINT fk_repository_has_member_repository1\r\n        FOREIGN KEY (repository_id)\r\n        REFERENCES repository (id),\r\n    CONSTRAINT fk_repository_has_member_member1\r\n        FOREIGN KEY (member_id)\r\n        REFERENCES member (id)\r\n);\r\n`;\r\n\r\nexport const platformHasOrganization = `\r\nDROP TABLE IF EXISTS platform_has_organization;\r\nCREATE TABLE IF NOT EXISTS platform_has_organization (\r\n    platform_id INT NOT NULL,\r\n    organization_id INT NOT NULL,\r\n    PRIMARY KEY (platform_id, organization_id),\r\n    CONSTRAINT fk_platform_has_organization_platform1\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id),\r\n    CONSTRAINT fk_platform_has_organization_organization1\r\n        FOREIGN KEY (organization_id)\r\n        REFERENCES organization (id)\r\n);\r\n`;\r\n\r\nexport const platformHasRepository = `\r\nDROP TABLE IF EXISTS platform_has_repository ;\r\nCREATE TABLE IF NOT EXISTS platform_has_repository (\r\n    platform_id INT NOT NULL,\r\n    repository_id INT NOT NULL,\r\n    PRIMARY KEY (platform_id, repository_id),\r\n    CONSTRAINT fk_platform_has_repository_platform1\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id),\r\n    CONSTRAINT fk_platform_has_repository_repository1\r\n        FOREIGN KEY (repository_id)\r\n        REFERENCES repository (id)\r\n);\r\n`;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","export const platform = `\r\nINSERT INTO platform(\r\n    platformName,\r\n    platformUrl,\r\n    avatarUrl,\r\n    websiteUrl,\r\n    company,\r\n    email,\r\n    username,\r\n    fullName,\r\n    createdAt,\r\n    location,\r\n    statusMessage,\r\n    statusEmojiHTML\r\n)\r\nVALUES (?,?,?,?,?,?,?,?,?,?,?,?);\r\n`;\r\n\r\nexport const organization = `\r\nINSERT INTO organization(\r\n    avatarUrl,\r\n    name,\r\n    url\r\n)\r\nVALUES (?,?,?);\r\n`;\r\n\r\nexport const member = `\r\nINSERT INTO member(\r\n    avatarUrl,\r\n    name,\r\n    username,\r\n    url\r\n)\r\nVALUES (?,?,?,?);\r\n`;\r\n\r\nexport const languagePie = `\r\nINSERT INTO languagePie(\r\n    size,\r\n    total\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const repository = `\r\nINSERT INTO repository(\r\n    avatarUrl,\r\n    url,\r\n    name,\r\n    owner_id,\r\n    languagePie_id\r\n)\r\nVALUES (?,?,?,?,?);\r\n`;\r\n\r\nexport const languageSlice = `\r\nINSERT INTO languageSlice(\r\n    name,\r\n    color,\r\n    size,\r\n    pie_id\r\n)\r\nVALUES (?,?,?,?);\r\n`;\r\n\r\nexport const statistic = `\r\nINSERT INTO statistic(\r\n    year,\r\n    platform_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const streak = `\r\nINSERT INTO streak(\r\n    startDate,\r\n    endDate,\r\n    total,\r\n    statistic_id\r\n)\r\nVALUES (?,?,?,?);\r\n`;\r\n\r\nexport const calendar = `\r\nINSERT INTO calendar(\r\n    date,\r\n    week,\r\n    weekday,\r\n    total,\r\n    color,\r\n    platform_id\r\n)\r\nVALUES (?,?,?,?,?,?);\r\n`;\r\n\r\nexport const contrib = `\r\nINSERT INTO contrib(\r\n    datetime,\r\n    nameWithOwner,\r\n    repoUrl,\r\n    additions,\r\n    deletions,\r\n    changedFiles,\r\n    type,\r\n    calendar_id\r\n)\r\nVALUES (?,?,?,?,?,?,?,?);\r\n`;\r\n\r\nexport const platformHasOrganization = `\r\nINSERT INTO platform_has_organization(\r\n    platform_id,\r\n    organization_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const platformHasRepository = `\r\nINSERT INTO platform_has_repository(\r\n    platform_id,\r\n    repository_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const organizationHasMember = `\r\nINSERT INTO organization_has_member(\r\n    organization_id,\r\n    member_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const repositoryHasMember = `\r\nINSERT INTO repository_has_member(\r\n    repository_id,\r\n    member_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","import * as insert from \"../../Database/Statements/Insert\";\r\nimport * as update from \"../../Database/Statements/Update\";\r\nimport * as webscrap from \"../UtilsWebscrap\";\r\nlet db;\r\n\r\n//> Helper functions\r\n// Get calendar week from date\r\nDate.prototype.getWeekNumber = function() {\r\n  var d = new Date(\r\n    Date.UTC(this.getFullYear(), this.getMonth(), this.getDate())\r\n  );\r\n  var dayNum = d.getUTCDay() || 7;\r\n  d.setUTCDate(d.getUTCDate() + 4 - dayNum);\r\n  var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n  return Math.ceil(((d - yearStart) / 864e5 + 1) / 7);\r\n};\r\n\r\n//> Fill functions\r\n// Fill the platform table with data\r\nconst fillPlatform = async user => {\r\n  const url = `https://${user.server}/${user.username}`;\r\n  const html = await webscrap.parseTextToDOM(\r\n    webscrap.fetchHtml(url).then(html => {\r\n      return html;\r\n    })\r\n  );\r\n  const status = html.getElementsByTagName(\"gl-emoji\")[0];\r\n  const coverDesc = html\r\n    .getElementsByClassName(\"cover-desc\")[0]\r\n    .getElementsByTagName(\"span\");\r\n\r\n  const coverTitle = html.getElementsByClassName(\"cover-title\")[0];\r\n  let avatarUrl = html\r\n    .getElementsByClassName(\"avatar-holder\")[0]\r\n    .getElementsByTagName(\"a\")[0]\r\n    .getAttribute(\"href\");\r\n  const links = html.getElementsByClassName(\"profile-link-holder\")[0];\r\n  const message = null;\r\n  const emojiHTML = null;\r\n  const fullName = coverDesc[0].innerHTML.trim().substring(1);\r\n  const date = coverDesc[1].innerHTML;\r\n\r\n  if (avatarUrl) {\r\n    if (!avatarUrl.includes(\"https://\") || !avatarUrl.includes(\"http://\")) {\r\n      avatarUrl = `https://${user.server}/${avatarUrl.substring(1)}`;\r\n    }\r\n  }\r\n\r\n  const createdAt = new Date(date);\r\n\r\n  db.exec(insert.platform, [\r\n    user.source,\r\n    url,\r\n    avatarUrl,\r\n    null,\r\n    null,\r\n    null,\r\n    user.username,\r\n    fullName,\r\n    createdAt,\r\n    null,\r\n    message,\r\n    emojiHTML\r\n  ]);\r\n};\r\n\r\nconst fillOrganizations = async user => {\r\n  const url = `https://${user.server}/users/${user.username}/groups.json`;\r\n  const html = await webscrap.parseJsonToDOM(\r\n    webscrap.fetchJson(url).then(html => {\r\n      return html;\r\n    })\r\n  );\r\n\r\n  const rows = html.getElementsByClassName(\"group-row\");\r\n\r\n  for (const _org of Array.from(rows)) {\r\n    let avatarUrl = _org\r\n      .getElementsByClassName(\"avatar\")[0]\r\n      .getAttribute(\"data-src\");\r\n    const name = _org\r\n      .getElementsByClassName(\"group-name\")[0]\r\n      .getAttribute(\"href\")\r\n      .substring(1);\r\n    let orgUrl = `https://${user.server}/${name}`;\r\n\r\n    if (avatarUrl) {\r\n      if (!avatarUrl.includes(\"https://\") || !avatarUrl.includes(\"http://\")) {\r\n        avatarUrl = `https://${user.server}/${avatarUrl.substring(1)}`;\r\n      }\r\n    }\r\n\r\n    db.exec(insert.organization, [avatarUrl, name, orgUrl]);\r\n\r\n    var idPlatform = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n    var idOrganization = db.exec(\"SELECT id FROM organization\").pop()[\"id\"];\r\n\r\n    db.exec(insert.platformHasOrganization, [idPlatform, idOrganization]);\r\n  }\r\n};\r\n\r\n// const fillDummy = () => {\r\n//   db.exec(insert.member, [\r\n//     \"https://snek.at/users/trash/avatar\",\r\n//     \"Trash The User\",\r\n//     \"trash\",\r\n//     \"https://snek.at/users/trash\"\r\n//   ]);\r\n//   db.exec(insert.languagePie, [-1, -1]);\r\n// };\r\n\r\nconst fillRepositories = (user, nameWithOwner) => {\r\n  let repository = {};\r\n  repository.repoUrl = `https://${user.server}/${nameWithOwner}`;\r\n  repository.avatarUrl = `https://${user.server}/${nameWithOwner}/-/avatar`;\r\n  repository.name = nameWithOwner;\r\n  repository.ownerId = db.exec(\"SELECT id FROM member\").pop();\r\n  repository.languagePieId = db.exec(\"SELECT id FROM languagePie\").pop();\r\n\r\n  if(repository.ownerId){\r\n    repository.ownerId = repository.ownerId.id\r\n  }\r\n\r\n  if(repository.languagePieId){\r\n    repository.languagePieId = repository.languagePieId.id\r\n  }\r\n\r\n  const repoExists = db.exec(\r\n    `SELECT id FROM repository WHERE name=\"${repository.name}\"`\r\n  );\r\n  if (repoExists === undefined || repoExists.length === 0) {\r\n    db.exec(insert.repository, [\r\n      repository.avatarUrl,\r\n      repository.repoUrl,\r\n      repository.name,\r\n      repository.ownerId,\r\n      repository.languagePieId\r\n    ]);\r\n\r\n    const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n    const repositoryId = db.exec(\"SELECT id FROM repository\").pop()[\"id\"];\r\n\r\n    db.exec(insert.platformHasRepository, [platformId, repositoryId]);\r\n  }\r\n  return repository;\r\n};\r\n\r\nconst fillContribution = (user, item) => {\r\n  let type;\r\n  if (item.innerHTML.includes(\"pushed to branch\")) {\r\n    type = \"commit\";\r\n  } else if (item.innerHTML.includes(\"opened\")) {\r\n    type = \"issue\";\r\n  } else if (item.innerHTML.includes(\"Merge branch\")) {\r\n    type = \"pullRequest\";\r\n  }\r\n\r\n  let datetime = item.getElementsByTagName(\"time\")[0].getAttribute(\"datetime\");\r\n  datetime = new Date(datetime);\r\n\r\n  let nameWithOwner = item\r\n    .getElementsByClassName(\"event-scope\")[0]\r\n    .getElementsByTagName(\"a\")[0]\r\n    .getAttribute(\"href\");\r\n  nameWithOwner = nameWithOwner.substring(1);\r\n\r\n  const repository = fillRepositories(user, nameWithOwner);\r\n  const calendarId = db.exec(\"SELECT id FROM calendar\").pop()[\"id\"];\r\n  db.exec(insert.contrib, [\r\n    datetime,\r\n    nameWithOwner,\r\n    repository.repoUrl,\r\n    null,\r\n    null,\r\n    null,\r\n    type,\r\n    calendarId\r\n  ]);\r\n};\r\n\r\nconst fillCalendar = async user => {\r\n  const limit = \"2147483647\";\r\n  const url = `https://${user.server}/${user.username}?limit=${limit}`;\r\n\r\n  const html = await webscrap.parseJsonToDOM(\r\n    webscrap.fetchJson(url).then(html => {\r\n      return html;\r\n    })\r\n  );\r\n\r\n  const activities = html.getElementsByClassName(\"event-item\");\r\n  for (const item of Array.from(activities)) {\r\n    if (\r\n      item.innerHTML.includes(\"pushed to branch\") ||\r\n      item.innerHTML.includes(\"opened\") ||\r\n      item.innerHTML.includes(\"Merge branch\")\r\n    ) {\r\n      let datetime = item\r\n        .getElementsByTagName(\"time\")[0]\r\n        .getAttribute(\"datetime\");\r\n      datetime = new Date(datetime);\r\n      let date = `${datetime.getFullYear()}-${datetime.getMonth()+1}-${datetime.getDate()}`;\r\n      let week = datetime.getWeekNumber().toString();\r\n      let weekday = datetime.getDay().toString();\r\n\r\n      const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n      const statYear = db.exec(\"SELECT year FROM statistic\").pop();\r\n\r\n      let year = datetime.getFullYear();\r\n\r\n      if(!statYear){\r\n        db.exec(insert.statistic, [year,platformId]);\r\n      }\r\n\r\n      let res = db\r\n        .exec(`SELECT total FROM calendar WHERE date=\"${date}\"`)\r\n        .pop();\r\n      //console.log(total)\r\n      if (res === undefined || res.length === 0) {\r\n        db.exec(insert.calendar, [date, week, weekday, 1, null, platformId]);\r\n      } else {\r\n        let total = res.total;\r\n        total++;\r\n        db.exec(update.calendarTotal, [total, date, platformId]);\r\n      }\r\n\r\n      fillContribution(user, item);\r\n    }\r\n  }\r\n};\r\n\r\n//> Export functions\r\n// Fill the Database from user object\r\nexport const fill = (_db, user) => {\r\n  db = _db;\r\n  return fillPlatform(user).then(\r\n    async () => await fillOrganizations(user).then(await fillCalendar(user))\r\n  );\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Send request functions\r\n// Proxy to bypass CORS\r\nconst proxy = \"https://c-hive-proxy.herokuapp.com/\";\r\n\r\n// Fetch JSON from url\r\nexport const fetchJson = urlIn => {\r\n  const url = `${proxy}${urlIn}`;\r\n  return fetch(url, {\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"X-Requested-With\": \"XMLHttpRequest\"\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .then(res => {\r\n      return res;\r\n    });\r\n};\r\n\r\n// Fetch HTML from url\r\nexport const fetchHtml = urlIn => {\r\n  const url = `${proxy}${urlIn}`;\r\n  return fetch(url, {\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\"\r\n    }\r\n  })\r\n    .then(res => res.text())\r\n    .then(res => {\r\n      return res;\r\n    });\r\n};\r\n\r\n//> Parser functions\r\n// Parse Json to DOM Object\r\nexport const parseJsonToDOM = json => {\r\n  const parser = new DOMParser();\r\n  const html = json.then(res => {\r\n    return parser.parseFromString(res.html, \"text/html\");\r\n  });\r\n  return html;\r\n};\r\n\r\n//Parse plain text to DOM Object\r\nexport const parseTextToDOM = json => {\r\n  const parser = new DOMParser();\r\n  const html = json.then(res => {\r\n    return parser.parseFromString(res, \"text/html\");\r\n  });\r\n  return html;\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","// Apollo\r\nimport { ApolloClient } from \"apollo-client\";\r\nimport { HttpLink } from \"apollo-link-http\";\r\nimport {\r\n  InMemoryCache,\r\n  IntrospectionFragmentMatcher\r\n} from \"apollo-cache-inmemory\";\r\n\r\nlet LINK;\r\nlet cache;\r\n\r\nexport const init = (apiLink, authorization) => {\r\n  // Cache setup\r\n  const fragmentMatcher = new IntrospectionFragmentMatcher({\r\n    introspectionQueryResultData: {\r\n      __schema: {\r\n        types: [] // no types provided - works like a charm.ing\r\n      }\r\n    }\r\n  });\r\n  cache = new InMemoryCache({ fragmentMatcher });\r\n\r\n  // Created HttpLink\r\n  LINK = new HttpLink({\r\n    uri: apiLink,\r\n    headers: {\r\n      authorization\r\n    }\r\n  });\r\n  // Apollo client setup\r\n  const client = new ApolloClient({\r\n    cache,\r\n    link: LINK\r\n  });\r\n  return client;\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","export const calendarTotal = `\r\nUPDATE calendar\r\nSET total = ?\r\nWHERE date = ? AND platform_id = ?\r\n`;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","// A tool to save a graphql query into a variable\r\nimport { gql } from \"apollo-boost\";\r\n\r\n// Structure GQL profile code\r\nexport const GET_PROFILE = gql`\r\n  query getData($username: String!) {\r\n    user(login: $username) {\r\n      avatarUrl\r\n      company\r\n      createdAt\r\n      name\r\n      login\r\n      email\r\n      websiteUrl\r\n      hovercard {\r\n        contexts {\r\n          message\r\n          octicon\r\n        }\r\n      }\r\n      isEmployee\r\n      isHireable\r\n      location\r\n      status {\r\n        emojiHTML\r\n        expiresAt\r\n        message\r\n        updatedAt\r\n      }\r\n      organizations(first: 100) {\r\n        pageInfo {\r\n          endCursor\r\n          hasNextPage\r\n        }\r\n        edges {\r\n          node {\r\n            name\r\n            url\r\n            avatarUrl\r\n            name\r\n            membersWithRole(first: 100) {\r\n              totalCount\r\n              nodes {\r\n                name\r\n                login\r\n                avatarUrl\r\n                url\r\n                projectsUrl\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n// Structure GQL calendar code\r\nconst getCalendarQueryPart = (fromYear, toYear, c) => {\r\n  //console.log(fromYear,toYear)\r\n  return `\r\n  c${c}: contributionsCollection(from:\"${fromYear}\", to:\"${toYear}\" ){\r\n    contributionYears\r\n    contributionCalendar{\r\n        totalContributions\r\n        weeks{\r\n          contributionDays{\r\n            contributionCount\r\n            date\r\n            color\r\n          }\r\n        }\r\n      }\r\n      commitContributionsByRepository {\r\n        url\r\n        repository {\r\n          defaultBranchRef{\r\n            target{\r\n              ... on Commit{\r\n                changedFiles\r\n                additions\r\n                deletions\r\n                committedDate\r\n                history{\r\n                  totalCount\r\n                  pageInfo{\r\n                    endCursor\r\n                  }\r\n                  nodes{\r\n                    committer{\r\n                      user{\r\n                        login\r\n                      }\r\n                    }\r\n                    committedDate\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n          openGraphImageUrl\r\n          name\r\n          nameWithOwner\r\n          url\r\n          owner{\r\n            avatarUrl\r\n            login\r\n            url\r\n          }\r\n          languages(first: 50, orderBy: {field: SIZE, direction: DESC}) {\r\n            totalCount\r\n            totalSize\r\n            edges {\r\n              size\r\n              node {\r\n                name\r\n                color\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      issueContributionsByRepository {\r\n        repository {\r\n          issues(first:100) {\r\n            nodes{\r\n              createdAt\r\n              author{\r\n                login\r\n              }\r\n            }\r\n          }\r\n          openGraphImageUrl\r\n          name\r\n          nameWithOwner\r\n          url\r\n          owner{\r\n            avatarUrl\r\n            login\r\n            url\r\n          }\r\n          languages(first: 50, orderBy: {field: SIZE, direction: DESC}){\r\n            totalCount\r\n            totalSize\r\n            edges {\r\n              size\r\n              node {\r\n                name\r\n                color\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      pullRequestContributionsByRepository {\r\n        repository {\r\n          pullRequests(first:100) {\r\n            nodes{\r\n              changedFiles\r\n              additions\r\n              deletions\r\n              createdAt\r\n              author{\r\n                login\r\n              }\r\n            }\r\n          }\r\n          openGraphImageUrl\r\n          name\r\n          nameWithOwner\r\n          url\r\n          owner{\r\n            avatarUrl\r\n            login\r\n            url\r\n          }\r\n          languages(first: 50, orderBy: {field: SIZE, direction: DESC}){\r\n            totalCount\r\n            totalSize\r\n            edges {\r\n              size\r\n              node {\r\n                name\r\n                color\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  `;\r\n};\r\n\r\nconst getRepositoryHistory = (owner, name, cursor, index) => {\r\n  return `\r\n  ${owner.replace(/-/g, \"_\")}${name.replace(/-/g, \"_\")}${index}:repository(owner:\"${owner}\", name:\"${name}\"){\r\n    nameWithOwner\r\n    defaultBranchRef{\r\n      target{\r\n        ... on Commit{\r\n          history (after:\"${cursor} ${99+index*100}\"){\r\n            totalCount\r\n            nodes{\r\n              committer{\r\n                user{\r\n                  login\r\n                }\r\n              }\r\n              committedDate\r\n              changedFiles\r\n              additions\r\n              deletions\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n  }\r\n  `;\r\n};\r\n\r\nexport const generateRepositoryHistoryQuery = (bigRepos) => {\r\n  let queryParts = [] ;\r\n  const queries = [];\r\n  const query = (part) => gql`\r\n                  query\r\n                  {\r\n                      ${part}\r\n                  }\r\n  `;\r\n  bigRepos.forEach((repo) => {\r\n    let runtime = ~~(repo.repository.defaultBranchRef.target.history.totalCount / 100);\r\n    let cursor = repo.repository.defaultBranchRef.target.history.pageInfo.endCursor.split(\" \")[0];\r\n    //console.log(runtime)\r\n    let maxRuntime = 10;\r\n    let partsCount = 0;\r\n    for (let index = 0; index < runtime; index++) {\r\n      if(maxRuntime === 0){\r\n        queries.append(query(queryParts[partsCount]));\r\n        partsCount++;\r\n        maxRuntime = 10;\r\n      }\r\n      queryParts[partsCount] += getRepositoryHistory(repo.repository.owner.login, repo.repository.name, cursor, index);\r\n      \r\n      maxRuntime--;\r\n      //console.log(queryParts)\r\n    }\r\n    //console.log(queryParts)\r\n  });\r\n  //console.log(queryParts)\r\n  \r\n  //console.log(query)\r\n  return queries;\r\n};\r\n// Generates a dynamic query structure\r\nconst generateCalendarsQuery = (username, createdAtDate) => {\r\n  var currentYear = new Date().getFullYear();\r\n\r\n  var fromDate = new Date(createdAtDate.getFullYear(), 0, 2);\r\n  var toDate = new Date(createdAtDate.getFullYear() + 1, 0, 1);\r\n\r\n  var query = \"\";\r\n  var count = 1;\r\n\r\n  while (fromDate.getFullYear() <= currentYear) {\r\n    query += getCalendarQueryPart(fromDate.toJSON(), toDate.toJSON(), count);\r\n    //console.log(fromDate.toJSON());\r\n    //console.log(date.setDate(date.getDate()-1))\r\n\r\n    fromDate.setFullYear(fromDate.getFullYear() + 1);\r\n    toDate.setFullYear(toDate.getFullYear() + 1);\r\n    count++;\r\n  }\r\n  return query;\r\n};\r\n\r\n// Get calendar basic structure\r\nexport const getCalendar = (username, createdAt) => {\r\n  const query = gql`\r\n    query\r\n      {\r\n        user(login: \"${username}\") {\r\n            ${generateCalendarsQuery(username, createdAt)}\r\n        }\r\n      }\r\n  `;\r\n  return query;\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","import * as insert from \"../../../Database/Statements/Insert\";\r\nimport { fill } from \"..\";\r\n\r\nlet db;\r\nlet streak = false;\r\nlet streakStart = \"\";\r\nlet streakTotal = 0;\r\n\r\n//> Helper functions\r\n// Get an Array with Contributions from contributionsByRepository Object\r\nconst genContributionsByRepositories = function* (contributionsByRepository, type, username) {\r\n  for (const repo of contributionsByRepository) {\r\n    switch(type){\r\n      case \"commit\":\r\n        yield repo.repository.defaultBranchRef.target.history.nodes.filter((contrib) => (\r\n        contrib.committer && \r\n        contrib.committer.user && \r\n        contrib.committer.user.login.toLowerCase() === username.toLowerCase())\r\n        ).map((_node) => {\r\n          let con = {};\r\n          con[\"datetime\"] = _node.committedDate;\r\n          con[\"repoNameWithOwner\"] = repo.repository.nameWithOwner;\r\n          con[\"repoUrl\"] = repo.repository.url;\r\n          con[\"additions\"] = repo.repository.defaultBranchRef.target.additions;\r\n          con[\"deletions\"] = repo.repository.defaultBranchRef.target.deletions;\r\n          con[\"changedFiles\"] = repo.repository.defaultBranchRef.target.changedFiles;\r\n          return con;\r\n        });\r\n        break;\r\n      case \"issue\":\r\n        yield repo.repository.issues.nodes.filter((contrib) => (\r\n          contrib.author && \r\n          contrib.author.login && \r\n          contrib.author.login.toLowerCase() === username.toLowerCase())\r\n        ).map((_node) => {\r\n          let con = {};\r\n          con[\"datetime\"] = _node.createdAt;\r\n          con[\"repoNameWithOwner\"] = repo.repository.nameWithOwner;\r\n          con[\"repoUrl\"] = repo.repository.url;\r\n          return con;\r\n        });\r\n        break;\r\n      case \"pullRequest\":\r\n        yield repo.repository.pullRequests.nodes.filter((contrib) => (\r\n          contrib.author &&\r\n          contrib.author.login &&\r\n          contrib.author.login.toLowerCase() === username.toLowerCase())\r\n        ).map((_node) => {\r\n          let con = {};\r\n          con[\"datetime\"] = _node.createdAt;\r\n          con[\"repoNameWithOwner\"] = repo.repository.nameWithOwner;\r\n          con[\"repoUrl\"] = repo.repository.url;\r\n          con[\"additions\"] = _node.additions;\r\n          con[\"deletions\"] = _node.deletions;\r\n          con[\"changedFiles\"] = _node.changedFiles;\r\n          return con;\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n};\r\n\r\n// Get an Array of Days from User Object\r\nconst getDaysArray = (objUser, keys) => {\r\n  let days = [];\r\n  keys.forEach((c) => {\r\n    const year = objUser.calendar[c.toString()];\r\n    for (const [w, week] of year.contributionCalendar.weeks.entries()) {\r\n      for (const [d, day] of week.contributionDays.entries()) {\r\n        days.push(day);\r\n      }\r\n    }\r\n  });\r\n  return days;\r\n};\r\n\r\n// Get an Dictionary of Years from Days Array\r\n// Key: year, Value: Array of Days\r\nconst getYearsDict = (days) => {\r\n  let years = {};\r\n  days.forEach((day) => {\r\n    const year = new Date(day.date).getFullYear();\r\n    if (years[parseInt(year)] === undefined) {\r\n      years[parseInt(year)] = [];\r\n    }\r\n    years[parseInt(year)].push(day);\r\n  });\r\n  return years;\r\n};\r\n\r\n//> Fill functions\r\n// Fill the platform Table\r\nconst fillPlatform = (objUser) => {\r\n  let statusMessage;\r\n  let statusEmojiHTML;\r\n\r\n  if (objUser.profile.status) {\r\n    statusMessage = objUser.profile.status.message;\r\n    statusEmojiHTML = objUser.profile.status.emojiHTML;\r\n  } else {\r\n    statusMessage = null;\r\n    statusEmojiHTML = null;\r\n  }\r\n\r\n  const avatarUrl = objUser.profile.avatarUrl;\r\n  const websiteUrl = objUser.profile.websiteUrl;\r\n  const company = objUser.profile.company;\r\n  const email = objUser.profile.email;\r\n  const fullName = objUser.profile.name;\r\n  const createdAt = objUser.profile.createdAt;\r\n  const location = objUser.profile.location;\r\n  const username = objUser.profile.login;\r\n\r\n  db.exec(insert.platform, [\r\n    \"GitHub\",\r\n    \"https://github.com\",\r\n    avatarUrl,\r\n    websiteUrl,\r\n    company,\r\n    email,\r\n    username,\r\n    fullName,\r\n    createdAt,\r\n    location,\r\n    statusMessage,\r\n    statusEmojiHTML\r\n  ]);\r\n};\r\n\r\n// Fill the member Table with Organization Members\r\nconst fillOrgMembers = (nodes, orgId) => {\r\n  nodes.forEach((_member) => {\r\n    const memberAvatarUrl = _member.avatarUrl;\r\n    const memberName = _member.name;\r\n    const memberWebUrl = _member.url;\r\n    const memberUsername = _member.login;\r\n    db.exec(insert.member, [\r\n      memberAvatarUrl,\r\n      memberName,\r\n      memberUsername,\r\n      memberWebUrl\r\n    ]);\r\n    const memberId = db.exec(\"SELECT id FROM member\").pop()[\"id\"];\r\n\r\n    db.exec(insert.organizationHasMember, [orgId, memberId]);\r\n  });\r\n};\r\n\r\n// Fill organization Table\r\nconst fillOrganization = (objUser) => {\r\n  objUser.profile.organizations.edges.forEach((_org) => {\r\n    const avatarUrl = _org.node.avatarUrl;\r\n    const name = _org.node.name;\r\n    const url = _org.node.url;\r\n    db.exec(insert.organization, [avatarUrl, name, url]);\r\n\r\n    const organizationId = db.exec(\"SELECT id FROM organization\").pop()[\"id\"];\r\n    const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n\r\n    db.exec(insert.platformHasOrganization, [platformId, organizationId]);\r\n    fillOrgMembers(_org.node.membersWithRole.nodes, organizationId);\r\n  });\r\n};\r\n\r\n// Prepare data to call functions related to Stats\r\nconst fillStats = (objUser) => {\r\n  let keys = Object.keys(objUser.calendar).filter((str) => {\r\n    return str.match(/c[0-9]+/);\r\n  });\r\n  const days = getDaysArray(objUser, keys);\r\n  const years = getYearsDict(days);\r\n\r\n  Object.keys(years).forEach((y) => {\r\n    const yearObj = years[parseInt(y)];\r\n    const yearNum = y;\r\n    const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n\r\n    db.exec(insert.statistic, [yearNum, platformId]);\r\n\r\n    yearObj.forEach((day) => {\r\n      const dayTotal = day.contributionCount;\r\n      const dayDate = day.date;\r\n\r\n      if (dayTotal !== 0) {\r\n        if (!streak) {\r\n          streak = true;\r\n          streakStart = dayDate;\r\n          streakTotal = dayTotal;\r\n        } else {\r\n          streakTotal += dayTotal;\r\n        }\r\n      } else if (streakTotal !== 0) {\r\n      const statisticId = db.exec(\"SELECT id FROM statistic\").pop()[\"id\"];\r\n      db.exec(insert.streak, [\r\n        new Date(streakStart),\r\n        new Date(new Date(dayDate).getTime() - 24 * 60 * 60 * 1000),\r\n        streakTotal,\r\n        statisticId\r\n      ]);\r\n        streak = false;\r\n        streakStart = \"\";\r\n        streakTotal = 0;\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n// Fill repository Table\r\nconst fillRepository = (_repo) => {\r\n  const repoOwnerId = db.exec(\"SELECT id FROM member\").pop()[\"id\"];\r\n  const name = _repo.repository.name;\r\n  const repoUrl = _repo.repository.url;\r\n  const avatarUrl = _repo.repository.openGraphImageUrl;\r\n  const pieId = db.exec(\"SELECT id FROM languagePie\").pop()[\"id\"];\r\n  db.exec(insert.repository, [avatarUrl, repoUrl, name, repoOwnerId, pieId]);\r\n  const repoId = db.exec(\"SELECT id FROM repository\").pop()[\"id\"];\r\n  const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n  db.exec(insert.platformHasRepository, [platformId, repoId]);\r\n};\r\n\r\n// Fill member Table with Repository Owner\r\nconst fillRepoOwner = (_repo) => {\r\n  const repoOwnerUsername = _repo.repository.owner.login;\r\n  const repoOwnerAvatarUrl = _repo.repository.owner.avatarUrl;\r\n  const repoOwnerName = _repo.repository.owner.name;\r\n  const repoOwnerUrl = _repo.repository.owner.url;\r\n  db.exec(insert.member, [\r\n    repoOwnerAvatarUrl,\r\n    repoOwnerName,\r\n    repoOwnerUsername,\r\n    repoOwnerUrl\r\n  ]);\r\n  fillRepository(_repo);\r\n};\r\n\r\n// Fill languageSlice Table\r\nconst fillLanguageSlice = (_repo) => {\r\n  const pieId = db.exec(\"SELECT id FROM languagePie\").pop()[\"id\"];\r\n  _repo.repository.languages.edges.forEach((_edge) => {\r\n    const nodeName = _edge.node.name;\r\n    const nodeSize = _edge.size;\r\n    const nodeColor = _edge.node.color;\r\n    db.exec(insert.languageSlice, [nodeName, nodeColor, nodeSize, pieId]);\r\n  });\r\n  fillRepoOwner(_repo);\r\n};\r\n\r\n// Fill languagePie Table\r\nconst fillPie = (reposi) => {\r\n  reposi.forEach((_repo) => {\r\n    if (\r\n      db.exec(\"SELECT url from repository WHERE url=?\", [\r\n        _repo.repository.url\r\n      ])[0] === undefined\r\n    ) {\r\n      const languagesCount = _repo.repository.languages.totalCount;\r\n      const languagesSize = _repo.repository.languages.totalSize;\r\n      db.exec(insert.languagePie, [languagesSize, languagesCount]);\r\n      fillLanguageSlice(_repo);\r\n    }\r\n  });\r\n};\r\n\r\n// Prepare data to call Tables related to Repositories\r\nconst fillRepos = (objUser) => {\r\n  let keys = Object.keys(objUser.calendar).filter((str) => {\r\n    return str.match(/c[0-9]+/);\r\n  });\r\n  keys.forEach(c => {\r\n    const reposi =\r\n      objUser.calendar[c.toString()].commitContributionsByRepository;\r\n    fillPie(reposi);\r\n  });\r\n};\r\n\r\n// Fill contribs Table\r\nconst fillContribs = (contribs, type, calendarId) => {\r\n  contribs.forEach((contrib) => {\r\n    db.exec(insert.contrib, [\r\n      contrib.datetime,\r\n      contrib.repoNameWithOwner,\r\n      contrib.repoUrl,\r\n      contrib.additions,\r\n      contrib.deletions,\r\n      contrib.changedFiles,\r\n      type,\r\n      calendarId\r\n    ]);\r\n  });\r\n};\r\n\r\n// fill calendar Table\r\nconst fillCalendar = (objUser) => {\r\n  let keys = Object.keys(objUser.calendar).filter((str) => {\r\n    return str.match(/c[0-9]+/);\r\n  });\r\n\r\n  const user = db.exec(\"SELECT username FROM platform\").pop()[\"username\"];\r\n\r\n  let commits = Array.from(genContributionsByRepositories(\r\n    objUser.repoCommitHistory,\r\n    \"commit\",\r\n    user\r\n  )).flat().reduce((h, obj) => {\r\n    let date = obj.datetime.split(\"T\")[0];\r\n    return Object.assign(h, { [date]: (h[date] || []).concat(obj) });\r\n  }, {});\r\n\r\n  keys.forEach((c) => {\r\n    const year = objUser.calendar[c.toString()];\r\n\r\n    let pullRequest = Array.from(genContributionsByRepositories(\r\n      year.issueContributionsByRepository,\r\n      \"issue\",\r\n      user\r\n    )).flat().reduce((h, obj) => {\r\n      let date = obj.datetime.split(\"T\")[0];\r\n      return Object.assign(h, { [date]: (h[date] || []).concat(obj) });\r\n    }, {});\r\n\r\n    let issues = Array.from(genContributionsByRepositories(\r\n      year.pullRequestContributionsByRepository,\r\n      \"pullRequest\",\r\n      user\r\n    )).flat().reduce((h, obj) => {\r\n      let date = obj.datetime.split(\"T\")[0];\r\n      return Object.assign(h, { [date]: (h[date] || []).concat(obj) });\r\n    }, {});\r\n\r\n    let currentContributions = 0;\r\n    let octoCats = [];\r\n    for (const [w, week] of year.contributionCalendar.weeks.entries()) {\r\n      for (const [d, day] of week.contributionDays.entries()) {\r\n        const datetime = day.date;\r\n        const date = datetime.split(\"T\")[0];\r\n        const week = w;\r\n        const weekday = d;\r\n        const total = day.contributionCount;\r\n        const color = day.color;\r\n\r\n        let count = total;\r\n\r\n\r\n        if (total >= 0) {\r\n          const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n\r\n          db.exec(insert.calendar, [\r\n            date,\r\n            week,\r\n            weekday,\r\n            total,\r\n            color,\r\n            platformId\r\n          ]);\r\n          const calendarId = db.exec(\"SELECT id FROM calendar\").pop()[\"id\"];\r\n\r\n          if (commits[date]) {\r\n            fillContribs(commits[date], \"commit\", calendarId);\r\n            count -= commits[date].length;\r\n            currentContributions += commits[date].length;\r\n          }\r\n          if (issues[date]) {\r\n            fillContribs(issues[date], \"issue\", calendarId);\r\n            count -= issues[date].length;\r\n            currentContributions += issues[date].length;\r\n          }\r\n          if (pullRequest[date]) {\r\n            fillContribs(pullRequest[date], \"pullRequest\", calendarId);\r\n            count -= pullRequest[date].length;\r\n            currentContributions += pullRequest[date].length;\r\n          }\r\n\r\n          if (count >= 0) {\r\n            octoCats.push({\r\n              datetime: new Date(datetime),\r\n              total: count,\r\n              calendarId\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const addOctocat = (cat) => {\r\n      let dDay = [];\r\n        for (let index = 0; index < cat.total; index++) {\r\n          dDay.push({\r\n            datetime: cat.datetime,\r\n            repoNameWithOwner: \"octocat\",\r\n            repoUrl: \"https://github.com/octocat\",\r\n            additions: 0,\r\n            deletions: 0,\r\n            changedFiles: 0,\r\n          });\r\n          currentContributions++;\r\n        }\r\n        fillContribs(dDay, \"codeReviews\", cat.calendarId);\r\n    };\r\n\r\n    octoCats.forEach((cat) => {\r\n      if(currentContributions + cat.total < year.contributionCalendar.totalContributions){\r\n        addOctocat(cat);\r\n      }\r\n    });\r\n    let lastCat = octoCats[octoCats.length-1];\r\n    lastCat.total = year.contributionCalendar.totalContributions - currentContributions;\r\n    addOctocat(lastCat);\r\n  });\r\n};\r\n\r\n// Fill the Database from User Object\r\nexport const fillDB = (_db, objUser) => {\r\n  db = _db;\r\n  fillPlatform(objUser);\r\n  fillOrganization(objUser);\r\n  fillStats(objUser);\r\n  fillRepos(objUser);\r\n  fillCalendar(objUser);\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","import * as apollo from \"./../UtilsApollo\";\r\nimport * as gqlData from \"./GqlData\";\r\nimport * as translator from \"./Translator\";\r\n\r\n// Get profile and calendar\r\nexport async function fill(db, user) {\r\n  const getPlatform = async (db, username) => {\r\n    const apiLink = \"https://api.github.com/graphql\";\r\n    const authorization = `Bearer ${user.token}`;\r\n    const client = apollo.init(apiLink, authorization);\r\n    const resProfile = await client.query({\r\n      query: gqlData.GET_PROFILE,\r\n      variables: {\r\n        username\r\n      }\r\n    });\r\n\r\n    const { data } = resProfile;\r\n\r\n    // Debugging point\r\n    //console.log(\"PROFILE DATA\", data);\r\n    const createdAtDate = new Date(data.user.createdAt);\r\n\r\n    const resCalendar = await client.query({\r\n      query: gqlData.getCalendar(username, createdAtDate)\r\n    });\r\n\r\n    // Debugging point\r\n    //console.log(resCalendar.data.user);\r\n\r\n    let allReposWithHistory = {};\r\n    let reposPerName = {};\r\n    Object.values(resCalendar.data.user).forEach((c) => {\r\n      if(c !== \"User\"){\r\n        c.commitContributionsByRepository.forEach((repo) => {\r\n          if(repo.repository.defaultBranchRef.target.history.totalCount >= 100){\r\n            reposPerName[repo.repository.nameWithOwner] = repo;\r\n            \r\n          }\r\n          allReposWithHistory[repo.repository.nameWithOwner] = repo;\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n    // Debugging point\r\n    //console.log(\"allReposHistory\",allReposWithHistory)\r\n\r\n    gqlData.generateRepositoryHistoryQuery(Object.values(reposPerName)).forEach(async (q) => {\r\n      const resRepoHistory = await client.query({\r\n        query: q\r\n      });\r\n      Object.values(resRepoHistory.data).forEach((repo) => {\r\n        let l1 = allReposWithHistory[repo.nameWithOwner].repository.defaultBranchRef.target.history.nodes;\r\n        let l2 = repo.defaultBranchRef.target.history.nodes;\r\n        allReposWithHistory[repo.nameWithOwner].repository.defaultBranchRef.target.history.nodes = l1.concat(l2);\r\n      });\r\n    });\r\n    \r\n    const objUser = {};\r\n    objUser.profile = resProfile.data.user;\r\n    objUser.calendar = resCalendar.data.user;\r\n    objUser.repoCommitHistory = Object.values(allReposWithHistory);\r\n\r\n    translator.fillDB(db, objUser);\r\n\r\n  };\r\n  await getPlatform(db, user[\"username\"]);\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","import { Database } from \"../Database\";\r\nimport * as gitlab from \"../utils/UtilsGitlab\";\r\nimport * as github from \"../utils/UtilsGithub\";\r\n\r\nlet db = new Database(\"data\");\r\n\r\nexport const exec = (statement, values) => {\r\n  return db.exec(statement, values);\r\n};\r\n\r\nexport async function fill(user) {\r\n  if (user.source === \"github\") {\r\n    await github.fill(db, user);\r\n  } else if (user.source === \"gitlab\") {\r\n    await gitlab.fill(db, user);\r\n  }\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","export const platform = `\r\nSELECT * FROM platform\r\n`;\r\n\r\nexport const organization = `\r\nSELECT\r\n  member.id as mId,\r\n  member.avatarUrl as mAvatarUrl,\r\n  member.name as mName,\r\n  member.username as mUsername,\r\n  member.url as mUrl,\r\n  organization.id as oId,\r\n  organization.avatarUrl as oAvatarUrl,\r\n  organization.name as oName,\r\n  organization.url as oUrl\r\nFROM\r\n  organization\r\nLEFT OUTER JOIN\r\n  organization_has_member\r\n    ON organization.id = organization_has_member.organization_id\r\nLEFT OUTER JOIN\r\n  member\r\n    ON member.id = organization_has_member.member_id\r\n`;\r\n\r\nexport const repository = `\r\nSELECT\r\n  repository.id as rId,\r\n  repository.avatarUrl as rAvatarUrl,\r\n  repository.name as rName,\r\n  repository.languagePie_id as rLanguagePieId,\r\n  owner.avatarUrl as oAvatarUrl,\r\n  owner.name as oName,\r\n  owner.username as oUsername,\r\n  owner.url as oUrl,\r\n  member.id as mId,\r\n  member.avatarUrl as mAvatarUrl,\r\n  member.name as mName,\r\n  member.username as mUsername,\r\n  member.url as mUrl,\r\n  languagePie.id as lId,\r\n  languagePie.size as lSize,\r\n  languagePie.total as lTotal,\r\n  languageSlice.id as sId,\r\n  languageSlice.color as sColor,\r\n  languageSlice.name as sName,\r\n  languageSlice.size as sSize,\r\n  languageSlice.pie_id as sPieId\r\nFROM\r\n  repository\r\nLEFT OUTER JOIN \r\n  member as owner\r\n    ON owner.id = repository.owner_id\r\nLEFT OUTER JOIN\r\n    languagePie\r\n      ON languagePie.id = repository.languagePie_id\r\nLEFT OUTER JOIN \r\n  languageSlice\r\n      ON languageSlice.pie_id = languagePie.id\r\nLEFT OUTER JOIN\r\n  repository_has_member\r\n    ON repository.id = repository_has_member.repository_id\r\nLEFT OUTER JOIN\r\n  member\r\n    ON member.id = repository_has_member.member_id\r\n`;\r\n\r\nexport const language = `\r\nSELECT\r\n  languageSlice.id as sId,\r\n  languageSlice.color as sColor,\r\n  languageSlice.name as sName,\r\n  languageSlice.size as sSize,\r\n  languageSlice.pie_id as sPieId\r\nFROM\r\n  languageSlice\r\n`;\r\n\r\nexport const totalLanguageSize = `\r\nSELECT\r\n  sum(languageSlice.size) as num\r\nFROM\r\n  languageSlice\r\n`;\r\n\r\nexport const calendar = `\r\nSELECT\r\n  calendar.id as cId,\r\n  calendar.date as cDate,\r\n  YEAR(contrib.datetime) as cYear,\r\n  calendar.week as cWeek,\r\n  calendar.weekday as cWeekday,\r\n  calendar.color as cColor,\r\n  contrib.id as ctId,\r\n  contrib.datetime as ctDatetime,\r\n  contrib.nameWithOwner as ctNameWithOwner,\r\n  contrib.repoUrl as ctRepoUrl,\r\n  contrib.additions as ctAdditions,\r\n  contrib.deletions as ctDeletions,\r\n  contrib.changedFiles as ctChangedFiles,\r\n  contrib.type as ctType\r\nFROM\r\n  calendar\r\nJOIN\r\n  contrib\r\n    ON calendar.id = contrib.calendar_id\r\n`;\r\n\r\nexport const totalContributions = `\r\nSELECT\r\n  YEAR(contrib.datetime) as year,\r\n  count(contrib.id) as num\r\nFROM\r\n  contrib\r\nGROUP BY\r\n  YEAR(contrib.datetime)\r\n`;\r\n\r\nexport const baseYearOfPlatforms = `\r\nSELECT \r\n  MIN(YEAR(date)) as baseYear\r\nFROM\r\n  calendar\r\n`;\r\n\r\nexport const statistic = `\r\nSELECT\r\n  statistic.id as sId,\r\n  statistic.year as sYear,\r\n  streak.id as stId,\r\n  streak.startDate as stsDate,\r\n  streak.endDate as steDate,\r\n  streak.total as stTotal,\r\n  streak.statistic_id as stsId\r\nFROM\r\n  statistic\r\nLEFT JOIN\r\n  streak\r\n    ON statistic.id = streak.statistic_id\r\n`;\r\n\r\nexport const contribPerPlatform = `\r\nSELECT\r\n  contrib.id as cId,\r\n  contrib.datetime as cDatetime,\r\n  contrib.nameWithOwner as cNameWithOwner,\r\n  contrib.repoUrl as ctRepoUrl,\r\n  contrib.additions as cAdditions,\r\n  contrib.deletions as cDeletions,\r\n  contrib.changedFiles as cChangedFiles,\r\n  contrib.type as cType,\r\n  platform.id as pId,\r\n  platform.platformName as pName\r\nFROM\r\n  contrib\r\nJOIN\r\n  calendar\r\n    ON contrib.calendar_id = calendar.id\r\nJOIN\r\n  platform\r\n    ON calendar.platform_id = platform.id\r\n`;\r\n\r\nexport const busiestDay = `\r\nSELECT\r\n  date,\r\n  total,\r\n  YEAR(date) as year\r\nFROM\r\n  calendar\r\nWHERE\r\n  total in (\r\n    SELECT\r\n      max(c2.total) as total,\r\n      YEAR(date)\r\n    FROM calendar c2\r\n    GROUP BY YEAR(date)\r\n  )\r\n`;\r\n","import * as select from \"../Statements/Select\";\r\n\r\nfunction getWeekNumber(d) {\r\n  // Copy date so don't modify original\r\n  d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\r\n  // Set to nearest Thursday: current date + 4 - current day number\r\n  // Make Sunday's day number 7\r\n  d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\r\n  // Get first day of year\r\n  var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n  // Calculate full weeks to nearest Thursday\r\n  var weekNo = Math.ceil(((d - yearStart) / 86400000 + 1) / 7);\r\n  // Return array of year and week number\r\n  return [d.getUTCFullYear(), weekNo];\r\n}\r\n\r\n// Formats a date to YYYY-MM-DD format\r\nconst formatDate = (date) => {\r\n  return date.toISOString().split(\"T\")[0];\r\n};\r\n\r\nexport function getUser(data) {\r\n  let platforms = data.exec(select.platform);\r\n\r\n  // Use information of platform 0 as basic information\r\n  let platform = platforms[0];\r\n  let user = {};\r\n  user.avatarUrl = platform.avatarUrl;\r\n  user.company = platform.company;\r\n  user.createdAt = platform.createdAt;\r\n  user.name = platform.fullName;\r\n  user.username = platform.username;\r\n  user.email = platform.email;\r\n  user.websiteUrl = platform.websiteUrl;\r\n  user.status = platform.status;\r\n  user.statusEmojiHTML = platform.statusEmojiHTML;\r\n  user.isEmployee = false;\r\n  user.isHireable = false;\r\n  user.location = platform.location;\r\n\r\n  return user;\r\n}\r\n\r\nexport function getOrganizations(data) {\r\n  let organizations = data.exec(select.organization);\r\n\r\n  let orgs = {};\r\n  organizations.forEach((orgWithMember) => {\r\n    if (!orgs[orgWithMember.oId]) {\r\n      let org = {};\r\n      org.name = orgWithMember.oName;\r\n      org.url = orgWithMember.oUrl;\r\n      org.avatarUrl = orgWithMember.oAvatarUrl;\r\n      org.memberCount = 0;\r\n      org.members = [];\r\n      orgs[orgWithMember.oId] = org;\r\n    }\r\n\r\n    if (orgWithMember.mId !== undefined) {\r\n      let member = {};\r\n      member.oid = orgWithMember.oId;\r\n      member.name = orgWithMember.mName;\r\n      member.login = orgWithMember.mUsername;\r\n      member.avatarUrl = orgWithMember.mAvatarUrl;\r\n      member.url = orgWithMember.mUrl;\r\n      member.projectsUrl = null;\r\n\r\n      orgs[orgWithMember.oId].memberCount++;\r\n      orgs[orgWithMember.oId].members.push(member);\r\n    }\r\n  });\r\n  return Object.values(orgs);\r\n}\r\n\r\nexport function getRepositories(data) {\r\n  let repositories = data.exec(select.repository);\r\n\r\n  let repos = {};\r\n  repositories.forEach((repoWithExtras) => {\r\n    if (!repos[repoWithExtras.rId]) {\r\n      let repo = {};\r\n      repo.name = repoWithExtras.rName;\r\n      repo.avatarUrl = repoWithExtras.oAvatarUrl;\r\n\r\n      repo.owner = {};\r\n      repo.owner.name = repoWithExtras.oName;\r\n      repo.owner.login = repoWithExtras.oUsername;\r\n      repo.owner.url = repoWithExtras.oUrl;\r\n\r\n      repo.languagePie = {};\r\n      repo.languagePie.size = repoWithExtras.lSize;\r\n      repo.languagePie.total = repoWithExtras.lTotal;\r\n      repo.languagePie.slices = [];\r\n\r\n      repo.members = [];\r\n      repo.memberCount = 0;\r\n\r\n      repos[repoWithExtras.rId] = repo;\r\n    }\r\n\r\n    if (repoWithExtras.mId !== undefined) {\r\n      let member = {};\r\n      member.name = repoWithExtras.mName;\r\n      member.login = repoWithExtras.mUsername;\r\n      member.avatarUrl = repoWithExtras.mAvatarUrl;\r\n      member.url = repoWithExtras.mUrl;\r\n      member.projectsUrl = null;\r\n\r\n      repos[repoWithExtras.rId].memberCount++;\r\n      repos[repoWithExtras.rId].members.push(member);\r\n    }\r\n\r\n    if (repoWithExtras.sId !== undefined) {\r\n      let slice = {};\r\n      slice.name = repoWithExtras.sName;\r\n      slice.color = repoWithExtras.sColor;\r\n      slice.size = repoWithExtras.sSize;\r\n\r\n      repos[repoWithExtras.rId].languagePie.slices.push(slice);\r\n    }\r\n  });\r\n\r\n  return Object.values(repos);\r\n}\r\n\r\nexport function getLanguages(data) {\r\n  let languages = data.exec(select.language);\r\n  let totalSize = data.exec(select.totalLanguageSize)[0].num;\r\n  let pie = {};\r\n  pie.slices = {};\r\n  pie.total = totalSize;\r\n\r\n  languages.forEach((languageSlice) => {\r\n    if (!pie.slices[languageSlice.sName]) {\r\n      let slice = {};\r\n      slice.name = languageSlice.sName;\r\n      slice.color = languageSlice.sColor;\r\n      slice.size = languageSlice.sSize;\r\n      slice.share = Math.round((slice.size / totalSize) * 100 * 100) / 100;\r\n\r\n      pie.slices[languageSlice.sName] = slice;\r\n    } else {\r\n      pie.slices[languageSlice.sName].size += languageSlice.sSize;\r\n      pie.slices[languageSlice.sName].share =\r\n        Math.round(\r\n          (pie.slices[languageSlice.sName].size / totalSize) * 100 * 100\r\n        ) / 100;\r\n    }\r\n  });\r\n  return pie;\r\n}\r\n\r\nexport function getCalendar(data) {\r\n  let calendar = data.exec(select.calendar);\r\n  let baseYear = data.exec(select.baseYearOfPlatforms)[0].baseYear;\r\n\r\n  let calendarGrid = {};\r\n  let today = new Date();\r\n  if(!baseYear){\r\n    baseYear = today.getFullYear();\r\n  }\r\n \r\n  for (let indexY = baseYear; indexY <= new Date().getFullYear(); indexY++) {\r\n    calendarGrid[indexY] = generateCalendarGrid(new Date(indexY, 0, 1), true);\r\n  }\r\n  \r\n  today.setDate(today.getDate() + 1);\r\n\r\n  calendar.forEach((day) => {\r\n    if (day.cYear) {\r\n      calendarGrid[day.cYear].total++;\r\n      calendarGrid[day.cYear].weeks[day.cWeek].contributionDays[day.cWeekday]\r\n        .total++;\r\n      calendarGrid[day.cYear].weeks[day.cWeek].contributionDays[\r\n        day.cWeekday\r\n      ].color = day.cColor;\r\n    }\r\n  });\r\n\r\n  let nowYear = dictCalendarToArray(calendarGrid)[today.getFullYear()];\r\n  let lastYear = dictCalendarToArray(calendarGrid)[today.getFullYear() - 1];\r\n\r\n  let nowDate = new Date();\r\n  let contributionDays = [];\r\n  nowYear.weeks.reverse().forEach((week) => {\r\n    week.contributionDays.reverse().forEach((day) => {\r\n      if (new Date(day.date) < nowDate) {\r\n        contributionDays.push(day);\r\n      }\r\n    });\r\n  });\r\n\r\n  if (lastYear !== undefined) {\r\n    lastYear.weeks.reverse().forEach((week) => {\r\n      week.contributionDays.reverse().forEach((day) => {\r\n        if (contributionDays.length < 53 * 7) {\r\n          contributionDays.push(day);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  let fullDays = expandDaysToFullYear(contributionDays);\r\n  let currentCalendar = getCalendarFromDates(fullDays);\r\n\r\n  for (let [k, v] of Object.entries(dictCalendarToArray(calendarGrid))) {\r\n    calendarGrid[k] = calculateColorsForCalendarDay(v);\r\n  }\r\n\r\n  return {\r\n    years: calendarGrid,\r\n    currentYear: calculateColorsForCalendarDay(currentCalendar)\r\n  };\r\n}\r\n\r\nconst expandDaysToFullYear = (days) => {\r\n  // Add missing days to get all calendar days\r\n  let fullDays = [];\r\n  let startDay = days[days.length - 1];\r\n  let firstDate = new Date(startDay.date);\r\n  let breakDate = new Date(startDay.date);\r\n  firstDate.setDate(firstDate.getDate() - (365 - days.length));\r\n\r\n  // Reverse days\r\n  days = days.reverse();\r\n\r\n  for (let index = 0; index < 365; index++) {\r\n    let day = {\r\n      total: 0,\r\n      date: \"\",\r\n      color: \"#ffffff\"\r\n    };\r\n\r\n    if (firstDate < breakDate) {\r\n      day.date = formatDate(firstDate);\r\n      fullDays.push(day);\r\n      firstDate.setDate(firstDate.getDate() + 1);\r\n    } else {\r\n      fullDays.push(days[index - (365 - days.length)]);\r\n    }\r\n  }\r\n\r\n  return fullDays;\r\n};\r\n\r\nconst getCalendarFromDates = (fullDays) => {\r\n  let year = {};\r\n  let count = 0;\r\n  year.weeks = [];\r\n  year.total = 0;\r\n  year.fromDate = new Date(fullDays[0].date);\r\n  year.toDate = new Date(fullDays[fullDays.length - 1].date);\r\n\r\n  for (let indexW = 0; indexW < 53; indexW++) {\r\n    let week = {};\r\n    week.contributionDays = [];\r\n    for (let indexD = 0; indexD <= 6; indexD++) {\r\n      if (fullDays[count] !== undefined) {\r\n        year.total += fullDays[count].total;\r\n        week.contributionDays.push(fullDays[count]);\r\n      }\r\n      count++;\r\n    }\r\n    year.weeks.push(week);\r\n  }\r\n  return year;\r\n};\r\n\r\nconst generateCalendarGrid = (date, flag) => {\r\n  let emptyContributionYear = {};\r\n  emptyContributionYear.weeks = {};\r\n  emptyContributionYear.total = 0;\r\n\r\n  for (let indexW = 0; indexW < 53; indexW++) {\r\n    let week = {};\r\n    week.contributionDays = {};\r\n\r\n    for (let indexD = 0; indexD <= 6; indexD++) {\r\n      let day = {};\r\n      if (flag) {\r\n        date.setDate(date.getDate() + 1);\r\n      } else {\r\n        date.setDate(date.getDate() - 1);\r\n      }\r\n      day.total = 0;\r\n      day.date = formatDate(new Date(date));\r\n      day.color = \"#ffffff\";\r\n      week.contributionDays[indexD] = day;\r\n    }\r\n\r\n    emptyContributionYear.weeks[indexW] = week;\r\n  }\r\n  return emptyContributionYear;\r\n};\r\n\r\n// Fill the raw calendar structure with the correct colors\r\nconst calculateColorsForCalendarDay = (calendarYear) => {\r\n  let busiestDay = 0;\r\n  // Calculate busiest day of the year\r\n  calendarYear.weeks.forEach((_week) => {\r\n    _week.contributionDays.forEach((_day) => {\r\n      if (_day.total > busiestDay) {\r\n        busiestDay = _day.total;\r\n      }\r\n    });\r\n  });\r\n\r\n  calendarYear.weeks.forEach((_week) => {\r\n    _week.contributionDays.forEach((_day) => {\r\n      let precision = _day.total / busiestDay;\r\n      if (precision > 0.8 && precision <= 1) {\r\n        _day.color = \"#196127\";\r\n      } else if (precision > 0.6 && precision <= 0.8) {\r\n        _day.color = \"#239a3b\";\r\n      } else if (precision > 0.4 && precision <= 0.6) {\r\n        _day.color = \"#7bc96f\";\r\n      } else if (precision > 0.0 && precision <= 0.4) {\r\n        _day.color = \"#c6e48b\";\r\n      } else if (precision === 0) {\r\n        _day.color = \"#ebedf0\";\r\n      }\r\n    });\r\n  });\r\n\r\n  return calendarYear;\r\n};\r\n\r\nfunction dictCalendarToArray(dict) {\r\n  let obj = JSON.parse(JSON.stringify(dict));\r\n  for (let year in dict) {\r\n    for (let week in dict[year].weeks) {\r\n      obj[year].weeks[week].contributionDays = [];\r\n      for (let day in dict[year].weeks[week].contributionDays) {\r\n        obj[year].weeks[week].contributionDays.push(\r\n          dict[year].weeks[week].contributionDays[day]\r\n        );\r\n      }\r\n    }\r\n    obj[year].weeks = Object.values(obj[year].weeks);\r\n  }\r\n  return obj;\r\n}\r\n\r\nexport function getStats(data) {\r\n  let stats = data.exec(select.statistic);\r\n  let totalContributionsPerYear = {};\r\n  let bDays = {};\r\n\r\n  data.exec(select.totalContributions).forEach((elem) => {\r\n    totalContributionsPerYear[elem.year] = elem.num;\r\n  });\r\n  \r\n  data.exec(select.busiestDay).forEach((elem) => {\r\n    let busiestDay = {};\r\n    busiestDay.date = elem.date;\r\n    busiestDay.total = elem.total;\r\n\r\n    bDays[elem.year] = busiestDay;\r\n  });\r\n\r\n  let statistics = {};\r\n\r\n  stats.forEach((stat) => {\r\n    if (!statistics[stat.sYear]) {\r\n      let busiestDay = {};\r\n      busiestDay.date = bDays[stat.sYear].date;\r\n      busiestDay.total = bDays[stat.sYear].total;\r\n      let statistic = {};\r\n      statistic.streaks = [];\r\n      statistic.busiestDay = busiestDay;\r\n      statistic.average =\r\n        Math.round((totalContributionsPerYear[stat.sYear] / 365) * 100) / 100;\r\n      statistic.longestStreak = {};\r\n      statistic.longestStreak.total = 0;\r\n      statistic.currentStreak = {};\r\n      statistic.currentStreak.total = 0;\r\n\r\n      statistics[stat.sYear] = statistic;\r\n    }\r\n\r\n    if(stat.stId !== undefined){\r\n      let streak = {};\r\n    streak.startDate = stat.stsDate;\r\n    streak.endDate = stat.steDate;\r\n    streak.total = stat.stTotal;\r\n    statistics[stat.sYear].streaks.push(streak);\r\n\r\n    // To calculate the no. of days between two dates\r\n    const dateDiff = (date1, date2) =>\r\n      Math.ceil((date2.getTime() - date1.getTime()) / (1000 * 3600 * 24));\r\n\r\n    let streakDiff = dateDiff(streak.startDate, streak.endDate);\r\n    if (statistics[stat.sYear].longestStreak.total <= streakDiff) {\r\n      statistics[stat.sYear].longestStreak.total = streakDiff;\r\n      statistics[stat.sYear].longestStreak.startDate = streak.startDate;\r\n      statistics[stat.sYear].longestStreak.endDate = streak.endDate;\r\n    }\r\n\r\n    let today = new Date();\r\n\r\n    if (\r\n      streak.endDate.getFullYear() === today.getFullYear() &&\r\n      streak.endDate.getMonth() === today.getMonth() &&\r\n      streak.endDate.getDate() === today.getDate()\r\n    ) {\r\n      statistics[stat.sYear].currentStreak.startDate = streak.startDate;\r\n      statistics[stat.sYear].currentStreak.endDate = streak.endDate;\r\n      statistics[stat.sYear].currentStreak.total = dateDiff(\r\n        streak.startDate,\r\n        streak.endDate\r\n      );\r\n    }\r\n    }\r\n\r\n    \r\n  });\r\n\r\n  return statistics;\r\n}\r\n\r\nexport function getContribTypes(data) {\r\n  let contribPerPlatforms = data.exec(select.contribPerPlatform);\r\n\r\n  let contribTypes = {};\r\n  contribTypes.platform = {};\r\n  contribTypes.user = {};\r\n  contribTypes.contribs = {};\r\n\r\n  contribPerPlatforms.forEach((contribPerPlatform) => {\r\n    if (!contribTypes.platform[contribPerPlatform.pName]) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n\r\n      contribTypes.platform[contribPerPlatform.pName] = platform;\r\n    }\r\n\r\n    contribTypes.platform[contribPerPlatform.pName].count++;\r\n    contribTypes.platform[contribPerPlatform.pName].share =\r\n      Math.round(\r\n        (contribTypes.platform[contribPerPlatform.pName].count /\r\n          contribPerPlatforms.length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (!contribTypes.user[contribPerPlatform.pId]) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n      platform.name = contribPerPlatform.pName;\r\n\r\n      contribTypes.user[contribPerPlatform.pId] = platform;\r\n    }\r\n\r\n    contribTypes.user[contribPerPlatform.pId].count++;\r\n    contribTypes.user[contribPerPlatform.pId].share =\r\n      Math.round(\r\n        (contribTypes.user[contribPerPlatform.pId].count /\r\n          contribPerPlatforms.length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (!contribTypes.contribs[contribPerPlatform.cType]) {\r\n      let type = {};\r\n      type.share = 0;\r\n      type.count = 0;\r\n      type.platform = {};\r\n      type.user = {};\r\n\r\n      contribTypes.contribs[contribPerPlatform.cType] = type;\r\n    }\r\n\r\n    contribTypes.contribs[contribPerPlatform.cType].count++;\r\n    contribTypes.contribs[contribPerPlatform.cType].share =\r\n      Math.round(\r\n        (contribTypes.contribs[contribPerPlatform.cType].count /\r\n          contribPerPlatforms.length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (\r\n      !contribTypes.contribs[contribPerPlatform.cType].platform[\r\n        contribPerPlatform.pName\r\n      ]\r\n    ) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n\r\n      contribTypes.contribs[contribPerPlatform.cType].platform[\r\n        contribPerPlatform.pName\r\n      ] = platform;\r\n    }\r\n\r\n    contribTypes.contribs[contribPerPlatform.cType].platform[\r\n      contribPerPlatform.pName\r\n    ].count++;\r\n    contribTypes.contribs[contribPerPlatform.cType].platform[\r\n      contribPerPlatform.pName\r\n    ].share =\r\n      Math.round(\r\n        (contribTypes.contribs[contribPerPlatform.cType].platform[\r\n          contribPerPlatform.pName\r\n        ].count /\r\n          contribPerPlatforms.filter((elem) => {\r\n            return elem.cType === contribPerPlatform.cType;\r\n          }).length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (\r\n      !contribTypes.contribs[contribPerPlatform.cType].user[\r\n        contribPerPlatform.pId\r\n      ]\r\n    ) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n      platform.name = contribPerPlatform.pName;\r\n\r\n      contribTypes.contribs[contribPerPlatform.cType].user[\r\n        contribPerPlatform.pId\r\n      ] = platform;\r\n    }\r\n\r\n    contribTypes.contribs[contribPerPlatform.cType].user[contribPerPlatform.pId]\r\n      .count++;\r\n    contribTypes.contribs[contribPerPlatform.cType].user[\r\n      contribPerPlatform.pId\r\n    ].share =\r\n      Math.round(\r\n        (contribTypes.contribs[contribPerPlatform.cType].user[\r\n          contribPerPlatform.pId\r\n        ].count /\r\n          contribPerPlatforms.filter((elem) => {\r\n            return elem.cType === contribPerPlatform.cType;\r\n          }).length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n  });\r\n\r\n  return contribTypes;\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","import * as data from \"./IntelData\";\r\n//import * as data from \"./IntelDummy\";\r\n\r\nimport * as converter from \"./Database/Converter\";\r\n\r\nexport async function fill(userList) {\r\n  try{\r\n    for (let index = 0; index < userList.length; index++) {\r\n      const user = userList[index]\r\n      await data.fill(user)\r\n    }\r\n  }\r\n  catch{\r\n    console.error(\"Data fetching failed.. Please contact our support!\", user)\r\n  }\r\n}\r\n\r\nexport function templateSelect() {\r\n  return data.exec(\"SELECT * FROM statistic\");\r\n}\r\n\r\nexport function user() {\r\n  return converter.getUser(data);\r\n}\r\n\r\nexport function repos() {\r\n  return converter.getRepositories(data);\r\n}\r\n\r\nexport function orgs() {\r\n  return converter.getOrganizations(data);\r\n}\r\n\r\nexport function languages() {\r\n  return converter.getLanguages(data);\r\n}\r\n\r\nexport function calendar() {\r\n  return converter.getCalendar(data);\r\n}\r\n\r\nexport function stats() {\r\n  return converter.getStats(data);\r\n}\r\n\r\nexport function contribTypes() {\r\n  return converter.getContribTypes(data);\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\n//> Components\r\n/**\r\n * Footer: Global Footer\r\n * Navbar: Global navigation bar\r\n */\r\nimport { Navbar } from \"./components/molecules\";\r\n\r\n//> Routes\r\nimport Routes from \"./Routes\";\r\n\r\n//> Apollo\r\nimport { graphql, withApollo } from \"react-apollo\";\r\nimport * as compose from \"lodash.flowright\";\r\nimport { gql } from \"apollo-boost\";\r\n\r\n//> Intel\r\nimport * as intel from \"./intel\";\r\nimport { async } from \"q\";\r\n\r\n//> Queries / Mutations\r\n// Verify the token\r\nconst VERIFY_TOKEN = gql`\r\n  mutation verify($token: String!) {\r\n      verifyToken(token: $token) {\r\n      payload\r\n      }\r\n  }\r\n`;\r\n// Login real user\r\nconst LOGIN_REAL_USER = gql`\r\n  query login($token: String!){\r\n  user: me(token: $token){\r\n      username\r\n      registrationData\r\n    }\r\n  }\r\n`;\r\n// Refresh the token\r\nconst REFRESH_TOKEN = gql`\r\n  mutation refresh($token: String!) {\r\n    refreshToken(token: $token) {\r\n      payload\r\n      token\r\n    }\r\n  }\r\n`;\r\n// Login anonymous user\r\nconst LOGIN_USER = gql`\r\n    mutation tokenAuth{\r\n        tokenAuth(username:\"cisco\",password:\"ciscocisco\"){\r\n            token\r\n        }\r\n    }\r\n`;\r\n\r\nclass App extends React.Component {\r\n  // Init state\r\n  state = {\r\n    contrib: null,\r\n    contribCalendar: null,\r\n    contribTypes: null,\r\n    user: null,\r\n    languages: null,\r\n    repos: null,\r\n    token: \"\",\r\n    loaded: false,\r\n    logged: false,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    // Fill with data\r\n    this.setState({\r\n      contrib: null,\r\n      contribCalendar: null,\r\n      contribTypes: null,\r\n      user: null,\r\n      languages: null,\r\n      repos: null,\r\n      pageLogin: false,\r\n    });\r\n\r\n    if(localStorage.getItem(\"fprint\") !== null){\r\n      try {\r\n        // Verify Token on first load\r\n        this._verifyToken();\r\n        // Refresh token every 4 minutes\r\n        setInterval(async () => {\r\n          this._verifyToken();\r\n        }, 240000);\r\n      } catch(e) {\r\n        //console.log(e);\r\n      }\r\n    } else {\r\n      this._loginUser();\r\n    }\r\n  };\r\n\r\n  _verifyToken = () => {\r\n    this.props.verify({\r\n      variables: { \"token\": localStorage.getItem(\"fprint\") }\r\n    })\r\n    .then(({data}) => {\r\n        if(data !== undefined){\r\n          if(data.verifyToken !== null){\r\n            this._isLogged(\r\n              data.verifyToken.payload.exp,\r\n              data.verifyToken.payload.origIat,\r\n              localStorage.getItem(\"fprint\")\r\n            );\r\n          } else {\r\n            //console.warn(\"No token in payload.\");\r\n          }\r\n        } else {\r\n          //console.warn(\"No token in payload.\");\r\n        }\r\n    })\r\n    .catch((error) => {\r\n      //console.warn(\"Mutation error:\",error);\r\n    });\r\n  }\r\n\r\n  _loginUser = () => {\r\n    this.props.login()\r\n    .then(({data}) => {\r\n      if(data !== undefined){\r\n        this._setLogged(data.tokenAuth.token);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      //console.error(\"Mutation error:\",error);\r\n    });\r\n  }\r\n\r\n  _setLogged = (token) => {\r\n    this.setState({\r\n      token,\r\n      loaded: true,\r\n    }, () => localStorage.setItem(\"fprint\", token));\r\n  }\r\n\r\n  _isLogged = (exp, orig, token) => {\r\n    /**\r\n     * Generate current timestamp\r\n     * Ref: https://flaviocopes.com/how-to-get-timestamp-javascript/\r\n     */\r\n    let currentTS = ~~(Date.now() / 1000);\r\n    // Check if the token is still valid\r\n    if(currentTS > exp){\r\n      // Token has expired\r\n      this._refeshToken(token);\r\n    } else {\r\n      // Only if anything has changed, update the data\r\n      this._setLogged(token);\r\n    }\r\n  }\r\n\r\n  _refeshToken = (token) => {\r\n    this.props.refresh({\r\n      variables: { token }\r\n    })\r\n    .then(({data}) => {\r\n      if(data !== undefined){\r\n        localStorage.setItem(\"fprint\", data.refreshToken.token);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      //console.warn(\"Mutation error:\",error);\r\n    });\r\n  }\r\n\r\n  handleChangeState = (key, value) => {\r\n    this.setState({\r\n      [key]: value\r\n    });\r\n  }\r\n\r\n  handleLogin = async (token) => {\r\n    this.props.client.query({\r\n      query: LOGIN_REAL_USER,\r\n      variables: { \"token\": localStorage.getItem(\"fprint\") }\r\n    }).then(async ({data}) => {\r\n      if(data){\r\n        console.log(data);\r\n        let registrationData = JSON.parse(data.user.registrationData);\r\n\r\n        // Temp replace (Ugly)\r\n        let sourceTemp = registrationData.sources.replace(/'/g,'\"').replace(/\\\\/g,'');\r\n        let sourceData = JSON.parse(sourceTemp);\r\n        console.log(sourceData);\r\n        intel.fill(Object.values(sourceData))\r\n        .then(() =>{\r\n          console.log(intel.calendar())\r\n          console.log(intel.stats())\r\n          console.log(intel.repos())\r\n        })\r\n        .then(() => {\r\n          //console.log(intel.user());\r\n          this.setState({\r\n            logged: true,\r\n            contrib: intel.stats(),\r\n            contribCalendar: intel.calendar(),\r\n            contribTypes: intel.contribTypes(),\r\n            user: intel.user(),\r\n            orgs: intel.orgs(),\r\n            languages: intel.languages(),\r\n            repos: intel.repos(),\r\n          });\r\n        });\r\n        /*this.setState({\r\n          logged: true,\r\n          userdata: {\r\n            username: data.user.username,\r\n            registrationData: registrationData,\r\n          }\r\n        });*/\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.warn(error.message);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // Debugging\r\n    console.log(this.state);\r\n\r\n    return (\r\n      <Router>\r\n        <div className=\"flyout\">\r\n          <Navbar \r\n          changeState={this.handleChangeState}\r\n          data={this.state}\r\n          />\r\n          <main>\r\n            <Routes \r\n            data={this.state}\r\n            changeState={this.handleChangeState}\r\n            login={this.handleLogin}\r\n            />\r\n          </main>\r\n          {/*\r\n          <Footer />\r\n          */}\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  graphql(VERIFY_TOKEN, { name: \"verify\" }),\r\n  graphql(REFRESH_TOKEN, { name: \"refresh\" }),\r\n  graphql(LOGIN_USER, { name: \"login\" }),\r\n)(withApollo(App));\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              //console.log(\"New content is available; please refresh.\");\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              //console.log(\"Content is cached for offline use.\");\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      //console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      //console.log(\"No internet connection found. App is running in offline mode.\");\r\n    });\r\n}\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// This serves as an entry point to the DOM and server renderers for React\r\nimport ReactDOM from \"react-dom\";\r\n\r\n//> Font Awesome\r\n// Font Awesome is an awesome icon library\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\n\r\n//> Bootstrap\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\n\r\n//> Typist css\r\nimport \"react-typist/dist/Typist.css\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport \"mdbreact/dist/css/mdb.css\";\r\n\r\n//> CSS\r\n// Root SCSS file\r\nimport \"./index.scss\";\r\n\r\n//> Apollo\r\nimport { ApolloClient } from \"apollo-client\";\r\nimport { createHttpLink } from \"apollo-link-http\";\r\nimport { setContext } from \"apollo-link-context\";\r\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\r\nimport { ApolloProvider } from \"react-apollo\";\r\n\r\n//> Components\r\n// Root component\r\nimport App from \"./App\";\r\n\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\n\r\n// API Link\r\nconst httpLink = createHttpLink({\r\n  uri: \"https://api.snek.at\"\r\n});\r\n\r\n// Apollo Client\r\nconst client = new ApolloClient({\r\n  link: httpLink,\r\n  cache: new InMemoryCache()\r\n});\r\n\r\n// Render the root component to <div id=\"root\"></div>\r\nReactDOM.render(\r\n  <ApolloProvider client={client}>\r\n    <App />\r\n  </ApolloProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\nregisterServiceWorker();\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright  2019 Werbeagentur Christian Aichner\r\n */\r\n"],"sourceRoot":""}