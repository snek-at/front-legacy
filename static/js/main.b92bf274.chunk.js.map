{"version":3,"sources":["components/molecules/TabContainer/index.jsx","components/molecules/Avatar/index.jsx","components/molecules/Socialdata/index.jsx","components/helpers/changeHue.js","components/molecules/Calendar2D/index.jsx","components/molecules/Calendar3D/index.jsx","components/molecules/LanguageChart/index.jsx","components/molecules/Navbar/index.jsx","components/molecules/Footer/index.jsx","components/molecules/TextTypist/index.jsx","components/molecules/SearchBar/index.jsx","components/pages/Redirect/index.jsx","components/molecules/ContribChart/index.jsx","components/pages/Settings/index.jsx","components/organisms/tabs/Projects/index.jsx","components/organisms/tabs/Resume/index.jsx","components/organisms/tabs/Overview/index.jsx","components/organisms/tabs/Education/index.jsx","components/pages/Profile/index.jsx","intel/Database/index.js","intel/Database/Statements/Create/index.js","intel/Database/Statements/Insert/index.js","intel/utils/UtilsGitlab/index.js","intel/utils/UtilsWebscrap/index.js","intel/utils/UtilsApollo/index.js","intel/Database/Statements/Update/index.js","intel/utils/UtilsGithub/GqlData/index.js","intel/utils/UtilsGithub/Translator/index.js","intel/utils/UtilsGithub/index.js","intel/IntelData/index.js","intel/Database/Statements/Select/index.js","intel/Database/Converter/index.js","intel/index.js","intel/OAuthGithub/providers/github.ts","intel/OAuthGithub/services/utilities.js","intel/AuthGitLab/providers/gitlab.ts","components/organisms/sections/Register/index.jsx","components/organisms/sections/Login/index.jsx","components/pages/Landing/index.jsx","components/pages/GitLab/index.jsx","Routes.js","App.js","registerServiceWorker.js","index.js"],"names":["TabContainer","state","activeItemInnerPills","activeSubItem","activeHorizontalItem","toggleOuterPills","tab","e","setState","toggleSub","toggleHorizontal","this","props","vertical","id","md","pills","color","className","settings","map","setting","key","to","active","onClick","icon","title","activeItem","tabId","subtitles","subtitle","subkey","role","horizontal","items","item","visible","notification","pill","children","React","Component","Avatar","src","url","alt","Socialdata","status","name","company","location","email","website","platforms","accounts","organisations","platformsJoined","github","gitlab","bitbucket","platform","i","href","message","dangerouslySetInnerHTML","__html","target","rel","fab","size","avatarUrl","languages","changeHue","rgb","degree","hsl","replace","length","r","parseInt","substr","g","b","cMax","Math","max","cMin","min","delta","l","h","s","abs","rgbToHSL","c","x","m","normalizeRGBValue","toString","slice","rgbToHex","hslToRGB","floor","months","Calender2D","updateDimensions","width","myInput","current","offsetWidth","componentDidMount","window","addEventListener","contributions","calendar","currentYear","contributionsList","countContribs","cycleHue","hue","total","getEachMonth","pos","month","Array","Date","getMonth","createRef","removeEventListener","ref","height","weeks","week","wkey","contributionDays","day","dkey","y","data-data","date","data-count","fill","Calender3D","renderIsometrics","obelisk","require","point","Point","pixelView","PixelView","context","maxCount","values","wi","di","cubeHeight","CubeColor","getByHorizontalColor","dimension","CubeDimension","p3d","Point3D","cube","Cube","renderObject","countTotal","averageCount","datesTotal","dateBest","contribData","contrib","contributionCalendar","average","moment","fromDate","format","toDate","busiestDay","streakLongest","datesLongest","streakCurrent","datesCurrent","longestStreak","startDate","endDate","currentStreak","renderTopStats","renderBottomStats","LanguageChart","dataPolar","datasets","data","backgroundColor","label","labels","slices","colors","Object","language","push","share","options","legend","display","Navbar","isOpen","toggleCollapse","logout","localStorage","removeItem","dark","expand","navbar","left","logged","right","pageLogin","pathname","changeState","withRouter","Footer","fluid","getFullYear","aria-hidden","TextTypist","scope","onTypingDone","cursor","show","blink","element","Delay","ms","text","Backspace","count","delay","SearchBar","search","handleChange","value","outline","maxLength","type","onChange","placeholder","aria-label","Redirect","getRedirect","a","async","requestKey","setItem","close","Settings","Projects","getBadge","fetch","response","ok","includes","repos","repo","undefined","owner","login","languagePie","style","Overview","keys","Calendar3D","Calendar2D","Education","Dashboard","setTabItems","projectcount","globalStore","tabitems","user","testimonial","statusEmojiHTML","websiteUrl","orgs","contribCalendar","contribTypes","alasql","initTables","db","organization","member","repository","statistic","platformHasOrganization","platformHasRepository","proxy","fetchJson","urlIn","headers","Accept","then","res","json","fetchHtml","parseJsonToDOM","parser","DOMParser","parseFromString","html","parseTextToDOM","prototype","getWeekNumber","d","UTC","getDate","dayNum","getUTCDay","setUTCDate","getUTCDate","yearStart","getUTCFullYear","ceil","LINK","cache","fillOrganizations","server","username","webscrap","rows","getElementsByClassName","from","_org","getAttribute","substring","orgUrl","exec","insert","idPlatform","pop","idOrganization","fillContribution","innerHTML","datetime","getElementsByTagName","nameWithOwner","repoUrl","ownerId","languagePieId","repoExists","platformId","repositoryId","fillRepositories","calendarId","fillCalendar","activities","weekday","getDay","statYear","year","_db","coverDesc","fullName","trim","createdAt","source","fillPlatform","init","apiLink","authorization","fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","__schema","types","InMemoryCache","HttpLink","uri","ApolloClient","link","GET_PROFILE","gql","getCalendar","createdAtDate","fromYear","toYear","query","toJSON","setFullYear","generateCalendarsQuery","streak","streakStart","streakTotal","fillOrganization","objUser","profile","organizations","edges","forEach","node","nodes","orgId","organizationId","membersWithRole","_member","memberAvatarUrl","memberName","memberWebUrl","memberUsername","memberId","fillStats","years","days","getYearsDict","entries","getDaysArray","filter","str","match","yearObj","yearNum","dayTotal","contributionCount","dayDate","statisticId","getTime","fillRepoOwner","_repo","repoOwnerUsername","repoOwnerAvatarUrl","repoOwnerName","repoOwnerUrl","repoOwnerId","openGraphImageUrl","pieId","repoId","fillRepository","fillPie","reposi","languagesCount","totalCount","languagesSize","totalSize","_edge","nodeName","nodeSize","nodeColor","fillLanguageSlice","octoCats","w","split","addOctocat","cat","dDay","index","repoNameWithOwner","additions","deletions","changedFiles","contribs","fillContribs","fillDB","statusMessage","emojiHTML","commitContributionsByRepository","fillRepos","getPlatform","token","client","apollo","gqlData","variables","resProfile","resCalendar","allReposWithHistory","reposPerName","defaultBranchRef","history","translator","dbName","Database","statement","formatDate","toISOString","getCalendarFromDates","fullDays","indexW","indexD","generateCalendarGrid","flag","emptyContributionYear","setDate","calculateColorsForCalendarDay","calendarYear","_week","_day","precision","dictCalendarToArray","dict","obj","JSON","parse","stringify","userList","retry","maxRetries","fn","params","catch","Error","err","isEmployee","isHireable","converter","repositories","repoWithExtras","rId","rName","oAvatarUrl","oName","oUsername","oUrl","lSize","lTotal","members","memberCount","mId","mName","mUsername","mAvatarUrl","mUrl","projectsUrl","sId","sName","sColor","sSize","orgWithMember","oId","org","oid","num","pie","languageSlice","round","baseYear","calendarGrid","today","indexY","cYear","cWeek","cWeekday","cColor","nowYear","lastYear","nowDate","reverse","currentCalendar","k","v","stats","totalContributionsPerYear","bDays","elem","statistics","stat","sYear","stId","stsDate","steDate","stTotal","streaks","dateDiff","date1","date2","streakDiff","contribPerPlatforms","contribPerPlatform","pName","pId","cType","client_secret","random","guid","redirect_uri","encodeURIComponent","githubProvider","buildAuthorizeUrl","extractError","redirectUrl","errorMatch","errorReason","errorDescriptionMatch","errorDescription","extractSession","code","codeMatch","stateMatch","AuthorizeUrl","Vary","method","access_token","gitlabProvider","usernameMatch","serverMatch","CREATE_USER_MUTATION","Register","password","password1","oAuthGitHubButton","oAuthGitHubData","AuthGitLabButton","sourceList","customUsername","usernames","addToUsernames","changeHandler","connectGitHub","RSA","acquireTokenAsync","pushToSourceList","connectGitLab","removeSource","logMeIn","event","preventDefault","stopPropagation","handleSubmit","handleUserNamePick","intel","sources","sha256","register","result","notify","error","toast","success","warn","hideProgressBar","newestOnTop","autoClose","placement","floating","disabled","social","domElement","clickable","popover","tag","checked","password2","onKeyDown","compose","graphql","LOGIN_USER","Login","tokenAuth","loginHandler","withApollo","Landing","loaded","GitLabPage","open","Routes","exact","path","component","SettingsPage","Profile","RedirectPage","render","VERIFY_TOKEN","LOGIN_REAL_USER","REFRESH_TOKEN","App","getItem","_verifyToken","setInterval","_refreshToken","_loginUser","verify","verifyToken","_isLogged","payload","exp","origIat","_setLogged","handleLogin","orig","now","_refeshToken","refresh","refreshToken","handleChangeState","registrationData","plattformDataTemp","platform_data","platformData","sourcesTemp","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","httpLink","createHttpLink","ReactDOM","document","getElementById","URL","process","origin","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.b92bf274.chunk.js","sourcesContent":["//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBTabPane,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBNav,\r\n  MDBNavItem,\r\n  MDBNavLink,\r\n  MDBIcon,\r\n  MDBTabContent,\r\n  MDBBadge\r\n} from \"mdbreact\";\r\n\r\n//> CSS\r\nimport \"./tabcontainer.scss\";\r\n\r\nclass TabContainer extends React.Component {\r\n  state = {\r\n    activeItemInnerPills: 0,\r\n    activeSubItem: 0,\r\n    activeHorizontalItem: 0\r\n  };\r\n\r\n  toggleOuterPills = (tab) => (e) => {\r\n    if (this.state.activeItemInnerPills !== tab) {\r\n      this.setState({\r\n        activeItemInnerPills: tab\r\n      });\r\n    }\r\n  };\r\n\r\n  toggleSub = (tab) => (e) => {\r\n    if (this.state.activeSubItem !== tab) {\r\n      this.setState({\r\n        activeSubItem: tab\r\n      });\r\n    }\r\n  };\r\n\r\n  toggleHorizontal = (tab) => (e) => {\r\n    if (this.state.activeHorizontalItem !== tab) {\r\n      this.setState({\r\n        activeHorizontalItem: tab\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (this.props.vertical) {\r\n      return (\r\n        <MDBRow id=\"tabcontainer\">\r\n          <MDBCol md=\"3\">\r\n            <MDBNav pills color=\"primary\" className=\"flex-column\">\r\n              {this.props.settings.map((setting, key) => {\r\n                return (\r\n                  <MDBNavItem key={key}>\r\n                    <MDBNavLink\r\n                      to=\"#\"\r\n                      active={this.state.activeItemInnerPills === key}\r\n                      onClick={this.toggleOuterPills(key)}\r\n                      className=\"text-left\"\r\n                    >\r\n                      <MDBIcon icon={setting.icon} className=\"mr-2\" />{\" \"}\r\n                      {setting.title}\r\n                    </MDBNavLink>\r\n                  </MDBNavItem>\r\n                );\r\n              })}\r\n            </MDBNav>\r\n          </MDBCol>\r\n          <MDBCol md=\"9\">\r\n            <MDBTabContent activeItem={this.state.activeItemInnerPills}>\r\n              {this.props.settings &&\r\n                this.props.settings.map((setting, key) => {\r\n                  return (\r\n                    <>\r\n                      <MDBTabPane tabId={key} key={key}>\r\n                        <MDBNav className=\"nav-tabs mt-5\">\r\n                          {setting.subtitles &&\r\n                            setting.subtitles.map((subtitle, subkey) => {\r\n                              return (\r\n                                <MDBNavItem>\r\n                                  <MDBNavLink\r\n                                    to=\"#\"\r\n                                    active={this.state.activeSubItem === subkey}\r\n                                    onClick={this.toggleSub(subkey)}\r\n                                    role=\"tab\"\r\n                                  >\r\n                                    {subtitle.title}\r\n                                  </MDBNavLink>\r\n                                </MDBNavItem>\r\n                              );\r\n                            })}\r\n                        </MDBNav>\r\n                        <MDBTabContent activeItem={this.state.activeSubItem}>\r\n                        </MDBTabContent>\r\n                      </MDBTabPane>\r\n                    </>\r\n                  );\r\n                })}\r\n            </MDBTabContent>\r\n          </MDBCol>\r\n        </MDBRow>\r\n      );\r\n    } else if (this.props.horizontal) {\r\n      return (\r\n        <>\r\n          <MDBNav className=\"nav-tabs\">\r\n            {this.props.items &&\r\n              this.props.items.map((item, key) => {\r\n                if (item.visible) {\r\n                  return (\r\n                    <MDBNavItem key={key}>\r\n                      <MDBNavLink\r\n                        to=\"#\"\r\n                        active={this.state.activeHorizontalItem === key}\r\n                        onClick={this.toggleHorizontal(key)}\r\n                        className={this.state.activeHorizontalItem === key && \"seriouslyActive\"}\r\n                        role=\"tab\"\r\n                      >\r\n                        {item.title}\r\n                        {item.notification && (\r\n                          <MDBBadge pill color=\"danger\">\r\n                            {\" \"}\r\n                          </MDBBadge>\r\n                        )}\r\n                        {item.pill && (\r\n                          <MDBBadge className=\"ml-2\" pill color=\"light\">\r\n                            {item.pill}\r\n                          </MDBBadge>\r\n                        )}\r\n                      </MDBNavLink>\r\n                    </MDBNavItem>\r\n                  );\r\n                } else {\r\n                  return null;\r\n                }\r\n              })}\r\n          </MDBNav>\r\n          <MDBTabContent activeItem={this.state.activeHorizontalItem}>\r\n            {this.props.children}\r\n          </MDBTabContent>\r\n        </>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TabContainer;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBAvatar } from \"mdbreact\";\r\n\r\nclass Avatar extends React.Component {\r\n  render() {\r\n    return (\r\n      <MDBAvatar className=\"mx-auto white\">\r\n        <img\r\n          src={this.props.url}\r\n          alt={this.props.alt}\r\n          className=\"rounded-circle img-fluid\"\r\n        />\r\n      </MDBAvatar>\r\n    );\r\n  }\r\n}\r\nexport default Avatar;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { \r\n  MDBCardBody,\r\n  MDBIcon,\r\n  MDBBadge,\r\n  MDBBtn,\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\nimport { LanguageChart } from \"../\";\r\n\r\n//> CSS\r\nimport \"./socialdata.scss\";\r\n\r\nclass Socialdata extends React.Component {\r\n  render() {\r\n    const {\r\n      status,\r\n      name,\r\n      company,\r\n      location,\r\n      email,\r\n      website,\r\n      accounts,\r\n      platforms,\r\n      organisations,\r\n    } = this.props;\r\n\r\n    let platformsJoined = {\r\n      github: false,\r\n      gitlab: false,\r\n      bitbucket: false,\r\n    };\r\n    if(platforms){\r\n      platforms.map((platform, i) => {\r\n        switch(platform.platform){\r\n          case \"GitHub\":\r\n            platformsJoined.github = true;\r\n            return true;\r\n          case \"GitLab\":\r\n            platformsJoined.gitlab = true;\r\n            return true;\r\n          case \"BitBucket\":\r\n            platformsJoined.bitbucket = true;\r\n            return true;\r\n          default:\r\n            return false;\r\n        }\r\n      });\r\n    }\r\n\r\n    return (\r\n      <MDBCardBody id=\"socialdata\">\r\n        <h4 className=\"font-weight-bold mb-4\">{name}</h4>\r\n        <hr/>\r\n        <div className=\"text-left mb-2\">\r\n          <div>\r\n          <MDBBadge color=\"secondary\">Pro</MDBBadge>\r\n          </div>\r\n          <a href=\"https://www.x.com\">#32</a> in your region\r\n        </div>\r\n        <MDBBtn\r\n        color=\"grey\"\r\n        className=\"w-100 mx-0\"\r\n        >\r\n        Edit profile\r\n        </MDBBtn>\r\n        {status && (status.message || status.icon) && (\r\n          <>\r\n            <hr />\r\n            {status.icon && (\r\n              <div dangerouslySetInnerHTML={{ __html: status.icon }}></div>\r\n            )}\r\n            {status.message && (\r\n              <p className=\"dark-grey-text\">{status.message}</p>\r\n            )}\r\n          </>\r\n        )}\r\n        {(company || location || email || website) && <hr />}\r\n        <div className=\"vcard text-left\">\r\n          {company && (\r\n            <span>\r\n              <MDBIcon icon=\"building\" />\r\n              {company}\r\n            </span>\r\n          )}\r\n          {location && (\r\n            <span>\r\n              <MDBIcon icon=\"map-marker-alt\" />\r\n              {location}\r\n            </span>\r\n          )}\r\n          {email && (\r\n            <a href={\"mailto:\" + email}>\r\n              <span>\r\n                <MDBIcon icon=\"envelope\" />\r\n                {email}\r\n              </span>\r\n            </a>\r\n          )}\r\n          {website && (\r\n            <a\r\n              href={website}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <span>\r\n                <MDBIcon icon=\"link\" />\r\n                {website}\r\n              </span>\r\n            </a>\r\n          )}\r\n          <div className=\"platform-list my-3 py-3\">\r\n          {platformsJoined.gitlab &&\r\n            <MDBIcon fab icon=\"gitlab\" size=\"lg\" />\r\n          }\r\n          {platformsJoined.github &&\r\n            <MDBIcon fab icon=\"github\" size=\"lg\" />\r\n          }\r\n          {platformsJoined.bitbucket &&\r\n            <MDBIcon fab icon=\"bitbucket\" size=\"lg\" />\r\n          }\r\n          </div>\r\n          <div className=\"organisation-list my-3 pb-3\">\r\n            {organisations.map((item, i) => {\r\n              return(\r\n                <a\r\n                href={item.url}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                >\r\n                <img src={item.avatarUrl} alt={item.name+\" logo\"}/>\r\n                </a>\r\n              );\r\n            })}\r\n          </div>\r\n          <LanguageChart languages={this.props.languages} />\r\n        </div>\r\n      </MDBCardBody>\r\n    );\r\n  }\r\n}\r\nexport default Socialdata;\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","export default function changeHue(rgb, degree) {\r\n  var hsl = rgbToHSL(rgb);\r\n  hsl.h += degree;\r\n  if (hsl.h > 360) {\r\n    hsl.h -= 360;\r\n  } else if (hsl.h < 0) {\r\n    hsl.h += 360;\r\n  }\r\n  return hslToRGB(hsl);\r\n}\r\n\r\n// exepcts a string and returns an object\r\nfunction rgbToHSL(rgb) {\r\n  // strip the leading # if it's there\r\n  rgb = rgb.replace(/^\\s*#|\\s*$/g, \"\");\r\n\r\n  // convert 3 char codes --> 6, e.g. `E0F` --> `EE00FF`\r\n  if (rgb.length === 3) {\r\n    rgb = rgb.replace(/(.)/g, \"$1$1\");\r\n  }\r\n\r\n  var r = parseInt(rgb.substr(0, 2), 16) / 255,\r\n    g = parseInt(rgb.substr(2, 2), 16) / 255,\r\n    b = parseInt(rgb.substr(4, 2), 16) / 255,\r\n    cMax = Math.max(r, g, b),\r\n    cMin = Math.min(r, g, b),\r\n    delta = cMax - cMin,\r\n    l = (cMax + cMin) / 2,\r\n    h = 0,\r\n    s = 0;\r\n\r\n  if (delta === 0) {\r\n    h = 0;\r\n  } else if (cMax === r) {\r\n    h = 60 * (((g - b) / delta) % 6);\r\n  } else if (cMax === g) {\r\n    h = 60 * ((b - r) / delta + 2);\r\n  } else {\r\n    h = 60 * ((r - g) / delta + 4);\r\n  }\r\n\r\n  if (delta === 0) {\r\n    s = 0;\r\n  } else {\r\n    s = delta / (1 - Math.abs(2 * l - 1));\r\n  }\r\n\r\n  return {\r\n    h,\r\n    s,\r\n    l\r\n  };\r\n}\r\n\r\n// expects an object and returns a string\r\nfunction hslToRGB(hsl) {\r\n  var h = hsl.h,\r\n    s = hsl.s,\r\n    l = hsl.l,\r\n    c = (1 - Math.abs(2 * l - 1)) * s,\r\n    x = c * (1 - Math.abs(((h / 60) % 2) - 1)),\r\n    m = l - c / 2,\r\n    r,\r\n    g,\r\n    b;\r\n\r\n  if (h < 60) {\r\n    r = c;\r\n    g = x;\r\n    b = 0;\r\n  } else if (h < 120) {\r\n    r = x;\r\n    g = c;\r\n    b = 0;\r\n  } else if (h < 180) {\r\n    r = 0;\r\n    g = c;\r\n    b = x;\r\n  } else if (h < 240) {\r\n    r = 0;\r\n    g = x;\r\n    b = c;\r\n  } else if (h < 300) {\r\n    r = x;\r\n    g = 0;\r\n    b = c;\r\n  } else {\r\n    r = c;\r\n    g = 0;\r\n    b = x;\r\n  }\r\n\r\n  r = normalizeRGBValue(r, m);\r\n  g = normalizeRGBValue(g, m);\r\n  b = normalizeRGBValue(b, m);\r\n\r\n  return rgbToHex(r, g, b);\r\n}\r\n\r\nfunction normalizeRGBValue(color, m) {\r\n  color = Math.floor((color + m) * 255);\r\n  if (color < 0) {\r\n    color = 0;\r\n  }\r\n  return color;\r\n}\r\n\r\nfunction rgbToHex(r, g, b) {\r\n  return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBRow, MDBCol } from \"mdbreact\";\r\n\r\n//> Helpers\r\nimport changeHue from \"../../helpers/changeHue.js\";\r\n\r\n//> CSS\r\nimport \"./calendar.scss\";\r\n\r\nconst months = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];\r\n\r\nclass Calender2D extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.myInput = React.createRef();\r\n\r\n    this.state = {\r\n      width: 0,\r\n      hue: 0\r\n    };\r\n  }\r\n\r\n  updateDimensions = () => {\r\n    this.setState({\r\n      width: this.myInput.current.offsetWidth\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    // Add resize listener\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n\r\n    let contributions = this.props.calendar.currentYear;\r\n\r\n    this.setState(\r\n      {\r\n        width: this.myInput.current.offsetWidth,\r\n        contributionsList: contributions\r\n      },\r\n      () => this.countContribs()\r\n    );\r\n\r\n    // Color RGB cycling\r\n    //let intervalID = window.setInterval(this.cycleHue, 70);\r\n  };\r\n\r\n  cycleHue = () => {\r\n    if (this.state.hue > 365) {\r\n      this.setState({\r\n        hue: 0\r\n      });\r\n    }\r\n    this.setState({\r\n      hue: this.state.hue + 1\r\n    });\r\n  };\r\n\r\n  countContribs = () => {\r\n    if (this.state.contributionsList) {\r\n      return this.state.contributionsList.total;\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  getEachMonth = (pos) => {\r\n    // Create new empty array\r\n    let month = new Array();\r\n\r\n    // Get current month\r\n    let current = new Date().getMonth();\r\n\r\n    // Have each month two times\r\n    month[0] = \"Jan\";\r\n    month[1] = \"Feb\";\r\n    month[2] = \"Mar\";\r\n    month[3] = \"Apr\";\r\n    month[4] = \"May\";\r\n    month[5] = \"Jun\";\r\n    month[6] = \"Jul\";\r\n    month[7] = \"Aug\";\r\n    month[8] = \"Sep\";\r\n    month[9] = \"Oct\";\r\n    month[10] = \"Nov\";\r\n    month[11] = \"Dec\";\r\n    month[12] = \"Jan\";\r\n    month[13] = \"Feb\";\r\n    month[14] = \"Mar\";\r\n    month[15] = \"Apr\";\r\n    month[16] = \"May\";\r\n    month[17] = \"Jun\";\r\n    month[18] = \"Jul\";\r\n    month[19] = \"Aug\";\r\n    month[20] = \"Sep\";\r\n    month[21] = \"Oct\";\r\n    month[22] = \"Nov\";\r\n    month[23] = \"Dec\";\r\n\r\n    return month[current + pos];\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"calendar2d\">\r\n        <div className=\"text-right\">\r\n          <h3 className=\"font-weight-bold d-inline-block\">\r\n            {this.countContribs()}\r\n          </h3>\r\n          <span> contributions in the last year</span>\r\n        </div>\r\n        <MDBRow className=\"text-center\">\r\n          {months.map((month, key) => {\r\n            return (\r\n              <MDBCol size=\"months\" key={key}>\r\n                <small>{this.getEachMonth(key)}</small>\r\n              </MDBCol>\r\n            );\r\n          })}\r\n        </MDBRow>\r\n        <div ref={this.myInput}>\r\n          <svg className=\"calendar\" height={(this.state.width / 53) * 7}>\r\n            {this.state.contributionsList &&\r\n              this.state.contributionsList.weeks.map((week, wkey) => {\r\n                return week.contributionDays.map((day, dkey) => {\r\n                  if (wkey === 0) {\r\n                    return (\r\n                      <rect\r\n                        key={wkey + \"-\" + dkey}\r\n                        y={\r\n                          (this.state.width / 53) * 7 +\r\n                          (this.state.width / 53) * dkey -\r\n                          week.contributionDays.length * (this.state.width / 53)\r\n                        }\r\n                        x={0}\r\n                        width={this.state.width / 53}\r\n                        height={this.state.width / 53}\r\n                        data-data={day.date}\r\n                        data-count={day.total}\r\n                        fill={changeHue(day.color, this.state.hue)}\r\n                      ></rect>\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <rect\r\n                        key={wkey + \"-\" + dkey}\r\n                        y={(this.state.width / 53) * dkey}\r\n                        x={(this.state.width / 53) * wkey}\r\n                        width={this.state.width / 53}\r\n                        height={this.state.width / 53}\r\n                        data-data={day.date}\r\n                        data-count={day.total}\r\n                        fill={changeHue(day.color, this.state.hue)}\r\n                      ></rect>\r\n                    );\r\n                  }\r\n                });\r\n              })}\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Calender2D;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBRow, MDBCol } from \"mdbreact\";\r\n\r\n//> Additional packages\r\n// Used to display the time in a readable format\r\nimport moment from \"moment\";\r\n\r\n//> Helpers\r\nimport changeHue from \"../../helpers/changeHue.js\";\r\n\r\n//> CSS\r\nimport \"./calendar3d.scss\";\r\n\r\nclass Calender3D extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.myInput = React.createRef();\r\n    this.state = {\r\n      width: 0,\r\n      hue: 0\r\n    };\r\n  }\r\n\r\n  updateDimensions = () => {\r\n    this.setState({\r\n      width: this.myInput.current.offsetWidth\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    // Add resize listener\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n    this.setState(\r\n      {\r\n        width: this.myInput.current.offsetWidth\r\n      },\r\n      () => this.renderIsometrics()\r\n    );\r\n  };\r\n\r\n  renderTopStats() {\r\n    let countTotal, averageCount, datesTotal, maxCount, dateBest;\r\n    let contribData = this.props.contrib[2019];\r\n    let contributionCalendar = this.props.calendar.currentYear;\r\n\r\n    countTotal = contributionCalendar.total;\r\n    averageCount = contribData.average;\r\n    datesTotal =\r\n      moment(contributionCalendar.fromDate).format(\"MMM DD, YYYY\") +\r\n      \" - \" +\r\n      moment(contributionCalendar.toDate).format(\"MMM DD, YYYY\");\r\n    maxCount = contribData.busiestDay.total;\r\n    dateBest = moment(contribData.busiestDay.date).format(\"MMM DD\");\r\n\r\n    let html;\r\n\r\n    html = `<div class=\"ic-stats-block ic-stats-top\">\\n\r\n    <span class=\"ic-stats-table\">\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">1 year total\\n\r\n    <span class=\"ic-stats-count\">${countTotal}</span>\\n\r\n    <span class=\"ic-stats-average\">${averageCount}</span> per day\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta ic-stats-total-meta\">\\n\r\n    <span class=\"ic-stats-unit\">contributions</span>\\n\r\n    <span class=\"ic-stats-date\">${datesTotal}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">Busiest day\\n\r\n    <span class=\"ic-stats-count\">${maxCount}</span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta\">\\n\r\n    <span class=\"ic-stats-unit\">contributions</span>\\n\r\n    <span class=\"ic-stats-date\">${dateBest}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </div>`;\r\n    return { __html: html };\r\n  }\r\n\r\n  renderBottomStats() {\r\n    let streakLongest, datesLongest, streakCurrent, datesCurrent;\r\n    let contribData = this.props.contrib[\"2019\"];\r\n    let contributionCalendar = this.props.calendar.currentYear;\r\n\r\n    streakLongest = contribData.longestStreak.total;\r\n    datesLongest =\r\n      moment(contribData.longestStreak.startDate).format(\"MMM DD, YYYY\") +\r\n      \" - \" +\r\n      moment(contribData.longestStreak.endDate).format(\"MMM DD, YYYY\");\r\n    streakCurrent = contribData.currentStreak.total;\r\n    datesCurrent =\r\n      moment(contribData.currentStreak.startDate).format(\"MMM DD, YYYY\") +\r\n      \" - \" +\r\n      moment(contribData.currentStreak.endDate).format(\"MMM DD, YYYY\");\r\n\r\n    let html;\r\n\r\n    html = `<div class=\"ic-stats-block ic-stats-bottom\">\\n\r\n    <span class=\"ic-stats-table\">\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">Longest streak\\n\r\n    <span class=\"ic-stats-count\">${streakLongest}</span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta\">\\n\r\n    <span class=\"ic-stats-unit\">days</span>\\n\r\n    <span class=\"ic-stats-date\">${datesLongest}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-row\">\\n\r\n    <span class=\"ic-stats-label\">Current streak\\n\r\n    <span class=\"ic-stats-count\">${streakCurrent}</span>\\n\r\n    </span>\\n\r\n    <span class=\"ic-stats-meta\">\\n\r\n    <span class=\"ic-stats-unit\">days</span>\\n\r\n    <span class=\"ic-stats-date\">${datesCurrent}</span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </span>\\n\r\n    </div>`;\r\n    return { __html: html };\r\n  }\r\n\r\n  renderIsometrics = () => {\r\n    const obelisk = require(\"obelisk.js\");\r\n\r\n    // Create a canvas 2D point for pixel view world\r\n    let point = new obelisk.Point(70, 70);\r\n\r\n    // Create view instance to nest everything\r\n    // Canvas could be either DOM or jQuery element\r\n    let pixelView = new obelisk.PixelView(this.context, point);\r\n\r\n    // Get contribs of the current year\r\n    let contributions = this.props.calendar.currentYear;\r\n\r\n    // Define basic variables\r\n    let SIZE = 10;\r\n    let MAXHEIGHT = 100;\r\n    let x = 0;\r\n    let y = 0;\r\n    let maxCount = 0; // Max number of contributions / day in the last year\r\n\r\n    let values = [];\r\n\r\n    contributions.weeks.map((week, wkey) => {\r\n      values[wkey] = [];\r\n      week.contributionDays.map((day, dkey) => {\r\n        // Get max number of contributions\r\n        if (day.total > maxCount) {\r\n          maxCount = day.total;\r\n        }\r\n        values[wkey][dkey] = day;\r\n      });\r\n    });\r\n\r\n    values.map((week, wi) => {\r\n      week.map((day, di) => {\r\n        // Normalize the values to achieve even distribution\r\n        let cubeHeight = 3;\r\n        if (maxCount > 0) {\r\n          cubeHeight += parseInt((MAXHEIGHT / maxCount) * day.total);\r\n        }\r\n\r\n        // Offsets\r\n        let x = wi;\r\n        let y = di;\r\n\r\n        // Create cube dimension and color instance\r\n        let fill = day.color;\r\n        let color = new obelisk.CubeColor().getByHorizontalColor(\r\n          parseInt(\"0x\" + fill.replace(\"#\", \"\"))\r\n        );\r\n\r\n        let dimension = new obelisk.CubeDimension(SIZE, SIZE, cubeHeight);\r\n        // Build cube with dimension and color instance\r\n        let p3d = new obelisk.Point3D(SIZE * x, SIZE * y, 0);\r\n        var cube = new obelisk.Cube(dimension, color, false);\r\n\r\n        // Render cube primitive into view\r\n        pixelView.renderObject(cube, p3d);\r\n      });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"calendar3d\">\r\n        <div dangerouslySetInnerHTML={this.renderTopStats()} />\r\n        <div dangerouslySetInnerHTML={this.renderBottomStats()} />\r\n        <div ref={this.myInput}>\r\n          <canvas\r\n            ref={(c) => (this.context = c)}\r\n            width={this.state.width}\r\n            height=\"410\"\r\n          ></canvas>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Calender3D;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Chart.js\r\n// \"Material Design for Bootstrap\" is using chart.js to generate its charts\r\nimport { Radar } from \"react-chartjs-2\";\r\n\r\nclass LanguageChart extends React.Component {\r\n  state = {\r\n    dataPolar: {\r\n      datasets: [\r\n        {\r\n          data: [300, 250, 100, 40],\r\n          backgroundColor: [\r\n            \"rgba(247, 70, 74, 0.8)\",\r\n            \"rgba(70, 191, 189, 0.8)\",\r\n            \"rgba(253, 180, 92, 0.8)\",\r\n            \"rgba(148, 159, 177, 0.8)\"\r\n          ],\r\n          label: \"Your top languages\"\r\n        }\r\n      ],\r\n      labels: [\"JavaScript\", \"Python\", \"CSS\", \"Roff\"]\r\n    }\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    let languages = this.props.languages.slices;\r\n\r\n    let colors = [];\r\n    let labels = [];\r\n    let data = [];\r\n\r\n    Object.values(languages).map((language, i) => {\r\n      colors.push(language.color);\r\n      labels.push(language.name);\r\n      data.push(language.share);\r\n    });\r\n\r\n    this.setState({\r\n      dataPolar: {\r\n        datasets: [\r\n          {\r\n            data,\r\n            backgroundColor: colors,\r\n            label: \"Your top languages\"\r\n          }\r\n        ],\r\n        labels\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <p className=\"lead font-weight-bold text-center mt-3\">\r\n          Your top languages\r\n        </p>\r\n        {this.state.dataPolar &&\r\n          <Radar\r\n            className=\"w-100 h-auto\"\r\n            data={this.state.dataPolar}\r\n            options={\r\n              ({\r\n                responsive: true\r\n              },\r\n              {\r\n                legend: {\r\n                  display: false\r\n                }\r\n              })\r\n            }\r\n          />\r\n        }\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LanguageChart;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// Router\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBNavbar,\r\n  MDBContainer,\r\n  MDBNavbarBrand,\r\n  MDBNavbarNav,\r\n  MDBNavItem,\r\n  MDBNavLink,\r\n  MDBNavbarToggler,\r\n  MDBCollapse,\r\n  MDBFormInline,\r\n  MDBInput,\r\n  MDBIcon,\r\n  MDBDropdown,\r\n  MDBDropdownToggle,\r\n  MDBDropdownMenu,\r\n  MDBDropdownItem\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\nimport { SearchBar } from \"../../molecules\";\r\n\r\n//> CSS\r\nimport \"./navbar.scss\";\r\n\r\nclass Navbar extends React.Component {\r\n  state = {\r\n    isOpen: false\r\n  };\r\n\r\n  toggleCollapse = () => {\r\n    this.setState({ isOpen: !this.state.isOpen });\r\n  };\r\n\r\n  logout = () => {\r\n    // Remove the JSON Web Token\r\n    localStorage.removeItem(\"jwt_snek\");\r\n    // Redirect to login\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const { data } = this.props;\r\n\r\n    return (\r\n      <MDBNavbar color=\"elegant-color\" dark expand=\"md\">\r\n        <MDBContainer>\r\n          <MDBNavbarBrand>\r\n            <strong className=\"white-text\">SNEK</strong>\r\n          </MDBNavbarBrand>\r\n          <MDBNavbarToggler onClick={this.toggleCollapse} />\r\n          <MDBCollapse id=\"navbarCollapse3\" isOpen={this.state.isOpen} navbar>\r\n            <SearchBar />\r\n            <MDBNavbarNav left>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Ranking</MDBNavLink>\r\n              </MDBNavItem>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Developer</MDBNavLink>\r\n              </MDBNavItem>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Jobs</MDBNavLink>\r\n              </MDBNavItem>\r\n              <MDBNavItem>\r\n                <MDBNavLink to=\"#!\">Trends</MDBNavLink>\r\n              </MDBNavItem>\r\n            </MDBNavbarNav>\r\n            {data.logged ? (\r\n              <MDBNavbarNav right>\r\n                <MDBNavItem>\r\n                  <span\r\n                    className=\"nav-link cursor-pointer\"\r\n                    onClick={this.logout}\r\n                  >\r\n                    Logout\r\n                  </span>\r\n                </MDBNavItem>\r\n              </MDBNavbarNav>\r\n            ) : (\r\n              <MDBNavbarNav right>\r\n                <MDBNavItem active={data.pageLogin}>\r\n                  {location.pathname === \"/\" ? (\r\n                    <span\r\n                      className=\"nav-link cursor-pointer\"\r\n                      onClick={() => this.props.changeState(\"pageLogin\", true)}\r\n                    >\r\n                      Sign in\r\n                    </span>\r\n                  ) : (\r\n                    <MDBNavLink to=\"/\">Sign in</MDBNavLink>\r\n                  )}\r\n                </MDBNavItem>\r\n                <MDBNavItem active={!data.pageLogin}>\r\n                  {location.pathname === \"/\" ? (\r\n                    <span\r\n                      className=\"nav-link cursor-pointer\"\r\n                      onClick={() => this.props.changeState(\"pageLogin\", false)}\r\n                    >\r\n                      Sign up\r\n                    </span>\r\n                  ) : (\r\n                    <MDBNavLink to=\"/\">Sign up</MDBNavLink>\r\n                  )}\r\n                </MDBNavItem>\r\n              </MDBNavbarNav>\r\n            )}\r\n          </MDBCollapse>\r\n        </MDBContainer>\r\n      </MDBNavbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Navbar);\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n// Links (replaces <a> tags)\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBFooter,\r\n  MDBContainer,\r\n} from \"mdbreact\";\r\n\r\nclass Footer extends React.Component{\r\n  render(){\r\n    return(\r\n      <MDBFooter color=\"elegant-color\">\r\n        <MDBContainer className=\"text-center py-3\">\r\n          <Link\r\n          to=\"/about\"\r\n          >\r\n          Impressum\r\n          </Link>\r\n        </MDBContainer>\r\n        <div className=\"footer-copyright text-center py-3\">\r\n          <MDBContainer fluid>\r\n            &copy; 2017 - {new Date().getFullYear()} Copyright: Werbeagentur Christian Aichner\r\n            <p className=\"my-2 font-weight-bold\">\r\n              Made with\r\n              <i className=\"fas fa-heart pulse red-text ml-1 mr-1\" aria-hidden=\"true\"></i>\r\n              by\r\n              <a\r\n              href=\"https://www.aichner-christian.com\" \r\n              target=\"_blank\"\r\n              className=\"ml-1\"\r\n              rel=\"noopener noreferrer\"\r\n              >\r\n              us\r\n              </a>.\r\n            </p>\r\n          </MDBContainer>\r\n        </div>\r\n      </MDBFooter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n\r\n/** \r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Additional packages\r\n// Contains all the functionality necessary to define Typist components\r\nimport Typist from \"react-typist\";\r\n\r\nclass TextTypist extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { \r\n      active: 0\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      scope: this.props.scope\r\n    });\r\n  }\r\n\r\n  onTypingDone = () => {\r\n    this.setState({\r\n      scope: null\r\n    }, () => this.setState({\r\n      scope: this.props.scope\r\n    }));\r\n  };\r\n\r\n  render(){\r\n    if(this.state.scope){\r\n      return(\r\n        <Typist \r\n        className=\"d-inline typist\"\r\n        cursor={{\r\n          show: true,\r\n          blink: true,\r\n          element: \"_\",\r\n        }}\r\n        onTypingDone={() => this.onTypingDone()}\r\n        >\r\n          <Typist.Delay ms={2000} />\r\n          {this.state.scope.map((text, i) => {\r\n            return (\r\n              <span key={i}>\r\n                {text}\r\n                {<Typist.Backspace count={text.length + 10} delay={2000} />}\r\n              </span>\r\n            );\r\n          })}\r\n        </Typist>\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TextTypist;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBInput,\r\n  MDBIcon,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n} from \"mdbreact\";\r\n\r\nclass SearchBar extends React.Component {\r\n  state = {\r\n    search: \"\",\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const { data } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"md-form my-0 mx-2\">\r\n          <MDBInput\r\n            className=\"mr-sm-2\"\r\n            outline\r\n            maxLength=\"20\"\r\n            value={this.state.search}\r\n            name=\"search\"\r\n            type=\"search\"\r\n            onChange={this.handleChange}\r\n            placeholder=\"Search\"\r\n            aria-label=\"Search\"\r\n          />\r\n          <MDBIcon icon=\"search\" />\r\n        </div>\r\n        {this.state.search &&\r\n        <div className=\"search-results\">\r\n          <MDBListGroup>\r\n          <a \r\n          href={\"https://www.google.com/search?q=\"+this.state.search}\r\n          target=\"_blank\"\r\n          className=\"text-muted\"\r\n          >\r\n            <MDBListGroupItem><MDBIcon fab icon=\"google\" className=\"mr-2\" />\r\n            {this.state.search}\r\n            </MDBListGroupItem>\r\n          </a>\r\n          </MDBListGroup>\r\n        </div>\r\n        }\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\nclass Redirect extends React.Component {\r\n  componentDidMount = () => {\r\n    this.getRedirect();\r\n  };\r\n\r\n  getRedirect = async () => {\r\n    // Get name of window which was set by the parent to be the unique\r\n    // request key\r\n    const requestKey = window.name;\r\n    // Update corresponding entry with the redirected url which should\r\n    // contain either access token or failure reason in the query\r\n    // parameter / hash\r\n    localStorage.setItem(requestKey, window.location.href);\r\n    window.close();\r\n  };\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default Redirect;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Additional\r\n// Charts for displaying user contribution distribution (Chart.js 2)\r\nimport { \r\n  Radar\r\n} from \"react-chartjs-2\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBContainer\r\n} from \"mdbreact\";\r\n\r\nclass ChartsPage extends React.Component {\r\n  state={\r\n    dataRadar: {\r\n      labels: [\"Loading\"],\r\n      datasets: [{\r\n        label: \"Loading\"\r\n      }]\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setState({\r\n      dataRadar: {\r\n        labels: [\"Code review\", \"Issues\", \"Pull request\", \"Commits\"],\r\n        datasets: this.calculateSources()\r\n      },\r\n      dataRadarOptions: {\r\n        responsive: true,\r\n        elements: {\r\n          line: {\r\n            tension: 0\r\n          }\r\n        },\r\n        legend: {\r\n          display: true,\r\n        },\r\n        scale: {\r\n          ticks: {\r\n            beginAtZero: true,\r\n            max: 100,\r\n            min: 0,\r\n            stepSize: 20\r\n          }\r\n        },\r\n        scales: {\r\n            yAxes: [{\r\n              gridLines: {\r\n                display: false,\r\n                drawBorder: false\r\n              },\r\n              ticks: {\r\n                display: false\r\n              }\r\n            }],\r\n            xAxes: [{\r\n              gridLines: {\r\n                display: false,\r\n                drawBorder: false\r\n              },\r\n              ticks: {\r\n                beginAtZero: true,\r\n                display: false,\r\n              }\r\n            }]\r\n        }\r\n    }\r\n    });\r\n  }\r\n\r\n  calculateSources = () => {\r\n    let totalReviews = 0, totalIssues = 0, totalRequests = 0, totalCommits = 0, totalSources = 1, results = [];\r\n\r\n    // Get data points for all sources\r\n    let types = this.props.types.contribs;\r\n    totalReviews = types.codeReviews.share;\r\n    totalIssues = types.issue.share;\r\n    totalRequests = types.pullRequest.share;\r\n    totalCommits = types.commit.share;\r\n\r\n    let values = [\r\n      totalReviews,\r\n      totalIssues,\r\n      totalRequests,\r\n      totalCommits\r\n    ];\r\n\r\n    results.push({\r\n      label: \"GitHub\",\r\n      backgroundColor: \"rgba(51,51,51,0)\",\r\n      borderColor: \"rgba(51,51,51,.4)\",\r\n      data: values\r\n    });\r\n    \r\n    // Calculate averages\r\n    let avgReviews, avgIssues, avgRequests, avgCommits;\r\n\r\n    avgReviews = parseInt(totalReviews) / parseInt(totalSources);\r\n    avgIssues = parseInt(totalIssues) / parseInt(totalSources);\r\n    avgRequests = parseInt(totalRequests) / parseInt(totalSources);\r\n    avgCommits = parseInt(totalCommits) / parseInt(totalSources);\r\n\r\n    return results;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MDBContainer>\r\n        <Radar \r\n        data={this.state.dataRadar}\r\n        options={this.state.dataRadarOptions}\r\n        />\r\n      </MDBContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ChartsPage;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBContainer,\r\n  MDBTabPane,\r\n  MDBTabContent,\r\n  MDBNav,\r\n  MDBNavItem,\r\n  MDBNavLink,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBBtn,\r\n  MDBCardBody,\r\n  MDBCardTitle,\r\n  MDBCardText,\r\n  MDBIcon\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\nimport { TabContainer } from \"../../molecules\";\r\n\r\n//> Dummy Data\r\nconst settings = [\r\n  {\r\n    title: \"General\",\r\n    subtitles: [\r\n      {\r\n        title: \"Profile\"\r\n      }\r\n    ],\r\n    icon: \"user\"\r\n  },\r\n  {\r\n    title: \"Customization\",\r\n    subtitles: [\r\n      {\r\n        title: \"Features\"\r\n      },\r\n      {\r\n        title: \"Colors\"\r\n      },\r\n      {\r\n        title: \"User profile\"\r\n      }\r\n    ],\r\n    icon: \"leaf\"\r\n  },\r\n  {\r\n    title: \"Security\",\r\n    subtitles: [\r\n      {\r\n        title: \"Login\"\r\n      }\r\n    ],\r\n    icon: \"lock\"\r\n  },\r\n  {\r\n    title: \"API\",\r\n    subtitles: [\r\n      {\r\n        title: \"Profile\"\r\n      }\r\n    ],\r\n    icon: \"network-wired\"\r\n  },\r\n  {\r\n    title: \"Billing\",\r\n    icon: \"dollar-sign\"\r\n  },\r\n  {\r\n    title: \"Stats\",\r\n    subtitles: [\r\n      {\r\n        title: \"General\"\r\n      }\r\n    ],\r\n    icon: \"lock\"\r\n  },\r\n  {\r\n    title: \"Sources\",\r\n    subtitles: [\r\n      {\r\n        title: \"General\"\r\n      }\r\n    ],\r\n    icon: \"cloud\"\r\n  }\r\n];\r\n\r\nclass Settings extends React.Component {\r\n  render() {\r\n    return (\r\n      <MDBContainer>\r\n        <h2 className=\"mt-5\">Settings</h2>\r\n        <TabContainer settings={settings} vertical />\r\n      </MDBContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Settings;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { \r\n  MDBTabPane,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBIcon,\r\n} from \"mdbreact\";\r\n\r\n//> CSS\r\nimport \"./projects.scss\";\r\n\r\nclass Projects extends React.Component {\r\n\r\n  state = {};\r\n\r\n  getBadge = async (name, url) => {\r\n    if(!this.state[name]){\r\n      this.setState({\r\n        [name]: null\r\n      });\r\n      let response = await fetch(url);\r\n      if (response.ok) {\r\n        let badge = await response.text();\r\n        if(!badge.includes(\"repo not found\")){\r\n          this.setState({\r\n            [name]: url\r\n          });\r\n        } else {\r\n          this.setState({\r\n            [name]: null\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MDBTabPane tabId={this.props.id} role=\"tabpanel\">\r\n        {this.props.repos && (\r\n          <>\r\n            <h3 className=\"font-weight-bold mt-4\">Repositories</h3>\r\n            <MDBRow className=\"project-list\">\r\n              {this.props.repos.map((repo, key) => {\r\n\r\n                if(this.state[\"lastCommit\"+key] === undefined){\r\n                  this.getBadge(\"lastCommit\"+key,\"https://cors-anywhere.herokuapp.com/https://img.shields.io/github/last-commit/\"+repo.owner.login+\"/\"+repo.name);\r\n                }\r\n\r\n                return (\r\n                  <MDBCol key={key} md=\"6\">\r\n                  <a\r\n                    href={repo.url}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    <li>\r\n                    <div>\r\n                      <p className=\"lead mb-1 float-left\">\r\n                      {repo.name}\r\n                      </p>\r\n                      {repo.languagePie.slices.length > 0 ? (\r\n                        <small className=\"mb-1 float-right text-muted\">\r\n                        <MDBIcon icon=\"square\" className=\"pr-1\" style={{color: repo.languagePie.slices[0].color}} />\r\n                        {repo.languagePie.slices[0].name}\r\n                        </small>\r\n                      ) : (\r\n                        <small className=\"mb-1 float-right text-muted\">\r\n                        No top language\r\n                        </small>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"clearfix\" />\r\n                    <div>\r\n                      <img src={repo.avatarUrl} alt={repo.owner.login}/>\r\n                      <small>Owned by {repo.owner.login}</small>\r\n                    </div>\r\n                    <div className=\"py-2\">\r\n                      <img \r\n                      className=\"img-badge\"\r\n                      src={this.state[\"lastCommit\"+key]}\r\n                      />\r\n                    </div>\r\n                    </li>\r\n                  </a>\r\n                  </MDBCol>\r\n                );\r\n              })}\r\n            </MDBRow>\r\n          </>\r\n        )}\r\n      </MDBTabPane>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Projects;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBTabPane } from \"mdbreact\";\r\n\r\nclass Resume extends React.Component {\r\n  render() {\r\n    return <MDBTabPane tabId={this.props.id} role=\"tabpanel\"></MDBTabPane>;\r\n  }\r\n}\r\n\r\nexport default Resume;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { \r\n  MDBTabPane,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBIcon,\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\n// Molecules\r\nimport {\r\n  Calendar2D,\r\n  Calendar3D\r\n} from \"../../../molecules\";\r\n\r\nclass Overview extends React.Component {\r\n  render() {\r\n    return (\r\n      <MDBTabPane tabId={this.props.id} role=\"tabpanel\">\r\n        {this.props.languages &&\r\n        <MDBRow className=\"text-center text-md-left mb-4\">\r\n        {Object.keys(this.props.languages).map((key, i) => {\r\n          if(i < 6){\r\n            return(\r\n              <MDBCol md=\"4\" key={i}>\r\n                <span className=\"mb-2 text-muted\">\r\n                  <MDBIcon icon=\"square\" className=\"pr-2\" style={{color: this.props.languages[key].color}} />\r\n                  {this.props.languages[key].name} <small>{this.props.languages[key].share}%</small>\r\n                </span>\r\n              </MDBCol>\r\n            );\r\n          }\r\n        })}\r\n        </MDBRow>\r\n        }\r\n        {(this.props.contrib && this.props.calendar) && (\r\n          <>\r\n            <Calendar3D contrib={this.props.contrib} calendar={this.props.calendar} />\r\n            {this.props.contrib && (\r\n              <Calendar2D calendar={this.props.calendar} />\r\n            )}\r\n          </>\r\n        )}\r\n      </MDBTabPane>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Overview;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBTabPane } from \"mdbreact\";\r\n\r\nclass Education extends React.Component {\r\n  render() {\r\n    return <MDBTabPane tabId={this.props.id} role=\"tabpanel\"></MDBTabPane>;\r\n  }\r\n}\r\n\r\nexport default Education;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// Router\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBEdgeHeader,\r\n  MDBFreeBird,\r\n  MDBContainer,\r\n  MDBCol,\r\n  MDBRow,\r\n  MDBCardBody,\r\n  MDBIcon,\r\n  MDBCard,\r\n  MDBCardTitle,\r\n  MDBCardImage,\r\n  MDBCardText,\r\n  MDBAnimation,\r\n  MDBAvatar,\r\n  MDBCardUp,\r\n  MDBSpinner,\r\n} from \"mdbreact\";\r\n\r\n//> Components\r\n// Molecules\r\nimport { TabContainer, Avatar, Socialdata } from \"../../molecules\";\r\n// Organisms\r\nimport {\r\n  ResumeTab,\r\n  ProjectsTab,\r\n  OverviewTab,\r\n  EducationTab,\r\n} from \"../../organisms/tabs\";\r\n\r\n//> CSS\r\nimport \"./profile.scss\";\r\n\r\nclass Dashboard extends React.Component {\r\n\r\n  state = {};\r\n\r\n  setTabItems = () => {\r\n\r\n    // Get project count\r\n    const projectcount = this.props.globalStore.data.repos.length;\r\n\r\n    this.setState({\r\n      tabitems: [\r\n        {\r\n          title: \"Overview\",\r\n          visible: true,\r\n          pill: false,\r\n          notification: false\r\n        },\r\n        {\r\n          title: \"Projects\",\r\n          visible: true,\r\n          pill: projectcount,\r\n          notification: true\r\n        },\r\n        {\r\n          title: \"Education\",\r\n          visible: true,\r\n          notification: false\r\n        },\r\n        {\r\n          title: \"Posts\",\r\n          visible: true,\r\n          pill: \"0\",\r\n          notification: false\r\n        },\r\n        {\r\n          title: \"Papers\",\r\n          visible: true,\r\n          pill: \"0\",\r\n          notification: false\r\n        },\r\n        {\r\n          title: \"Talks\",\r\n          visible: true,\r\n          pill: \"0\",\r\n          notification: false\r\n        },\r\n      ]\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { globalStore } = this.props;\r\n    \r\n    //> Troubleshooting Point 1\r\n    // Global storage @ rendering of dashboard (Profile\\index.jsx)\r\n    //console.log(TSID1, globalStore);\r\n\r\n    if(!globalStore.data.logged) { return (<Redirect to=\"/\"/>); }\r\n\r\n    let data = globalStore.data;\r\n\r\n    // Get tab items\r\n    if(data && !this.state.tabitems){\r\n      this.setTabItems();\r\n    }\r\n\r\n    if (data && this.state.tabitems) {\r\n      if (data.user) {\r\n        return (\r\n          <div id=\"profile\">\r\n            <MDBContainer className=\"py-5\">\r\n              <MDBRow>\r\n                <MDBCol md=\"4\" className=\"text-center\">\r\n                  <MDBCard testimonial>\r\n                    <MDBCardUp color=\"info\" />\r\n                    <Avatar url={data.user.avatarUrl} alt={data.user.name} />\r\n                    <Socialdata\r\n                      status={{\r\n                        message: data.user.status, \r\n                        icon: data.user.statusEmojiHTML\r\n                      }}\r\n                      name={data.user.name}\r\n                      company={data.user.company}\r\n                      location={data.user.location}\r\n                      email={data.user.email}\r\n                      languages={data.languages}\r\n                      website={data.user.websiteUrl}\r\n                      organisations={data.orgs}\r\n                      platforms={data.user.platforms}\r\n                    />\r\n                  </MDBCard>\r\n                </MDBCol>\r\n                <MDBCol md=\"8\">\r\n                  <TabContainer items={this.state.tabitems} horizontal>\r\n                    <OverviewTab \r\n                    id={0}\r\n                    contrib={data.contrib}\r\n                    calendar={data.contribCalendar}\r\n                    contribTypes={data.contribTypes}\r\n                    languages={data.languages.slices}\r\n                    />\r\n                    <ProjectsTab id={1} repos={data.repos} />\r\n                    <EducationTab id={2} />\r\n                  </TabContainer>\r\n                </MDBCol>\r\n              </MDBRow>\r\n            </MDBContainer>\r\n          </div>\r\n        );\r\n      } else {\r\n        return <MDBSpinner />;\r\n      }\r\n    } else {\r\n      return <MDBSpinner />;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","import * as create from \"./Statements/Create\";\r\nvar alasql = require(\"alasql\");\r\n\r\nconst initTables = `\r\n    ${create.platform}\r\n    ${create.organization}\r\n    ${create.member}\r\n    ${create.languagePie}\r\n    ${create.repository}\r\n    ${create.languageSlice}\r\n    ${create.statistic}\r\n    ${create.streak}\r\n    ${create.calendar}\r\n    ${create.contrib}\r\n    ${create.organizationHasMember}\r\n    ${create.repositoryHasMember}\r\n    ${create.platformHasOrganization}\r\n    ${create.platformHasRepository}\r\n`;\r\n\r\nexport function Database(dbName) {\r\n  let db = new alasql.Database(dbName);\r\n\r\n  db.exec(initTables);\r\n\r\n  return db;\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","export const platform = `\r\nDROP TABLE IF EXISTS platform;\r\nCREATE TABLE IF NOT EXISTS platform (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    platformName VARCHAR(80) NOT NULL,\r\n    platformUrl VARCHAR(2048) NOT NULL,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    websiteUrl VARCHAR(2048) NOT NULL,\r\n    company VARCHAR(80) NOT NULL,\r\n    email VARCHAR(254) NOT NULL,\r\n    username VARCHAR(80) NOT NULL,\r\n    fullName VARCHAR(80) NOT NULL,\r\n    createdAt DATE NOT NULL,\r\n    location VARCHAR(80) NULL,\r\n    statusMessage VARCHAR(80) NULL,\r\n    statusEmojiHTML VARCHAR(80) NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const organization = `\r\nDROP TABLE IF EXISTS organization;\r\nCREATE TABLE IF NOT EXISTS organization (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    name VARCHAR(80) NOT NULL,\r\n    url VARCHAR(2048) NOT NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const member = `\r\nDROP TABLE IF EXISTS member;\r\nCREATE TABLE IF NOT EXISTS member (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    name VARCHAR(80) NULL,\r\n    username VARCHAR(80) NOT NULL,\r\n    url VARCHAR(2048) NOT NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const languagePie = `\r\nDROP TABLE IF EXISTS languagePie;\r\nCREATE TABLE IF NOT EXISTS languagePie (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    size INT NOT NULL,\r\n    total INT NOT NULL,\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const repository = `\r\nDROP TABLE IF EXISTS repository;\r\nCREATE TABLE IF NOT EXISTS repository (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    avatarUrl VARCHAR(2048) NOT NULL,\r\n    url VARCHAR(2048) NOT NULL,\r\n    name VARCHAR(80) NOT NULL,\r\n    owner_id INT NULL,\r\n    languagePie_id INT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_repository_owner1\r\n        FOREIGN KEY (owner_id)\r\n        REFERENCES member (id),\r\n    CONSTRAINT fk_repository_languagePie1\r\n        FOREIGN KEY (languagePie_id)\r\n        REFERENCES languagePie (id)\r\n);\r\n`;\r\n\r\nexport const languageSlice = `\r\nDROP TABLE IF EXISTS languageSlice;\r\nCREATE TABLE IF NOT EXISTS languageSlice (\r\n    id INT UNSIGNED NOT NULL AUTO_INCREMENT,\r\n    color VARCHAR(7) NULL,\r\n    name VARCHAR(80) NOT NULL,\r\n    size INT NOT NULL,\r\n    pie_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_pie_id\r\n        FOREIGN KEY (pie_id)\r\n        REFERENCES languagePie (id)\r\n);\r\n`;\r\n\r\nexport const statistic = `\r\nDROP TABLE IF EXISTS statistic;\r\nCREATE TABLE IF NOT EXISTS statistic (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    year INT NOT NULL,\r\n    platform_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_statistic_platform\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id)\r\n);\r\n`;\r\n\r\nexport const streak = `\r\nDROP TABLE IF EXISTS streak ;\r\nCREATE TABLE IF NOT EXISTS streak (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    startDate DATE NULL,\r\n    endDate DATE NULL,\r\n    total INT NULL,\r\n    statistic_id INT NOT NULL REFERENCES statistic(id),\r\n    PRIMARY KEY (id)\r\n);\r\n`;\r\n\r\nexport const calendar = `\r\nDROP TABLE IF EXISTS calendar;\r\nCREATE TABLE IF NOT EXISTS calendar (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    date DATE NOT NULL,\r\n    week INT NOT NULL,\r\n    weekday INT NOT NULL,\r\n    total INT NOT NULL,\r\n    color VARCHAR(7) NULL,\r\n    platform_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_calendar_platform1\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id)\r\n);\r\n`;\r\n\r\nexport const contrib = `\r\nDROP TABLE IF EXISTS contrib;\r\nCREATE TABLE IF NOT EXISTS contrib (\r\n    id INT NOT NULL AUTO_INCREMENT,\r\n    datetime DATETIME NOT NULL,\r\n    nameWithOwner VARCHAR(255) NOT NULL,\r\n    repoUrl VARCHAR(255) NOT NULL,\r\n    additions INT NULL,\r\n    deletions INT NULL,\r\n    changedFiles INT NULL,\r\n    type VARCHAR(255) NOT NULL,\r\n    calendar_id INT NOT NULL,\r\n    PRIMARY KEY (id),\r\n    CONSTRAINT fk_contrib_calendar1\r\n        FOREIGN KEY (calendar_id)\r\n        REFERENCES calendar (id)\r\n);\r\n`;\r\n\r\nexport const organizationHasMember = `\r\nDROP TABLE IF EXISTS organization_has_member ;\r\nCREATE TABLE IF NOT EXISTS organization_has_member (\r\n    organization_id INT NOT NULL,\r\n    member_id INT NOT NULL,\r\n    PRIMARY KEY (organization_id, member_id),\r\n    CONSTRAINT fk_organization_has_member_organization1\r\n        FOREIGN KEY (organization_id)\r\n        REFERENCES organization (id),\r\n    CONSTRAINT fk_organization_has_member_member1\r\n        FOREIGN KEY (member_id)\r\n        REFERENCES member (id)\r\n);\r\n`;\r\n\r\nexport const repositoryHasMember = `\r\nDROP TABLE IF EXISTS repository_has_member;\r\nCREATE TABLE IF NOT EXISTS repository_has_member (\r\n    repository_id INT NOT NULL,\r\n    member_id INT NOT NULL,\r\n    PRIMARY KEY (repository_id, member_id),\r\n    CONSTRAINT fk_repository_has_member_repository1\r\n        FOREIGN KEY (repository_id)\r\n        REFERENCES repository (id),\r\n    CONSTRAINT fk_repository_has_member_member1\r\n        FOREIGN KEY (member_id)\r\n        REFERENCES member (id)\r\n);\r\n`;\r\n\r\nexport const platformHasOrganization = `\r\nDROP TABLE IF EXISTS platform_has_organization;\r\nCREATE TABLE IF NOT EXISTS platform_has_organization (\r\n    platform_id INT NOT NULL,\r\n    organization_id INT NOT NULL,\r\n    PRIMARY KEY (platform_id, organization_id),\r\n    CONSTRAINT fk_platform_has_organization_platform1\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id),\r\n    CONSTRAINT fk_platform_has_organization_organization1\r\n        FOREIGN KEY (organization_id)\r\n        REFERENCES organization (id)\r\n);\r\n`;\r\n\r\nexport const platformHasRepository = `\r\nDROP TABLE IF EXISTS platform_has_repository ;\r\nCREATE TABLE IF NOT EXISTS platform_has_repository (\r\n    platform_id INT NOT NULL,\r\n    repository_id INT NOT NULL,\r\n    PRIMARY KEY (platform_id, repository_id),\r\n    CONSTRAINT fk_platform_has_repository_platform1\r\n        FOREIGN KEY (platform_id)\r\n        REFERENCES platform (id),\r\n    CONSTRAINT fk_platform_has_repository_repository1\r\n        FOREIGN KEY (repository_id)\r\n        REFERENCES repository (id)\r\n    );\r\n`;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","export const platform = `\r\nINSERT INTO platform(\r\n    platformName,\r\n    platformUrl,\r\n    avatarUrl,\r\n    websiteUrl,\r\n    company,\r\n    email,\r\n    username,\r\n    fullName,\r\n    createdAt,\r\n    location,\r\n    statusMessage,\r\n    statusEmojiHTML\r\n)\r\nVALUES (?,?,?,?,?,?,?,?,?,?,?,?);\r\n`;\r\n\r\nexport const organization = `\r\nINSERT INTO organization(\r\n    avatarUrl,\r\n    name,\r\n    url\r\n)\r\nVALUES (?,?,?);\r\n`;\r\n\r\nexport const member = `\r\nINSERT INTO member(\r\n    avatarUrl,\r\n    name,\r\n    username,\r\n    url\r\n)\r\nVALUES (?,?,?,?);\r\n`;\r\n\r\nexport const languagePie = `\r\nINSERT INTO languagePie(\r\n    size,\r\n    total\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const repository = `\r\nINSERT INTO repository(\r\n    avatarUrl,\r\n    url,\r\n    name,\r\n    owner_id,\r\n    languagePie_id\r\n)\r\nVALUES (?,?,?,?,?);\r\n`;\r\n\r\nexport const languageSlice = `\r\nINSERT INTO languageSlice(\r\n    name,\r\n    color,\r\n    size,\r\n    pie_id\r\n)\r\nVALUES (?,?,?,?);\r\n`;\r\n\r\nexport const statistic = `\r\nINSERT INTO statistic(\r\n    year,\r\n    platform_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const streak = `\r\nINSERT INTO streak(\r\n    startDate,\r\n    endDate,\r\n    total,\r\n    statistic_id\r\n)\r\nVALUES (?,?,?,?);\r\n`;\r\n\r\nexport const calendar = `\r\nINSERT INTO calendar(\r\n    date,\r\n    week,\r\n    weekday,\r\n    total,\r\n    color,\r\n    platform_id\r\n)\r\nVALUES (?,?,?,?,?,?);\r\n`;\r\n\r\nexport const contrib = `\r\nINSERT INTO contrib(\r\n    datetime,\r\n    nameWithOwner,\r\n    repoUrl,\r\n    additions,\r\n    deletions,\r\n    changedFiles,\r\n    type,\r\n    calendar_id\r\n)\r\nVALUES (?,?,?,?,?,?,?,?);\r\n`;\r\n\r\nexport const platformHasOrganization = `\r\nINSERT INTO platform_has_organization(\r\n    platform_id,\r\n    organization_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const platformHasRepository = `\r\nINSERT INTO platform_has_repository(\r\n    platform_id,\r\n    repository_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const organizationHasMember = `\r\nINSERT INTO organization_has_member(\r\n    organization_id,\r\n    member_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\nexport const repositoryHasMember = `\r\nINSERT INTO repository_has_member(\r\n    repository_id,\r\n    member_id\r\n)\r\nVALUES (?,?);\r\n`;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Database\r\n// Insert statements\r\nimport * as insert from \"../../Database/Statements/Insert\";\r\n// Update statements\r\nimport * as update from \"../../Database/Statements/Update\";\r\n// Get html data from websites\r\nimport * as webscrap from \"../UtilsWebscrap\";\r\nlet db;\r\n\r\n//> Helper functions\r\n// Get calendar week from date\r\nDate.prototype.getWeekNumber = function() {\r\n  var d = new Date(\r\n    Date.UTC(this.getFullYear(), this.getMonth(), this.getDate())\r\n  );\r\n  var dayNum = d.getUTCDay() || 7;\r\n  d.setUTCDate(d.getUTCDate() + 4 - dayNum);\r\n  var yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n  return Math.ceil(((d - yearStart) / 864e5 + 1) / 7);\r\n};\r\n\r\n//> Fill functions\r\n// Fill the platform table with data\r\nconst fillPlatform = async (user) => {\r\n  const url = `https://${user.server}/${user.username}`;\r\n  const html = await webscrap.parseTextToDOM(\r\n    webscrap.fetchHtml(url).then((html) => {\r\n      return html;\r\n    })\r\n  );\r\n  const status = html.getElementsByTagName(\"gl-emoji\")[0];\r\n  const coverDesc = html\r\n    .getElementsByClassName(\"cover-desc\")[0]\r\n    .getElementsByTagName(\"span\");\r\n\r\n  const coverTitle = html.getElementsByClassName(\"cover-title\")[0];\r\n  let avatarUrl = html\r\n    .getElementsByClassName(\"avatar-holder\")[0]\r\n    .getElementsByTagName(\"a\")[0]\r\n    .getAttribute(\"href\");\r\n\r\n  const links = html.getElementsByClassName(\"profile-link-holder\")[0];\r\n  const message = null;\r\n  const emojiHTML = null;\r\n  const fullName = coverDesc[0].innerHTML.trim().substring(1);\r\n  const date = coverDesc[1].innerHTML;\r\n\r\n  if (avatarUrl) {\r\n    if (!avatarUrl.includes(\"https://\") || !avatarUrl.includes(\"http://\")) {\r\n      avatarUrl = `https://${user.server}/${avatarUrl.substring(1)}`;\r\n    }\r\n  }\r\n\r\n  const createdAt = new Date(date);\r\n\r\n  db.exec(insert.platform, [\r\n    user.source,\r\n    url,\r\n    avatarUrl,\r\n    null,\r\n    null,\r\n    null,\r\n    user.username,\r\n    fullName,\r\n    createdAt,\r\n    null,\r\n    message,\r\n    emojiHTML\r\n  ]);\r\n};\r\n\r\nconst fillOrganizations = async (user) => {\r\n  const url = `https://${user.server}/users/${user.username}/groups.json`;\r\n  const html = await webscrap.parseJsonToDOM(\r\n    webscrap.fetchJson(url).then((html) => {\r\n      return html;\r\n    })\r\n  );\r\n\r\n  const rows = html.getElementsByClassName(\"group-row\");\r\n\r\n  for (const _org of Array.from(rows)) {\r\n    let avatarUrl = _org\r\n      .getElementsByClassName(\"avatar\")[0]\r\n      .getAttribute(\"data-src\");\r\n\r\n    const name = _org\r\n      .getElementsByClassName(\"group-name\")[0]\r\n      .getAttribute(\"href\")\r\n      .substring(1);\r\n\r\n    let orgUrl = `https://${user.server}/${name}`;\r\n\r\n    if (avatarUrl) {\r\n      if (!avatarUrl.includes(\"https://\") || !avatarUrl.includes(\"http://\")) {\r\n        avatarUrl = `https://${user.server}/${avatarUrl.substring(1)}`;\r\n      }\r\n    }\r\n\r\n    db.exec(insert.organization, [avatarUrl, name, orgUrl]);\r\n\r\n    var idPlatform = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n    var idOrganization = db.exec(\"SELECT id FROM organization\").pop()[\"id\"];\r\n\r\n    db.exec(insert.platformHasOrganization, [idPlatform, idOrganization]);\r\n  }\r\n};\r\n\r\nconst fillRepositories = (user, nameWithOwner) => {\r\n  let repository = {};\r\n  repository.repoUrl = `https://${user.server}/${nameWithOwner}`;\r\n  repository.avatarUrl = `https://${user.server}/${nameWithOwner}/-/avatar`;\r\n  repository.name = nameWithOwner;\r\n  repository.ownerId = db.exec(\"SELECT id FROM member\").pop();\r\n  repository.languagePieId = db.exec(\"SELECT id FROM languagePie\").pop();\r\n\r\n  if(repository.ownerId){\r\n    repository.ownerId = repository.ownerId.id;\r\n  }\r\n\r\n  if(repository.languagePieId){\r\n    repository.languagePieId = repository.languagePieId.id;\r\n  }\r\n\r\n  const repoExists = db.exec(\r\n    `SELECT id FROM repository WHERE name=\"${repository.name}\"`\r\n  );\r\n  if (repoExists === undefined || repoExists.length === 0) {\r\n    db.exec(insert.repository, [\r\n      repository.avatarUrl,\r\n      repository.repoUrl,\r\n      repository.name,\r\n      repository.ownerId,\r\n      repository.languagePieId\r\n    ]);\r\n\r\n    const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n    const repositoryId = db.exec(\"SELECT id FROM repository\").pop()[\"id\"];\r\n\r\n    db.exec(insert.platformHasRepository, [platformId, repositoryId]);\r\n  }\r\n  return repository;\r\n};\r\n\r\nconst fillContribution = (user, item) => {\r\n  let type;\r\n  if (item.innerHTML.includes(\"pushed to branch\")) {\r\n    type = \"commit\";\r\n  } else if (item.innerHTML.includes(\"opened\")) {\r\n    type = \"issue\";\r\n  } else if (item.innerHTML.includes(\"Merge branch\")) {\r\n    type = \"pullRequest\";\r\n  }\r\n\r\n  let datetime = item.getElementsByTagName(\"time\")[0].getAttribute(\"datetime\");\r\n  datetime = new Date(datetime);\r\n\r\n  let nameWithOwner = item\r\n    .getElementsByClassName(\"event-scope\")[0]\r\n    .getElementsByTagName(\"a\")[0]\r\n    .getAttribute(\"href\");\r\n    \r\n  nameWithOwner = nameWithOwner.substring(1);\r\n\r\n  const repository = fillRepositories(user, nameWithOwner);\r\n  const calendarId = db.exec(\"SELECT id FROM calendar\").pop()[\"id\"];\r\n  db.exec(insert.contrib, [\r\n    datetime,\r\n    nameWithOwner,\r\n    repository.repoUrl,\r\n    null,\r\n    null,\r\n    null,\r\n    type,\r\n    calendarId\r\n  ]);\r\n};\r\n\r\nconst fillCalendar = async (user) => {\r\n  const limit = \"2147483647\";\r\n  const url = `https://${user.server}/${user.username}?limit=${limit}`;\r\n\r\n  const html = await webscrap.parseJsonToDOM(\r\n    webscrap.fetchJson(url).then((html) => {\r\n      return html;\r\n    })\r\n  );\r\n\r\n  const activities = html.getElementsByClassName(\"event-item\");\r\n  for (const item of Array.from(activities)) {\r\n    if (\r\n      item.innerHTML.includes(\"pushed to branch\") ||\r\n      item.innerHTML.includes(\"opened\") ||\r\n      item.innerHTML.includes(\"Merge branch\")\r\n    ) {\r\n      let datetime = item\r\n        .getElementsByTagName(\"time\")[0]\r\n        .getAttribute(\"datetime\");\r\n      datetime = new Date(datetime);\r\n      let date = `${datetime.getFullYear()}-${datetime.getMonth()+1}-${datetime.getDate()}`;\r\n      let week = datetime.getWeekNumber().toString();\r\n      let weekday = datetime.getDay().toString();\r\n\r\n      const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n      const statYear = db.exec(\"SELECT year FROM statistic\").pop();\r\n\r\n      let year = datetime.getFullYear();\r\n\r\n      if(!statYear){\r\n        db.exec(insert.statistic, [year,platformId]);\r\n      }\r\n\r\n      let res = db\r\n        .exec(`SELECT total FROM calendar WHERE date=\"${date}\"`)\r\n        .pop();\r\n      if (res === undefined || res.length === 0) {\r\n        db.exec(insert.calendar, [date, week, weekday, 1, null, platformId]);\r\n      } else {\r\n        let total = res.total;\r\n        total++;\r\n        db.exec(update.calendarTotal, [total, date, platformId]);\r\n      }\r\n\r\n      fillContribution(user, item);\r\n    }\r\n  }\r\n};\r\n\r\n//> Export functions\r\n// Fill the Database from user object\r\nexport const fill = (_db, user) => {\r\n  db = _db;\r\n  return fillPlatform(user).then(\r\n    async () => await fillOrganizations(user).then(await fillCalendar(user))\r\n  );\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Send request functions\r\n// Proxy to bypass CORS\r\nconst proxy = \"https://cors-anywhere.herokuapp.com/\";\r\n\r\n// Fetch JSON from url\r\nexport const fetchJson = (urlIn) => {\r\n  const url = `${proxy}${urlIn}`;\r\n  return fetch(url, {\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\",\r\n      \"X-Requested-With\": \"XMLHttpRequest\"\r\n    }\r\n  })\r\n    .then((res) => res.json())\r\n    .then((res) => {\r\n      return res;\r\n    });\r\n};\r\n\r\n// Fetch HTML from url\r\nexport const fetchHtml = (urlIn) => {\r\n  const url = `${proxy}${urlIn}`;\r\n  return fetch(url, {\r\n    headers: {\r\n      Accept: \"application/json, text/plain, */*\"\r\n    }\r\n  })\r\n    .then((res) => res.text())\r\n    .then((res) => {\r\n      return res;\r\n    });\r\n};\r\n\r\n//> Parser functions\r\n// Parse Json to DOM Object\r\nexport const parseJsonToDOM = (json) => {\r\n  const parser = new DOMParser();\r\n  const html = json.then((res) => {\r\n    return parser.parseFromString(res.html, \"text/html\");\r\n  });\r\n  return html;\r\n};\r\n\r\n//Parse plain text to DOM Object\r\nexport const parseTextToDOM = (json) => {\r\n  const parser = new DOMParser();\r\n  const html = json.then((res) => {\r\n    return parser.parseFromString(res, \"text/html\");\r\n  });\r\n  return html;\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Apollo\r\nimport { ApolloClient } from \"apollo-client\";\r\nimport { HttpLink } from \"apollo-link-http\";\r\nimport {\r\n  InMemoryCache,\r\n  IntrospectionFragmentMatcher\r\n} from \"apollo-cache-inmemory\";\r\n\r\nlet LINK;\r\nlet cache;\r\n\r\nexport const init = (apiLink, authorization) => {\r\n  // Cache setup\r\n  const fragmentMatcher = new IntrospectionFragmentMatcher({\r\n    introspectionQueryResultData: {\r\n      __schema: {\r\n        types: [] // no types provided - works like a charm.ing\r\n      }\r\n    }\r\n  });\r\n  cache = new InMemoryCache({ fragmentMatcher });\r\n\r\n  // Created HttpLink\r\n  LINK = new HttpLink({\r\n    uri: apiLink,\r\n    headers: {\r\n      authorization\r\n    }\r\n  });\r\n  // Apollo client setup\r\n  const client = new ApolloClient({\r\n    cache,\r\n    link: LINK\r\n  });\r\n  return client;\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","export const calendarTotal = `\r\nUPDATE calendar\r\nSET total = ?\r\nWHERE date = ? AND platform_id = ?\r\n`;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","// A tool to save a graphql query into a variable\r\nimport { gql } from \"apollo-boost\";\r\n\r\n// Structure GQL profile code\r\nexport const GET_PROFILE = gql`\r\n  query getData($username: String!) {\r\n    user(login: $username) {\r\n      avatarUrl\r\n      company\r\n      createdAt\r\n      name\r\n      login\r\n      email\r\n      websiteUrl\r\n      hovercard {\r\n        contexts {\r\n          message\r\n          octicon\r\n        }\r\n      }\r\n      isEmployee\r\n      isHireable\r\n      location\r\n      status {\r\n        emojiHTML\r\n        expiresAt\r\n        message\r\n        updatedAt\r\n      }\r\n      organizations(first: 100) {\r\n        pageInfo {\r\n          endCursor\r\n          hasNextPage\r\n        }\r\n        edges {\r\n          node {\r\n            name\r\n            url\r\n            avatarUrl\r\n            name\r\n            membersWithRole(first: 100) {\r\n              totalCount\r\n              nodes {\r\n                name\r\n                login\r\n                avatarUrl\r\n                url\r\n                projectsUrl\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n// Structure GQL calendar code\r\nconst getCalendarQueryPart = (fromYear, toYear, c) => {\r\n  return `\r\n  c${c}: contributionsCollection(from:\"${fromYear}\", to:\"${toYear}\" ){\r\n    contributionYears\r\n    contributionCalendar{\r\n        totalContributions\r\n        weeks{\r\n          contributionDays{\r\n            contributionCount\r\n            date\r\n            color\r\n          }\r\n        }\r\n      }\r\n      commitContributionsByRepository {\r\n        url\r\n        repository {\r\n          defaultBranchRef{\r\n            target{\r\n              ... on Commit{\r\n                changedFiles\r\n                additions\r\n                deletions\r\n                committedDate\r\n                history{\r\n                  totalCount\r\n                  pageInfo{\r\n                    endCursor\r\n                  }\r\n                  nodes{\r\n                    committer{\r\n                      user{\r\n                        login\r\n                      }\r\n                    }\r\n                    committedDate\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n          openGraphImageUrl\r\n          name\r\n          nameWithOwner\r\n          url\r\n          owner{\r\n            avatarUrl\r\n            login\r\n            url\r\n          }\r\n          languages(first: 50, orderBy: {field: SIZE, direction: DESC}) {\r\n            totalCount\r\n            totalSize\r\n            edges {\r\n              size\r\n              node {\r\n                name\r\n                color\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      issueContributionsByRepository {\r\n        repository {\r\n          issues(first:100) {\r\n            nodes{\r\n              createdAt\r\n              author{\r\n                login\r\n              }\r\n            }\r\n          }\r\n          openGraphImageUrl\r\n          name\r\n          nameWithOwner\r\n          url\r\n          owner{\r\n            avatarUrl\r\n            login\r\n            url\r\n          }\r\n          languages(first: 50, orderBy: {field: SIZE, direction: DESC}){\r\n            totalCount\r\n            totalSize\r\n            edges {\r\n              size\r\n              node {\r\n                name\r\n                color\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      pullRequestContributionsByRepository {\r\n        repository {\r\n          pullRequests(first:100) {\r\n            nodes{\r\n              changedFiles\r\n              additions\r\n              deletions\r\n              createdAt\r\n              author{\r\n                login\r\n              }\r\n            }\r\n          }\r\n          openGraphImageUrl\r\n          name\r\n          nameWithOwner\r\n          url\r\n          owner{\r\n            avatarUrl\r\n            login\r\n            url\r\n          }\r\n          languages(first: 50, orderBy: {field: SIZE, direction: DESC}){\r\n            totalCount\r\n            totalSize\r\n            edges {\r\n              size\r\n              node {\r\n                name\r\n                color\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  `;\r\n};\r\n\r\nconst getRepositoryHistory = (owner, name, cursor, index) => {\r\n  return `\r\n  ${owner.replace(/-/g, \"_\")}${name.replace(/-/g, \"_\")}${index}:repository(owner:\"${owner}\", name:\"${name}\"){\r\n    nameWithOwner\r\n    defaultBranchRef{\r\n      target{\r\n        ... on Commit{\r\n          history (after:\"${cursor} ${99+index*100}\"){\r\n            totalCount\r\n            nodes{\r\n              committer{\r\n                user{\r\n                  login\r\n                }\r\n              }\r\n              committedDate\r\n              changedFiles\r\n              additions\r\n              deletions\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n  }\r\n  `;\r\n};\r\n\r\nexport const generateRepositoryHistoryQuery = (bigRepos) => {\r\n  let queryParts = [] ;\r\n  const queries = [];\r\n  const query = (part) => gql`\r\n                  query\r\n                  {\r\n                      ${part}\r\n                  }\r\n  `;\r\n  bigRepos.forEach((repo) => {\r\n    let runtime = ~~(repo.repository.defaultBranchRef.target.history.totalCount / 100);\r\n    let cursor = repo.repository.defaultBranchRef.target.history.pageInfo.endCursor.split(\" \")[0];\r\n    let maxRuntime = 10;\r\n    let partsCount = 0;\r\n    for (let index = 0; index < runtime; index++) {\r\n      if(maxRuntime === 0){\r\n        queries.append(query(queryParts[partsCount]));\r\n        partsCount++;\r\n        maxRuntime = 10;\r\n      }\r\n      queryParts[partsCount] += getRepositoryHistory(repo.repository.owner.login, repo.repository.name, cursor, index);\r\n      \r\n      maxRuntime--;\r\n    }\r\n  });\r\n  return queries;\r\n};\r\n// Generates a dynamic query structure\r\nconst generateCalendarsQuery = (username, createdAtDate) => {\r\n  var currentYear = new Date().getFullYear();\r\n\r\n  var fromDate = new Date(createdAtDate.getFullYear(), 0, 2);\r\n  var toDate = new Date(createdAtDate.getFullYear() + 1, 0, 1);\r\n\r\n  var query = \"\";\r\n  var count = 1;\r\n\r\n  while (fromDate.getFullYear() <= currentYear) {\r\n    query += getCalendarQueryPart(fromDate.toJSON(), toDate.toJSON(), count);\r\n\r\n    fromDate.setFullYear(fromDate.getFullYear() + 1);\r\n    toDate.setFullYear(toDate.getFullYear() + 1);\r\n    count++;\r\n  }\r\n  return query;\r\n};\r\n\r\n// Get calendar basic structure\r\nexport const getCalendar = (username, createdAt) => {\r\n  const query = gql`\r\n    query\r\n      {\r\n        user(login: \"${username}\") {\r\n            ${generateCalendarsQuery(username, createdAt)}\r\n        }\r\n      }\r\n  `;\r\n  return query;\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Database tools\r\n// SQL statements to select data from the database\r\nimport * as insert from \"../../../Database/Statements/Insert\";\r\n\r\nlet db;\r\nlet streak = false;\r\nlet streakStart = \"\";\r\nlet streakTotal = 0;\r\n\r\n//> Helper functions\r\n// Get an Array with Contributions from contributionsByRepository Object\r\nconst genContributionsByRepositories = function* (contributionsByRepository, type, username) {\r\n  for (const repo of contributionsByRepository) {\r\n    switch(type){\r\n      case \"commit\":\r\n        yield repo.repository.defaultBranchRef.target.history.nodes.filter((contrib) => (\r\n        contrib.committer && \r\n        contrib.committer.user && \r\n        contrib.committer.user.login.toLowerCase() === username.toLowerCase())\r\n        ).map((_node) => {\r\n          let con = {};\r\n          con[\"datetime\"] = _node.committedDate;\r\n          con[\"repoNameWithOwner\"] = repo.repository.nameWithOwner;\r\n          con[\"repoUrl\"] = repo.repository.url;\r\n          con[\"additions\"] = repo.repository.defaultBranchRef.target.additions;\r\n          con[\"deletions\"] = repo.repository.defaultBranchRef.target.deletions;\r\n          con[\"changedFiles\"] = repo.repository.defaultBranchRef.target.changedFiles;\r\n          return con;\r\n        });\r\n        break;\r\n      case \"issue\":\r\n        yield repo.repository.issues.nodes.filter((contrib) => (\r\n          contrib.author && \r\n          contrib.author.login && \r\n          contrib.author.login.toLowerCase() === username.toLowerCase())\r\n        ).map((_node) => {\r\n          let con = {};\r\n          con[\"datetime\"] = _node.createdAt;\r\n          con[\"repoNameWithOwner\"] = repo.repository.nameWithOwner;\r\n          con[\"repoUrl\"] = repo.repository.url;\r\n          return con;\r\n        });\r\n        break;\r\n      case \"pullRequest\":\r\n        yield repo.repository.pullRequests.nodes.filter((contrib) => (\r\n          contrib.author &&\r\n          contrib.author.login &&\r\n          contrib.author.login.toLowerCase() === username.toLowerCase())\r\n        ).map((_node) => {\r\n          let con = {};\r\n          con[\"datetime\"] = _node.createdAt;\r\n          con[\"repoNameWithOwner\"] = repo.repository.nameWithOwner;\r\n          con[\"repoUrl\"] = repo.repository.url;\r\n          con[\"additions\"] = _node.additions;\r\n          con[\"deletions\"] = _node.deletions;\r\n          con[\"changedFiles\"] = _node.changedFiles;\r\n          return con;\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n};\r\n\r\n// Get an Array of Days from User Object\r\nconst getDaysArray = (objUser, keys) => {\r\n  let days = [];\r\n  keys.forEach((c) => {\r\n    const year = objUser.calendar[c.toString()];\r\n    for (const [w, week] of year.contributionCalendar.weeks.entries()) {\r\n      for (const [d, day] of week.contributionDays.entries()) {\r\n        days.push(day);\r\n      }\r\n    }\r\n  });\r\n  return days;\r\n};\r\n\r\n// Get an Dictionary of Years from Days Array\r\n// Key: year, Value: Array of Days\r\nconst getYearsDict = (days) => {\r\n  let years = {};\r\n  days.forEach((day) => {\r\n    const year = new Date(day.date).getFullYear();\r\n    if (years[parseInt(year)] === undefined) {\r\n      years[parseInt(year)] = [];\r\n    }\r\n    years[parseInt(year)].push(day);\r\n  });\r\n  return years;\r\n};\r\n\r\n//> Fill functions\r\n// Fill the platform Table\r\nconst fillPlatform = (objUser) => {\r\n  let statusMessage;\r\n  let statusEmojiHTML;\r\n\r\n  if (objUser.profile.status) {\r\n    statusMessage = objUser.profile.status.message;\r\n    statusEmojiHTML = objUser.profile.status.emojiHTML;\r\n  } else {\r\n    statusMessage = null;\r\n    statusEmojiHTML = null;\r\n  }\r\n\r\n  const avatarUrl = objUser.profile.avatarUrl;\r\n  const websiteUrl = objUser.profile.websiteUrl;\r\n  const company = objUser.profile.company;\r\n  const email = objUser.profile.email;\r\n  const fullName = objUser.profile.name;\r\n  const createdAt = objUser.profile.createdAt;\r\n  const location = objUser.profile.location;\r\n  const username = objUser.profile.login;\r\n\r\n  db.exec(insert.platform, [\r\n    \"GitHub\",\r\n    \"https://github.com\",\r\n    avatarUrl,\r\n    websiteUrl,\r\n    company,\r\n    email,\r\n    username,\r\n    fullName,\r\n    createdAt,\r\n    location,\r\n    statusMessage,\r\n    statusEmojiHTML\r\n  ]);\r\n};\r\n\r\n// Fill the member Table with Organization Members\r\nconst fillOrgMembers = (nodes, orgId) => {\r\n  nodes.forEach((_member) => {\r\n    const memberAvatarUrl = _member.avatarUrl;\r\n    const memberName = _member.name;\r\n    const memberWebUrl = _member.url;\r\n    const memberUsername = _member.login;\r\n    db.exec(insert.member, [\r\n      memberAvatarUrl,\r\n      memberName,\r\n      memberUsername,\r\n      memberWebUrl\r\n    ]);\r\n    const memberId = db.exec(\"SELECT id FROM member\").pop()[\"id\"];\r\n    db.exec(insert.organizationHasMember, [orgId, memberId]);\r\n  });\r\n};\r\n\r\n// Fill organization Table\r\nconst fillOrganization = (objUser) => {\r\n  objUser.profile.organizations.edges.forEach((_org) => {\r\n    const avatarUrl = _org.node.avatarUrl;\r\n    const name = _org.node.name;\r\n    const url = _org.node.url;\r\n    db.exec(insert.organization, [avatarUrl, name, url]);\r\n\r\n    const organizationId = db.exec(\"SELECT id FROM organization\").pop()[\"id\"];\r\n    const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n\r\n    db.exec(insert.platformHasOrganization, [platformId, organizationId]);\r\n    fillOrgMembers(_org.node.membersWithRole.nodes, organizationId);\r\n  });\r\n};\r\n\r\n// Prepare data to call functions related to Stats\r\nconst fillStats = (objUser) => {\r\n  let keys = Object.keys(objUser.calendar).filter((str) => {\r\n    return str.match(/c[0-9]+/);\r\n  });\r\n  const days = getDaysArray(objUser, keys);\r\n  const years = getYearsDict(days);\r\n\r\n  Object.keys(years).forEach((y) => {\r\n    const yearObj = years[parseInt(y)];\r\n    const yearNum = y;\r\n    const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n\r\n    db.exec(insert.statistic, [yearNum, platformId]);\r\n\r\n    yearObj.forEach((day) => {\r\n      const dayTotal = day.contributionCount;\r\n      const dayDate = day.date;\r\n\r\n      if (dayTotal !== 0) {\r\n        if (!streak) {\r\n          streak = true;\r\n          streakStart = dayDate;\r\n          streakTotal = dayTotal;\r\n        } else {\r\n          streakTotal += dayTotal;\r\n        }\r\n      } else if (streakTotal !== 0) {\r\n      const statisticId = db.exec(\"SELECT id FROM statistic\").pop()[\"id\"];\r\n      db.exec(insert.streak, [\r\n        new Date(streakStart),\r\n        new Date(new Date(dayDate).getTime() - 24 * 60 * 60 * 1000),\r\n        streakTotal,\r\n        statisticId\r\n      ]);\r\n        streak = false;\r\n        streakStart = \"\";\r\n        streakTotal = 0;\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n// Fill repository Table\r\nconst fillRepository = (_repo) => {\r\n  const repoOwnerId = db.exec(\"SELECT id FROM member\").pop()[\"id\"];\r\n  const name = _repo.repository.name;\r\n  const repoUrl = _repo.repository.url;\r\n  const avatarUrl = _repo.repository.openGraphImageUrl;\r\n  const pieId = db.exec(\"SELECT id FROM languagePie\").pop()[\"id\"];\r\n  db.exec(insert.repository, [avatarUrl, repoUrl, name, repoOwnerId, pieId]);\r\n  const repoId = db.exec(\"SELECT id FROM repository\").pop()[\"id\"];\r\n  const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n  db.exec(insert.platformHasRepository, [platformId, repoId]);\r\n};\r\n\r\n// Fill member Table with Repository Owner\r\nconst fillRepoOwner = (_repo) => {\r\n  const repoOwnerUsername = _repo.repository.owner.login;\r\n  const repoOwnerAvatarUrl = _repo.repository.owner.avatarUrl;\r\n  const repoOwnerName = _repo.repository.owner.name;\r\n  const repoOwnerUrl = _repo.repository.owner.url;\r\n  db.exec(insert.member, [\r\n    repoOwnerAvatarUrl,\r\n    repoOwnerName,\r\n    repoOwnerUsername,\r\n    repoOwnerUrl\r\n  ]);\r\n  fillRepository(_repo);\r\n};\r\n\r\n// Fill languageSlice Table\r\nconst fillLanguageSlice = (_repo) => {\r\n  const pieId = db.exec(\"SELECT id FROM languagePie\").pop()[\"id\"];\r\n  _repo.repository.languages.edges.forEach((_edge) => {\r\n    const nodeName = _edge.node.name;\r\n    const nodeSize = _edge.size;\r\n    const nodeColor = _edge.node.color;\r\n    db.exec(insert.languageSlice, [nodeName, nodeColor, nodeSize, pieId]);\r\n  });\r\n  fillRepoOwner(_repo);\r\n};\r\n\r\n// Fill languagePie Table\r\nconst fillPie = (reposi) => {\r\n  reposi.forEach((_repo) => {\r\n    if (\r\n      db.exec(\"SELECT url from repository WHERE url=?\", [\r\n        _repo.repository.url\r\n      ])[0] === undefined\r\n    ) {\r\n      const languagesCount = _repo.repository.languages.totalCount;\r\n      const languagesSize = _repo.repository.languages.totalSize;\r\n      db.exec(insert.languagePie, [languagesSize, languagesCount]);\r\n      fillLanguageSlice(_repo);\r\n    }\r\n  });\r\n};\r\n\r\n// Prepare data to call Tables related to Repositories\r\nconst fillRepos = (objUser) => {\r\n  let keys = Object.keys(objUser.calendar).filter((str) => {\r\n    return str.match(/c[0-9]+/);\r\n  });\r\n  keys.forEach((c) => {\r\n    const reposi =\r\n      objUser.calendar[c.toString()].commitContributionsByRepository;\r\n    fillPie(reposi);\r\n  });\r\n};\r\n\r\n// Fill contribs Table\r\nconst fillContribs = (contribs, type, calendarId) => {\r\n  contribs.forEach((contrib) => {\r\n    db.exec(insert.contrib, [\r\n      contrib.datetime,\r\n      contrib.repoNameWithOwner,\r\n      contrib.repoUrl,\r\n      contrib.additions,\r\n      contrib.deletions,\r\n      contrib.changedFiles,\r\n      type,\r\n      calendarId\r\n    ]);\r\n  });\r\n};\r\n\r\n// fill calendar Table\r\nconst fillCalendar = (objUser) => {\r\n  let keys = Object.keys(objUser.calendar).filter((str) => {\r\n    return str.match(/c[0-9]+/);\r\n  });\r\n\r\n  const user = db.exec(\"SELECT username FROM platform\").pop()[\"username\"];\r\n\r\n  keys.forEach((c) => {\r\n    const year = objUser.calendar[c.toString()];\r\n\r\n    let octoCats = [];\r\n    for (const [w, week] of year.contributionCalendar.weeks.entries()) {\r\n      for (const [d, day] of week.contributionDays.entries()) {\r\n        const datetime = day.date;\r\n        const date = datetime.split(\"T\")[0];\r\n        const week = w;\r\n        const weekday = d;\r\n        const total = day.contributionCount;\r\n        const color = day.color;\r\n        \r\n        let count = total;\r\n\r\n        if (total >= 0) {\r\n          const platformId = db.exec(\"SELECT id FROM platform\").pop()[\"id\"];\r\n\r\n          db.exec(insert.calendar, [\r\n            date,\r\n            week,\r\n            weekday,\r\n            total,\r\n            color,\r\n            platformId\r\n          ]);\r\n          const calendarId = db.exec(\"SELECT id FROM calendar\").pop()[\"id\"];\r\n\r\n          if (count >= 0) {\r\n            octoCats.push({\r\n              datetime: new Date(datetime),\r\n              total: count,\r\n              calendarId\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const addOctocat = (cat) => {\r\n      let dDay = [];\r\n        for (let index = 0; index < cat.total; index++) {\r\n          dDay.push({\r\n            datetime: cat.datetime,\r\n            repoNameWithOwner: \"octocat\",\r\n            repoUrl: \"https://github.com/octocat\",\r\n            additions: 0,\r\n            deletions: 0,\r\n            changedFiles: 0,\r\n          });\r\n        }\r\n        fillContribs(dDay, \"codeReviews\", cat.calendarId);\r\n    };\r\n\r\n    octoCats.forEach((cat) => {\r\n        addOctocat(cat);\r\n    });\r\n  });\r\n};\r\n\r\n// Fill the Database from User Object\r\nexport const fillDB = (_db, objUser) => {\r\n  db = _db;\r\n  fillPlatform(objUser);\r\n  fillOrganization(objUser);\r\n  fillStats(objUser);\r\n  fillRepos(objUser);\r\n  fillCalendar(objUser);\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Apollo \r\nimport * as apollo from \"./../UtilsApollo\";\r\n// Queries for Apollo\r\nimport * as gqlData from \"./GqlData\";\r\n// Used to put data to database\r\nimport * as translator from \"./Translator\";\r\n\r\n// Get profile and calendar\r\nexport async function fill(db, user) {\r\n  const getPlatform = async (db, username) => {\r\n    const apiLink = \"https://api.github.com/graphql\";\r\n    const authorization = `Bearer ${user.token}`;\r\n    const client = apollo.init(apiLink, authorization);\r\n    const resProfile = await client.query({\r\n      query: gqlData.GET_PROFILE,\r\n      variables: {\r\n        username\r\n      }\r\n    });\r\n\r\n    const { data } = resProfile;\r\n\r\n    // Debugging point\r\n    const createdAtDate = new Date(data.user.createdAt);\r\n\r\n    const resCalendar = await client.query({\r\n      query: gqlData.getCalendar(username, createdAtDate)\r\n    });\r\n\r\n    let allReposWithHistory = {};\r\n    let reposPerName = {};\r\n    Object.values(resCalendar.data.user).forEach((c) => {\r\n      if(c !== \"User\"){\r\n        c.commitContributionsByRepository.forEach((repo) => {\r\n          if(repo.repository.defaultBranchRef.target.history.totalCount >= 100){\r\n            reposPerName[repo.repository.nameWithOwner] = repo;\r\n            \r\n          }\r\n          allReposWithHistory[repo.repository.nameWithOwner] = repo;\r\n        });\r\n      }\r\n    });\r\n    \r\n    const objUser = {};\r\n    objUser.profile = resProfile.data.user;\r\n    objUser.calendar = resCalendar.data.user;\r\n\r\n    translator.fillDB(db, objUser);\r\n  };\r\n  await getPlatform(db, user[\"username\"]);\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","import { Database } from \"../Database\";\r\n// Get all utilities for GitLab\r\nimport * as gitlab from \"../utils/UtilsGitlab\";\r\n// Get all utilities for GitHub\r\nimport * as github from \"../utils/UtilsGithub\";\r\n\r\nlet db = new Database(\"data\");\r\n\r\nexport const exec = (statement, values) => {\r\n  return db.exec(statement, values);\r\n};\r\n\r\nexport async function fill(user) {\r\n  if (user.source === \"github\") {\r\n    await github.fill(db, user);\r\n  } else if (user.source === \"gitlab\") {\r\n    await gitlab.fill(db, user);\r\n  }\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","export const platform = `\r\nSELECT * FROM platform\r\n`;\r\n\r\nexport const organization = `\r\nSELECT\r\n  member.id as mId,\r\n  member.avatarUrl as mAvatarUrl,\r\n  member.name as mName,\r\n  member.username as mUsername,\r\n  member.url as mUrl,\r\n  organization.id as oId,\r\n  organization.avatarUrl as oAvatarUrl,\r\n  organization.name as oName,\r\n  organization.url as oUrl\r\nFROM\r\n  organization\r\nLEFT OUTER JOIN\r\n  organization_has_member\r\n    ON organization.id = organization_has_member.organization_id\r\nLEFT OUTER JOIN\r\n  member\r\n    ON member.id = organization_has_member.member_id\r\n`;\r\n\r\nexport const repository = `\r\nSELECT\r\n  repository.id as rId,\r\n  repository.avatarUrl as rAvatarUrl,\r\n  repository.name as rName,\r\n  repository.languagePie_id as rLanguagePieId,\r\n  owner.avatarUrl as oAvatarUrl,\r\n  owner.name as oName,\r\n  owner.username as oUsername,\r\n  owner.url as oUrl,\r\n  member.id as mId,\r\n  member.avatarUrl as mAvatarUrl,\r\n  member.name as mName,\r\n  member.username as mUsername,\r\n  member.url as mUrl,\r\n  languagePie.id as lId,\r\n  languagePie.size as lSize,\r\n  languagePie.total as lTotal,\r\n  languageSlice.id as sId,\r\n  languageSlice.color as sColor,\r\n  languageSlice.name as sName,\r\n  languageSlice.size as sSize,\r\n  languageSlice.pie_id as sPieId\r\nFROM\r\n  repository\r\nLEFT OUTER JOIN \r\n  member as owner\r\n    ON owner.id = repository.owner_id\r\nLEFT OUTER JOIN\r\n    languagePie\r\n      ON languagePie.id = repository.languagePie_id\r\nLEFT OUTER JOIN \r\n  languageSlice\r\n      ON languageSlice.pie_id = languagePie.id\r\nLEFT OUTER JOIN\r\n  repository_has_member\r\n    ON repository.id = repository_has_member.repository_id\r\nLEFT OUTER JOIN\r\n  member\r\n    ON member.id = repository_has_member.member_id\r\n`;\r\n\r\nexport const language = `\r\nSELECT\r\n  languageSlice.id as sId,\r\n  languageSlice.color as sColor,\r\n  languageSlice.name as sName,\r\n  languageSlice.size as sSize,\r\n  languageSlice.pie_id as sPieId\r\nFROM\r\n  languageSlice\r\n`;\r\n\r\nexport const totalLanguageSize = `\r\nSELECT\r\n  sum(languageSlice.size) as num\r\nFROM\r\n  languageSlice\r\n`;\r\n\r\nexport const calendar = `\r\nSELECT\r\n  calendar.id as cId,\r\n  calendar.date as cDate,\r\n  YEAR(contrib.datetime) as cYear,\r\n  calendar.week as cWeek,\r\n  calendar.weekday as cWeekday,\r\n  calendar.color as cColor,\r\n  contrib.id as ctId,\r\n  contrib.datetime as ctDatetime,\r\n  contrib.nameWithOwner as ctNameWithOwner,\r\n  contrib.repoUrl as ctRepoUrl,\r\n  contrib.additions as ctAdditions,\r\n  contrib.deletions as ctDeletions,\r\n  contrib.changedFiles as ctChangedFiles,\r\n  contrib.type as ctType\r\nFROM\r\n  calendar\r\nJOIN\r\n  contrib\r\n    ON calendar.id = contrib.calendar_id\r\n`;\r\n\r\nexport const totalContributions = `\r\nSELECT\r\n  YEAR(contrib.datetime) as year,\r\n  count(contrib.id) as num\r\nFROM\r\n  contrib\r\nGROUP BY\r\n  YEAR(contrib.datetime)\r\n`;\r\n\r\nexport const baseYearOfPlatforms = `\r\nSELECT \r\n  MIN(YEAR(date)) as baseYear\r\nFROM\r\n  calendar\r\n`;\r\n\r\nexport const statistic = `\r\nSELECT\r\n  statistic.id as sId,\r\n  statistic.year as sYear,\r\n  streak.id as stId,\r\n  streak.startDate as stsDate,\r\n  streak.endDate as steDate,\r\n  streak.total as stTotal,\r\n  streak.statistic_id as stsId\r\nFROM\r\n  statistic\r\nLEFT JOIN\r\n  streak\r\n    ON statistic.id = streak.statistic_id\r\n`;\r\n\r\nexport const contribPerPlatform = `\r\nSELECT\r\n  contrib.id as cId,\r\n  contrib.datetime as cDatetime,\r\n  contrib.nameWithOwner as cNameWithOwner,\r\n  contrib.repoUrl as ctRepoUrl,\r\n  contrib.additions as cAdditions,\r\n  contrib.deletions as cDeletions,\r\n  contrib.changedFiles as cChangedFiles,\r\n  contrib.type as cType,\r\n  platform.id as pId,\r\n  platform.platformName as pName\r\nFROM\r\n  contrib\r\nJOIN\r\n  calendar\r\n    ON contrib.calendar_id = calendar.id\r\nJOIN\r\n  platform\r\n    ON calendar.platform_id = platform.id\r\n`;\r\n\r\nexport const busiestDay = `\r\nSELECT\r\n  date,\r\n  total,\r\n  YEAR(date) as year\r\nFROM\r\n  calendar\r\nWHERE\r\n  total in (\r\n    SELECT\r\n      max(c2.total) as total,\r\n      YEAR(date)\r\n    FROM calendar c2\r\n    GROUP BY YEAR(date)\r\n  )\r\n`;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","// Import all statements\r\nimport * as select from \"../Statements/Select\";\r\n\r\n// Formats a date to YYYY-MM-DD format\r\nconst formatDate = (date) => {\r\n  return date.toISOString().split(\"T\")[0];\r\n};\r\n\r\nexport function getUser(data) {\r\n  let platforms = data.exec(select.platform);\r\n\r\n  // Use information of platform 0 as basic information\r\n  let platform = platforms[0];\r\n  let user = {};\r\n  user.avatarUrl = platform.avatarUrl;\r\n  user.company = platform.company;\r\n  user.createdAt = platform.createdAt;\r\n  user.name = platform.fullName;\r\n  user.username = platform.username;\r\n  user.email = platform.email;\r\n  user.websiteUrl = platform.websiteUrl;\r\n  user.status = platform.status;\r\n  user.statusEmojiHTML = platform.statusEmojiHTML;\r\n  user.isEmployee = false;\r\n  user.isHireable = false;\r\n  user.location = platform.location;\r\n\r\n  return user;\r\n}\r\n\r\nexport function getOrganizations(data) {\r\n  let organizations = data.exec(select.organization);\r\n\r\n  let orgs = {};\r\n  organizations.forEach((orgWithMember) => {\r\n    if (!orgs[orgWithMember.oId]) {\r\n      let org = {};\r\n      org.name = orgWithMember.oName;\r\n      org.url = orgWithMember.oUrl;\r\n      org.avatarUrl = orgWithMember.oAvatarUrl;\r\n      org.memberCount = 0;\r\n      org.members = [];\r\n      orgs[orgWithMember.oId] = org;\r\n    }\r\n\r\n    if (orgWithMember.mId !== undefined) {\r\n      let member = {};\r\n      member.oid = orgWithMember.oId;\r\n      member.name = orgWithMember.mName;\r\n      member.login = orgWithMember.mUsername;\r\n      member.avatarUrl = orgWithMember.mAvatarUrl;\r\n      member.url = orgWithMember.mUrl;\r\n      member.projectsUrl = null;\r\n\r\n      orgs[orgWithMember.oId].memberCount++;\r\n      orgs[orgWithMember.oId].members.push(member);\r\n    }\r\n  });\r\n  return Object.values(orgs);\r\n}\r\n\r\nexport function getRepositories(data) {\r\n  let repositories = data.exec(select.repository);\r\n\r\n  let repos = {};\r\n  repositories.forEach((repoWithExtras) => {\r\n    if (!repos[repoWithExtras.rId]) {\r\n      let repo = {};\r\n      repo.name = repoWithExtras.rName;\r\n      repo.avatarUrl = repoWithExtras.oAvatarUrl;\r\n\r\n      repo.owner = {};\r\n      repo.owner.name = repoWithExtras.oName;\r\n      repo.owner.login = repoWithExtras.oUsername;\r\n      repo.owner.url = repoWithExtras.oUrl;\r\n\r\n      repo.languagePie = {};\r\n      repo.languagePie.size = repoWithExtras.lSize;\r\n      repo.languagePie.total = repoWithExtras.lTotal;\r\n      repo.languagePie.slices = [];\r\n\r\n      repo.members = [];\r\n      repo.memberCount = 0;\r\n\r\n      repos[repoWithExtras.rId] = repo;\r\n    }\r\n\r\n    if (repoWithExtras.mId !== undefined) {\r\n      let member = {};\r\n      member.name = repoWithExtras.mName;\r\n      member.login = repoWithExtras.mUsername;\r\n      member.avatarUrl = repoWithExtras.mAvatarUrl;\r\n      member.url = repoWithExtras.mUrl;\r\n      member.projectsUrl = null;\r\n\r\n      repos[repoWithExtras.rId].memberCount++;\r\n      repos[repoWithExtras.rId].members.push(member);\r\n    }\r\n\r\n    if (repoWithExtras.sId !== undefined) {\r\n      let slice = {};\r\n      slice.name = repoWithExtras.sName;\r\n      slice.color = repoWithExtras.sColor;\r\n      slice.size = repoWithExtras.sSize;\r\n\r\n      repos[repoWithExtras.rId].languagePie.slices.push(slice);\r\n    }\r\n  });\r\n\r\n  return Object.values(repos);\r\n}\r\n\r\nexport function getLanguages(data) {\r\n  let languages = data.exec(select.language);\r\n  let totalSize = data.exec(select.totalLanguageSize)[0].num;\r\n  let pie = {};\r\n  pie.slices = {};\r\n  pie.total = totalSize;\r\n\r\n  languages.forEach((languageSlice) => {\r\n    if (!pie.slices[languageSlice.sName]) {\r\n      let slice = {};\r\n      slice.name = languageSlice.sName;\r\n      slice.color = languageSlice.sColor;\r\n      slice.size = languageSlice.sSize;\r\n      slice.share = Math.round((slice.size / totalSize) * 100 * 100) / 100;\r\n\r\n      pie.slices[languageSlice.sName] = slice;\r\n    } else {\r\n      pie.slices[languageSlice.sName].size += languageSlice.sSize;\r\n      pie.slices[languageSlice.sName].share =\r\n        Math.round(\r\n          (pie.slices[languageSlice.sName].size / totalSize) * 100 * 100\r\n        ) / 100;\r\n    }\r\n  });\r\n  return pie;\r\n}\r\n\r\nexport function getCalendar(data) {\r\n  let calendar = data.exec(select.calendar);\r\n  let baseYear = data.exec(select.baseYearOfPlatforms)[0].baseYear;\r\n\r\n  let calendarGrid = {};\r\n  let today = new Date();\r\n  if(!baseYear){\r\n    baseYear = today.getFullYear();\r\n  }\r\n\r\n  // Loop for each day of the year\r\n  for (let indexY = baseYear; indexY <= new Date().getFullYear(); indexY++) {\r\n    let date = new Date(indexY, 0, 1);\r\n    let offset = 0;\r\n    date.setDate(date.getDate() - date.getDay() - offset);\r\n    calendarGrid[indexY] = generateCalendarGrid(date, true);\r\n  }\r\n\r\n  today.setDate(today.getDate() + 1);\r\n\r\n  calendar.forEach((day) => {\r\n    if (day.cYear) {\r\n      calendarGrid[day.cYear].total++;\r\n      calendarGrid[day.cYear].weeks[day.cWeek].contributionDays[day.cWeekday]\r\n        .total++;\r\n      calendarGrid[day.cYear].weeks[day.cWeek].contributionDays[\r\n        day.cWeekday\r\n      ].color = day.cColor;\r\n    }\r\n  });\r\n\r\n  let nowYear = dictCalendarToArray(calendarGrid)[today.getFullYear()];\r\n  let lastYear = dictCalendarToArray(calendarGrid)[today.getFullYear() - 1];\r\n\r\n  let nowDate = new Date();\r\n  let contributionDays = [];\r\n  nowYear.weeks.reverse().forEach((week) => {\r\n    week.contributionDays.reverse().forEach((day) => {\r\n      if (new Date(day.date) < nowDate) {\r\n        contributionDays.push(day);\r\n      }\r\n    });\r\n  });\r\n\r\n  if (lastYear !== undefined) {\r\n    lastYear.weeks.reverse().forEach((week) => {\r\n      week.contributionDays.reverse().forEach((day) => {\r\n        if (contributionDays.length <= 371 + nowDate.getDay()) {\r\n          contributionDays.push(day);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  let currentCalendar = getCalendarFromDates(contributionDays.reverse());\r\n\r\n  for (let [k, v] of Object.entries(dictCalendarToArray(calendarGrid))) {\r\n    calendarGrid[k] = calculateColorsForCalendarDay(v);\r\n  }\r\n\r\n  return {\r\n    years: calendarGrid,\r\n    currentYear: calculateColorsForCalendarDay(currentCalendar)\r\n  };\r\n}\r\n\r\nconst getCalendarFromDates = (fullDays) => {\r\n  let year = {};\r\n  let count = 0;\r\n  year.weeks = [];\r\n  year.total = 0;\r\n  year.fromDate = new Date(fullDays[0].date);\r\n  year.toDate = new Date(fullDays[fullDays.length - 1].date);\r\n\r\n  for (let indexW = 0; indexW <= 53; indexW++) {\r\n    let week = {};\r\n    week.contributionDays = [];\r\n    for (let indexD = 0; indexD <= 6; indexD++) {\r\n      if (fullDays[count] !== undefined) {\r\n        year.total += fullDays[count].total;\r\n        week.contributionDays.push(fullDays[count]);\r\n      }\r\n      count++;\r\n    }\r\n    year.weeks.push(week);\r\n  }\r\n  return year;\r\n};\r\n\r\n// Generate the grid used for a calendar\r\nconst generateCalendarGrid = (date, flag) => {\r\n  let emptyContributionYear = {};\r\n  emptyContributionYear.weeks = {};\r\n  emptyContributionYear.total = 0;\r\n\r\n  for (let indexW = 0; indexW < 53; indexW++) {\r\n    let week = {};\r\n    week.contributionDays = {};\r\n\r\n    for (let indexD = 0; indexD <= 6; indexD++) {\r\n      let day = {};\r\n      if (flag) {\r\n        date.setDate(date.getDate() + 1);\r\n      } else {\r\n        date.setDate(date.getDate() - 1);\r\n      }\r\n      day.total = 0;\r\n      day.date = formatDate(new Date(date));\r\n      day.color = \"#ffffff\";\r\n      week.contributionDays[indexD] = day;\r\n    }\r\n\r\n    emptyContributionYear.weeks[indexW] = week;\r\n  }\r\n  return emptyContributionYear;\r\n};\r\n\r\n// Fill the raw calendar structure with the correct colors\r\nconst calculateColorsForCalendarDay = (calendarYear) => {\r\n  let busiestDay = 0;\r\n  // Calculate busiest day of the year\r\n  calendarYear.weeks.forEach((_week) => {\r\n    _week.contributionDays.forEach((_day) => {\r\n      if (_day.total > busiestDay) {\r\n        busiestDay = _day.total;\r\n      }\r\n    });\r\n  });\r\n\r\n  calendarYear.weeks.forEach((_week) => {\r\n    _week.contributionDays.forEach((_day) => {\r\n      let precision = _day.total / busiestDay;\r\n      if (precision > 0.8 && precision <= 1) {\r\n        _day.color = \"#196127\";\r\n      } else if (precision > 0.6 && precision <= 0.8) {\r\n        _day.color = \"#239a3b\";\r\n      } else if (precision > 0.4 && precision <= 0.6) {\r\n        _day.color = \"#7bc96f\";\r\n      } else if (precision > 0.0 && precision <= 0.4) {\r\n        _day.color = \"#c6e48b\";\r\n      } else if (precision === 0) {\r\n        _day.color = \"#ebedf0\";\r\n      }\r\n    });\r\n  });\r\n\r\n  return calendarYear;\r\n};\r\n\r\nfunction dictCalendarToArray(dict) {\r\n  let obj = JSON.parse(JSON.stringify(dict));\r\n  for (let year in dict) {\r\n    for (let week in dict[year].weeks) {\r\n      obj[year].weeks[week].contributionDays = [];\r\n      for (let day in dict[year].weeks[week].contributionDays) {\r\n        obj[year].weeks[week].contributionDays.push(\r\n          dict[year].weeks[week].contributionDays[day]\r\n        );\r\n      }\r\n    }\r\n    obj[year].weeks = Object.values(obj[year].weeks);\r\n  }\r\n  return obj;\r\n}\r\n\r\nexport function getStats(data) {\r\n  let stats = data.exec(select.statistic);\r\n  let totalContributionsPerYear = {};\r\n  let bDays = {};\r\n\r\n  data.exec(select.totalContributions).forEach((elem) => {\r\n    totalContributionsPerYear[elem.year] = elem.num;\r\n  });\r\n  \r\n  data.exec(select.busiestDay).forEach((elem) => {\r\n    let busiestDay = {};\r\n    busiestDay.date = elem.date;\r\n    busiestDay.total = elem.total;\r\n\r\n    bDays[elem.year] = busiestDay;\r\n  });\r\n\r\n  let statistics = {};\r\n\r\n  stats.forEach((stat) => {\r\n    if (!statistics[stat.sYear]) {\r\n      let busiestDay = {};\r\n      busiestDay.date = bDays[stat.sYear].date;\r\n      busiestDay.total = bDays[stat.sYear].total;\r\n      let statistic = {};\r\n      statistic.streaks = [];\r\n      statistic.busiestDay = busiestDay;\r\n      statistic.average =\r\n        Math.round((totalContributionsPerYear[stat.sYear] / 365) * 100) / 100;\r\n      statistic.longestStreak = {};\r\n      statistic.longestStreak.total = 0;\r\n      statistic.currentStreak = {};\r\n      statistic.currentStreak.total = 0;\r\n\r\n      statistics[stat.sYear] = statistic;\r\n    }\r\n\r\n    if(stat.stId !== undefined){\r\n      let streak = {};\r\n    streak.startDate = stat.stsDate;\r\n    streak.endDate = stat.steDate;\r\n    streak.total = stat.stTotal;\r\n    statistics[stat.sYear].streaks.push(streak);\r\n\r\n    // To calculate the no. of days between two dates\r\n    const dateDiff = (date1, date2) =>\r\n      Math.ceil((date2.getTime() - date1.getTime()) / (1000 * 3600 * 24));\r\n\r\n    let streakDiff = dateDiff(streak.startDate, streak.endDate);\r\n    if (statistics[stat.sYear].longestStreak.total <= streakDiff) {\r\n      statistics[stat.sYear].longestStreak.total = streakDiff;\r\n      statistics[stat.sYear].longestStreak.startDate = streak.startDate;\r\n      statistics[stat.sYear].longestStreak.endDate = streak.endDate;\r\n    }\r\n\r\n    let today = new Date();\r\n\r\n    if (\r\n      streak.endDate.getFullYear() === today.getFullYear() &&\r\n      streak.endDate.getMonth() === today.getMonth() &&\r\n      streak.endDate.getDate() === today.getDate()\r\n    ) {\r\n      statistics[stat.sYear].currentStreak.startDate = streak.startDate;\r\n      statistics[stat.sYear].currentStreak.endDate = streak.endDate;\r\n      statistics[stat.sYear].currentStreak.total = dateDiff(\r\n        streak.startDate,\r\n        streak.endDate\r\n      );\r\n    }\r\n  }\r\n  });\r\n  return statistics;\r\n}\r\n\r\nexport function getContribTypes(data) {\r\n  let contribPerPlatforms = data.exec(select.contribPerPlatform);\r\n\r\n  let contribTypes = {};\r\n  contribTypes.platform = {};\r\n  contribTypes.user = {};\r\n  contribTypes.contribs = {};\r\n\r\n  contribPerPlatforms.forEach((contribPerPlatform) => {\r\n    if (!contribTypes.platform[contribPerPlatform.pName]) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n\r\n      contribTypes.platform[contribPerPlatform.pName] = platform;\r\n    }\r\n\r\n    contribTypes.platform[contribPerPlatform.pName].count++;\r\n    contribTypes.platform[contribPerPlatform.pName].share =\r\n      Math.round(\r\n        (contribTypes.platform[contribPerPlatform.pName].count /\r\n          contribPerPlatforms.length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (!contribTypes.user[contribPerPlatform.pId]) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n      platform.name = contribPerPlatform.pName;\r\n\r\n      contribTypes.user[contribPerPlatform.pId] = platform;\r\n    }\r\n\r\n    contribTypes.user[contribPerPlatform.pId].count++;\r\n    contribTypes.user[contribPerPlatform.pId].share =\r\n      Math.round(\r\n        (contribTypes.user[contribPerPlatform.pId].count /\r\n          contribPerPlatforms.length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (!contribTypes.contribs[contribPerPlatform.cType]) {\r\n      let type = {};\r\n      type.share = 0;\r\n      type.count = 0;\r\n      type.platform = {};\r\n      type.user = {};\r\n\r\n      contribTypes.contribs[contribPerPlatform.cType] = type;\r\n    }\r\n\r\n    contribTypes.contribs[contribPerPlatform.cType].count++;\r\n    contribTypes.contribs[contribPerPlatform.cType].share =\r\n      Math.round(\r\n        (contribTypes.contribs[contribPerPlatform.cType].count /\r\n          contribPerPlatforms.length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (\r\n      !contribTypes.contribs[contribPerPlatform.cType].platform[\r\n        contribPerPlatform.pName\r\n      ]\r\n    ) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n\r\n      contribTypes.contribs[contribPerPlatform.cType].platform[\r\n        contribPerPlatform.pName\r\n      ] = platform;\r\n    }\r\n\r\n    contribTypes.contribs[contribPerPlatform.cType].platform[\r\n      contribPerPlatform.pName\r\n    ].count++;\r\n    contribTypes.contribs[contribPerPlatform.cType].platform[\r\n      contribPerPlatform.pName\r\n    ].share =\r\n      Math.round(\r\n        (contribTypes.contribs[contribPerPlatform.cType].platform[\r\n          contribPerPlatform.pName\r\n        ].count /\r\n          contribPerPlatforms.filter((elem) => {\r\n            return elem.cType === contribPerPlatform.cType;\r\n          }).length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n\r\n    if (\r\n      !contribTypes.contribs[contribPerPlatform.cType].user[\r\n        contribPerPlatform.pId\r\n      ]\r\n    ) {\r\n      let platform = {};\r\n      platform.share = 0;\r\n      platform.count = 0;\r\n      platform.name = contribPerPlatform.pName;\r\n\r\n      contribTypes.contribs[contribPerPlatform.cType].user[\r\n        contribPerPlatform.pId\r\n      ] = platform;\r\n    }\r\n\r\n    contribTypes.contribs[contribPerPlatform.cType].user[contribPerPlatform.pId]\r\n      .count++;\r\n    contribTypes.contribs[contribPerPlatform.cType].user[\r\n      contribPerPlatform.pId\r\n    ].share =\r\n      Math.round(\r\n        (contribTypes.contribs[contribPerPlatform.cType].user[\r\n          contribPerPlatform.pId\r\n        ].count /\r\n          contribPerPlatforms.filter((elem) => {\r\n            return elem.cType === contribPerPlatform.cType;\r\n          }).length) *\r\n          100 *\r\n          100\r\n      ) / 100;\r\n  });\r\n\r\n  return contribTypes;\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","// Import Database\r\nimport * as data from \"./IntelData\";\r\n//import * as data from \"./IntelDummy\";\r\n\r\n// Import Converter\r\nimport * as converter from \"./Database/Converter\";\r\n\r\n// Return the database with user values\r\nexport async function fill(userList) {\r\n\r\n  async function retry(maxRetries, fn, params) {\r\n      return await fn(...params).catch(() => {\r\n        if (maxRetries <= 0) {\r\n          throw new Error(`Could not fetch data after ${maxRetries} retries... Please try again later!`);\r\n        }\r\n        return retry(maxRetries - 1, fn, params);\r\n      });\r\n  }\r\n\r\n  for (let index = 0; index < userList.length; index++) {\r\n    const user = userList[index];\r\n    const maxRetries = 5;\r\n      await retry(maxRetries, data.fill, [user]).catch((err) => {\r\n        throw err;\r\n      });\r\n    \r\n  }\r\n}\r\n\r\nexport function templateSelect() {\r\n  return data.exec(\"SELECT * FROM statistic\");\r\n}\r\n\r\nexport function user() {\r\n  try{\r\n    return converter.getUser(data);\r\n  }\r\n  catch{\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function repos() {\r\n  try{\r\n    return converter.getRepositories(data);\r\n  }\r\n  catch{\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function orgs() {\r\n  try{\r\n    return converter.getOrganizations(data);\r\n  }\r\n  catch{\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function languages() {\r\n  try{\r\n    return converter.getLanguages(data);\r\n  }\r\n  catch{\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function calendar() {\r\n  try{\r\n    return converter.getCalendar(data);\r\n  }\r\n  catch{\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function stats() {\r\n  try{\r\n    return converter.getStats(data);\r\n  }\r\n  catch{\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport function contribTypes() {\r\n  try{\r\n    return converter.getContribTypes(data);\r\n  }\r\n  catch{\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Import Packages\r\n// Radom Generator\r\nimport { guid } from \"../services/utilities\";\r\n// Functionality for the provider\r\nimport { IProvider } from \"react-very-simple-oauth\";\r\n\r\n// Set the default values needed for an OAuth-Request\r\nconst client_id = \"2148629809594d57c113\";\r\nconst client_secret = \"64a37e4846387cfcaea35d83afca3c9c8689628c\";\r\nconst state = guid();\r\nconst redirect_uri = encodeURIComponent(\"https://snek.at/redirect\");\r\nconst proxyUrl = \"https://cors-anywhere.herokuapp.com/\";\r\n\r\nexport const githubProvider: IProvider<boolean> = {\r\n  //Get Request to the GitHub OAuth Authorize-Site\r\n  buildAuthorizeUrl(): string {\r\n    return `https://github.com/login/oauth/authorize?redirect_uri=${redirect_uri}\r\n        &client_id=${client_id}\r\n        &client_secret=${client_secret}\r\n        &scope=repo, user:email, read:user, read:org\r\n        &state=${state}`;\r\n  },\r\n\r\n  // Catch any error that appears during the OAuth process\r\n  extractError(redirectUrl: string): Error | undefined {\r\n    const errorMatch = redirectUrl.match(/error=([^&]+)/);\r\n    if (!errorMatch) {\r\n      return undefined;\r\n    }\r\n\r\n    const errorReason = errorMatch[1];\r\n    const errorDescriptionMatch = redirectUrl.match(\r\n      /error_description=([^&]+)/,\r\n    );\r\n    const errorDescription = errorDescriptionMatch\r\n      ? errorDescriptionMatch[1]\r\n      : \"\";\r\n    return new Error(\r\n      `Error during login. Reason: ${errorReason} Description: ${errorDescription}`,\r\n    );\r\n  },\r\n\r\n  // This function catches the returned value\r\n  async extractSession(redirectUrl: string) {\r\n    let data = null;\r\n    let code = null;\r\n    const codeMatch = redirectUrl.match(/code=([^&]+)/);\r\n    if (codeMatch) {\r\n      code = codeMatch[1];\r\n    }\r\n\r\n    let state = null;\r\n    const stateMatch = redirectUrl.match(/state=([^&]+)/);\r\n    if (stateMatch) {\r\n      state = stateMatch[1];\r\n    }\r\n\r\n    const AuthorizeUrl = `${proxyUrl}https://github.com/login/oauth/access_token?code=${code}\r\n        &client_secret=${client_secret}&client_id=${client_id}&redirect_uri=${redirect_uri}&state=${state}`;\r\n\r\n    // POST request to get the access token from GitHub\r\n    await fetch(AuthorizeUrl, {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Access-Allow-Credentials\": \"True\",\r\n        \"Access-Control-Allow-Methods\": \"POST\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        \"Content-Type\": \"application/json\",\r\n        Vary: \"Origin\",\r\n      },\r\n      method: \"POST\",\r\n    })\r\n    .then(async res => await res.json())\r\n    .then(async res => {\r\n      const access_token = res.access_token\r\n      // GET request to get the user used for OAuth \r\n      await fetch(`https://api.github.com/user?access_token=${access_token}`)\r\n      .then(async res => await res.json())\r\n      .then(res => {\r\n        data = {'username':res.login, 'access_token': access_token};\r\n        return data;\r\n      });\r\n    });\r\n    return data;\r\n  },\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","export function guid() {\r\n  var d = new Date().getTime();\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\r\n    var r = (d + Math.random() * 16) % 16 | 0;\r\n    d = Math.floor(d / 16);\r\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\r\n  });\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> Additional packages\r\n// Functionality for the provider\r\nimport { IProvider } from \"react-very-simple-oauth\";\r\n\r\nexport const gitlabProvider: IProvider<boolean> = {\r\n  //Get Request to the GitHub OAuth Authorize-Site\r\n  buildAuthorizeUrl(): string {\r\n    return `https://snek.at/gitlab`;\r\n  },\r\n\r\n  // Catch any error that appears during the login process\r\n  extractError(redirectUrl: string): Error | undefined {\r\n    const errorMatch = redirectUrl.match(/error=([^&]+)/);\r\n    if (!errorMatch) {\r\n      return undefined;\r\n    }\r\n\r\n    const errorReason = errorMatch[1];\r\n    const errorDescriptionMatch = redirectUrl.match(\r\n      /error_description=([^&]+)/,\r\n    );\r\n    const errorDescription = errorDescriptionMatch\r\n      ? errorDescriptionMatch[1]\r\n      : \"\";\r\n    return new Error(\r\n      `Error during login. Reason: ${errorReason} Description: ${errorDescription}`,\r\n    );\r\n  },\r\n\r\n  // This function catches the the returned value\r\n  async extractSession(redirectUrl: string) {\r\n    let server = null;\r\n    let username = null;\r\n    const usernameMatch = redirectUrl.match(/username=([^&]+)/);\r\n    if (usernameMatch) {\r\n      username = usernameMatch[1].replace(/__/g,\".\");\r\n    }\r\n\r\n    const serverMatch = redirectUrl.match(/server=([^&]+)/);\r\n    if (serverMatch) {\r\n      server = serverMatch[1].replace(/__/g,\".\");\r\n    }\r\n\r\n    const data = {'server': server, 'username': username}\r\n    return data;\r\n  },\r\n};\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> Additional modules\r\n// Used to hash the password with SHA256\r\nimport { sha256 } from \"js-sha256\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBCardFooter,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n  MDBCardText,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBBadge,\r\n  MDBTooltip,\r\n  MDBPopover,\r\n  MDBPopoverHeader,\r\n  MDBPopoverBody,\r\n  MDBIcon,\r\n  toast,\r\n  ToastContainer,\r\n  MDBContainer,\r\n} from \"mdbreact\";\r\n\r\n//> CSS\r\nimport \"./register.scss\";\r\n\r\n//> Intel\r\nimport * as intel from \"../../../../intel\";\r\n\r\n//> Auth\r\nimport { githubProvider } from \"../../../../intel/OAuthGithub/providers/github\";\r\nimport { gitlabProvider } from \"../../../../intel/AuthGitLab/providers/gitlab\";\r\nimport RSA from \"react-very-simple-oauth\";\r\n\r\n//> Apollo\r\nimport { graphql } from \"react-apollo\";\r\nimport * as compose from \"lodash.flowright\";\r\nimport { gql } from \"apollo-boost\";\r\n\r\n//> Queries / Mutations\r\n// Register mutation\r\nconst CREATE_USER_MUTATION = gql`\r\n  mutation register($token: String!, $values: GenericScalar!) {\r\n    registrationFormPage(token: $token, url: \"/registration\", values: $values) {\r\n      result\r\n      errors {\r\n        name\r\n        errors\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nclass Register extends React.Component{\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    password1: \"\",\r\n    username: \"\",\r\n    server: \"\",\r\n    oAuthGitHubButton: true,\r\n    oAuthGitHubData: null,\r\n    AuthGitLabButton: true,\r\n    sourceList: [],\r\n    customUsername: false,\r\n    usernames: [],\r\n  }\r\n\r\n  addToUsernames = (username) => {\r\n    let usernames = this.state.usernames;\r\n    if(!usernames.includes(username)){\r\n      usernames.push(username);\r\n      this.setState({\r\n        usernames\r\n      });\r\n    }\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  connectGitHub = async () => {\r\n    this.setState({\r\n      oAuthGitHubButton: false\r\n    });\r\n\r\n    const data = await RSA.acquireTokenAsync(githubProvider);\r\n    this.setState({\r\n      oAuthGitHubButton: true,\r\n    }, () => this.pushToSourceList(\"github\", data.username, \"github.com\", data.access_token));\r\n  }\r\n\r\n  connectGitLab = async () => {\r\n    this.setState({\r\n      AuthGitLabButton: false\r\n    });\r\n\r\n    const data = await RSA.acquireTokenAsync(gitlabProvider);\r\n    this.setState({\r\n      AuthGitLabButton: true,\r\n    }, () => this.pushToSourceList(\"gitlab\", data.username, data.server, data.token));\r\n  }\r\n\r\n  pushToSourceList = (source, username, server, token) => {\r\n    let sourceList = this.state.sourceList;\r\n\r\n    this.addToUsernames(username);\r\n\r\n    sourceList.push({\r\n      id: Math.random() * username.length + source.length,\r\n      source,\r\n      username,\r\n      server,\r\n      token,\r\n    });\r\n    \r\n    // Set the new list of user information\r\n    this.setState({\r\n      sourceList,\r\n      username: this.state.username ? this.state.username : sourceList[0].username\r\n    });\r\n  }\r\n\r\n  removeSource = (id) => {\r\n    let sourceList = this.state.sourceList.filter(function( obj ) {\r\n        return obj.id !== id;\r\n    });\r\n    this.setState({\r\n      sourceList\r\n    });\r\n  }\r\n\r\n  logMeIn = (event) => {\r\n    // 'keypress' event misbehaves on mobile so we track 'Enter' key via 'keydown' event\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.handleSubmit();\r\n    }\r\n  }\r\n\r\n  handleUserNamePick = (username) => {\r\n    this.setState({\r\n      username\r\n    });\r\n  }\r\n  // Handle sumbit with JWT, send to engine.snek.at/api/graphiql\r\n  handleSubmit = async () => {\r\n    // JWT token\r\n    let token = this.props.token;\r\n\r\n    // Cache data\r\n    let cache = {};\r\n    intel\r\n    .fill(this.state.sourceList)\r\n    .then(() => {\r\n      intel.calendar();\r\n      intel.stats();\r\n      intel.repos();\r\n    })\r\n    .then(() => {\r\n      cache = {\r\n        logged: true,\r\n        contrib: intel.stats(),\r\n        contribCalendar: intel.calendar(),\r\n        contribTypes: intel.contribTypes(),\r\n        user: intel.user(),\r\n        orgs: intel.orgs(),\r\n        languages: intel.languages(),\r\n        repos: intel.repos(),\r\n      };\r\n    })\r\n    .then(() => {\r\n      let values = {\r\n        sources: JSON.stringify(this.state.sourceList),\r\n        username: this.state.username,\r\n        email: this.state.email,\r\n        password: sha256(this.state.password),\r\n        \"platform_data\": JSON.stringify(cache)\r\n      };\r\n      this.props.register({\r\n        variables: { \r\n        token,\r\n        values\r\n      }\r\n      })\r\n      .then((result) => {\r\n          if (result.message === \"FAIL\")\r\n          {\r\n            this.notify(\"warn\",\"All fields have to be filled!\");\r\n          }\r\n          else \r\n          {\r\n            this.notify(\"success\",\" Welcome to SNEK!\");\r\n          }\r\n      })\r\n      .catch((error) => {\r\n          if (error.message.includes(\"Authentication required\"))\r\n          {\r\n            this.notify(\"success\",\" Welcome to SNEK!\");\r\n          }\r\n          else if (error.message.includes(\"Duplicate entry\"))\r\n          {\r\n            this.notify(\"warn\",\" Username already taken!\");\r\n          }\r\n          else\r\n          {\r\n            this.notify(\"error\", \"Something went wrong!\");\r\n          }\r\n      });\r\n    });\r\n  }\r\n\r\n  notify = (type, message) => {\r\n      if (type === \"success\") {\r\n        toast.success(\r\n          <div>\r\n            <MDBIcon\r\n            icon=\"lock-open\"\r\n            className=\"text ml-2 cursor-pointer\"\r\n            />\r\n            {message}\r\n          </div>\r\n        );\r\n      }\r\n      if (type === \"error\"){\r\n        toast.error(\r\n          <div>\r\n            <MDBIcon\r\n            icon=\"lock\"\r\n            className=\"text ml-2 cursor-pointer\"\r\n            />\r\n            {message}\r\n          </div>\r\n        );\r\n      }\r\n      if (type === \"warn\"){\r\n        toast.warn(\r\n          <div>\r\n            <MDBIcon\r\n            icon=\"exclamation-triangle\"\r\n            className=\"text ml-2 cursor-pointer\"\r\n            />\r\n            {message}\r\n          </div>\r\n        );\r\n      }\r\n  };\r\n\r\n  render(){\r\n    return(\r\n      <MDBCard id=\"register\" className=\"text-dark\">\r\n        <ToastContainer\r\n        hideProgressBar={true}\r\n        newestOnTop={true}\r\n        autoClose={5000}\r\n        />\r\n        <MDBCardBody>\r\n          <h2>Join us</h2>\r\n          <MDBInput\r\n          label=\"Email\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          outline\r\n          value={this.state.email}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <div>\r\n            <div>\r\n              <p className=\"lead\">Connect your work</p>\r\n              <small>\r\n              You can connect multiple accounts - even from the same platform.\r\n              </small>\r\n            </div>\r\n            <MDBTooltip\r\n              placement=\"bottom\"\r\n            >\r\n              <MDBBtn \r\n              floating \r\n              color=\"orange\" \r\n              className=\"mx-1\" \r\n              onClick={this.connectGitLab}\r\n              disabled={!this.state.AuthGitLabButton}\r\n              >\r\n                <MDBIcon fab icon=\"gitlab\" />\r\n              </MDBBtn>\r\n              <div>\r\n                  Link GitLab account\r\n              </div>\r\n            </MDBTooltip>\r\n            <MDBTooltip\r\n              placement=\"bottom\"\r\n            >\r\n              <MDBBtn \r\n              floating\r\n              social=\"git\"\r\n              className=\"mx-1\"\r\n              onClick={this.connectGitHub}\r\n              disabled={!this.state.oAuthGitHubButton}\r\n              >\r\n                <MDBIcon fab icon=\"github\" />\r\n              </MDBBtn>\r\n                <div>\r\n                  Link GitHub account\r\n              </div>\r\n            </MDBTooltip>\r\n            <MDBTooltip\r\n              placement=\"bottom\"\r\n            >\r\n              <MDBBtn floating social=\"blue\" className=\"mx-1\" disabled>\r\n                <MDBIcon fab icon=\"bitbucket\" />\r\n              </MDBBtn>\r\n              <div>\r\n                Link Bitbucket account\r\n              </div>\r\n            </MDBTooltip>\r\n          </div>\r\n          <div>\r\n            <MDBListGroup>\r\n            {this.state.sourceList.map((source, i) => {\r\n              return(\r\n                <MDBListGroupItem \r\n                className={\"list-item-\"+source.source}\r\n                key={i}\r\n                >\r\n                  <div>\r\n                  <MDBIcon \r\n                  fab\r\n                  icon={source.source}\r\n                  className=\"company-icon\"\r\n                  />\r\n                  {source.username}\r\n                  <MDBPopover\r\n                    placement=\"right\"\r\n                    domElement\r\n                    clickable\r\n                    popover\r\n                    tag=\"span\"\r\n                    id=\"popper1\"\r\n                  >   \r\n                    <span>\r\n                    <MDBIcon\r\n                    icon=\"check\"\r\n                    className=\"text-success ml-2 cursor-pointer\"\r\n                    />\r\n                    </span>\r\n                    <div>\r\n                      <MDBPopoverHeader>Verified</MDBPopoverHeader>\r\n                      <MDBPopoverBody>\r\n                        <MDBRow className=\"justify-content-center align-items-center m-0\">\r\n                          <MDBCol size=\"auto\" className=\"p-0 text-success\">\r\n                            <MDBIcon icon=\"award\" size=\"3x\" />\r\n                          </MDBCol>\r\n                          <MDBCol className=\"p-0 pl-3\">\r\n                            This source has been <strong className=\"text-success\">verified</strong> by logging into it.\r\n                          </MDBCol>\r\n                        </MDBRow>\r\n                      </MDBPopoverBody>\r\n                    </div>\r\n                  </MDBPopover>\r\n                  </div>\r\n                  <MDBIcon \r\n                  icon=\"times\"\r\n                  className=\"close-icon\"\r\n                  onClick={() => this.removeSource(source.id)}\r\n                  />\r\n                </MDBListGroupItem>\r\n              );\r\n            })}\r\n            </MDBListGroup>\r\n          </div>\r\n          {this.state.sourceList.length > 0 &&\r\n          <div className=\"pt-4\">\r\n            <p className=\"lead\">Choose your username</p>\r\n            {this.state.usernames.map((username, i) => {\r\n              return(\r\n                <MDBInput \r\n                key={i}\r\n                onClick={(e) => this.handleUserNamePick(username)}\r\n                checked={this.state.username === username ? true : false}\r\n                label={username}\r\n                type=\"radio\"\r\n                id={\"radio\"+i}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          }\r\n          <MDBInput \r\n          label=\"Password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          outline\r\n          value={this.state.password}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <MDBInput \r\n          label=\"Repeat password\"\r\n          type=\"password\"\r\n          name=\"password2\"\r\n          outline\r\n          value={this.state.password2}\r\n          onKeyDown={this.logMeIn}\r\n          onChange={this.changeHandler}\r\n          size=\"lg\"\r\n          />\r\n          <MDBBtn\r\n          color=\"info\"\r\n          className=\"w-100 py-3 font-weight-bold mx-0\"\r\n          onClick={this.handleSubmit}\r\n          >\r\n          Sign up for SNEK\r\n          </MDBBtn>\r\n        </MDBCardBody>\r\n        <MDBCardFooter>\r\n        </MDBCardFooter>\r\n      </MDBCard>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  graphql(CREATE_USER_MUTATION, {\r\n      name: \"register\"\r\n  })\r\n)(Register);\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n// Apollo\r\nimport { graphql, withApollo } from \"react-apollo\";\r\nimport * as compose from \"lodash.flowright\";\r\nimport { gql } from \"apollo-boost\";\r\n\r\n//> Additional modules\r\n// Used to hash the password with SHA256\r\nimport { sha256 } from \"js-sha256\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBCardFooter,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n  MDBCardText,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBBadge,\r\n  MDBTooltip,\r\n  MDBPopover,\r\n  MDBPopoverHeader,\r\n  MDBPopoverBody,\r\n  MDBIcon,\r\n  toast,\r\n  ToastContainer,\r\n  MDBToast,\r\n} from \"mdbreact\";\r\n\r\n//> Queries / Mutations\r\n// Get the JWT token\r\nconst LOGIN_USER = gql`\r\n  mutation tokenAuth($username: String!, $password: String!){\r\n    tokenAuth(username:$username,password:$password){\r\n      token\r\n    }\r\n  }\r\n`;\r\n\r\nclass Login extends React.Component{\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  // Handle sumbit with JWT, send to engine.snek.at/api/graphiql\r\n  handleSubmit = () => {\r\n    this.props.login({\r\n      variables: { \"username\": this.state.username, \"password\": sha256(this.state.password) }\r\n    })\r\n    .then(({data}) => {\r\n      if(data.tokenAuth){\r\n        if(data.tokenAuth.token){\r\n          this.props.loginHandler(data.tokenAuth.token);\r\n          this.notify(\"success\", \" Successfull login!\");\r\n        }\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      this.notify(\"error\", error.message.split(\":\")[1]);\r\n    });\r\n  }\r\n\r\n  notify = (type, message) => {\r\n    if (type === \"success\") {\r\n      toast.success(\r\n        <div>\r\n          <MDBIcon\r\n          icon=\"lock-open\"\r\n          className=\"text ml-2 cursor-pointer\"\r\n          />\r\n          {message}\r\n        </div>\r\n      );\r\n    }\r\n    if (type === \"error\"){\r\n      toast.error(\r\n        <div>\r\n          <MDBIcon\r\n          icon=\"lock\"\r\n          className=\"text ml-2 cursor-pointer\"\r\n          />\r\n          {message}\r\n        </div>\r\n      );\r\n    }\r\n    if (type === \"warn\"){\r\n      toast.warn(\r\n        <div>\r\n          <MDBIcon\r\n          icon=\"exclamation-triangle\"\r\n          className=\"text ml-2 cursor-pointer\"\r\n          />\r\n          {message}\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  logMeIn = (event) => {\r\n    // 'keypress' event misbehaves on mobile so we track 'Enter' key via 'keydown' event\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.handleSubmit();\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <MDBCard id=\"login\" className=\"text-dark\">\r\n        <ToastContainer\r\n        hideProgressBar={true}\r\n        newestOnTop={true}\r\n        autoClose={5000}\r\n        />\r\n        <MDBCardBody>\r\n          <h2>Sign in</h2>\r\n          <MDBInput\r\n          label=\"Username\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          outline\r\n          value={this.state.username}\r\n          onChange={this.changeHandler}\r\n          onKeyDown={this.logMeIn}\r\n          size=\"lg\"\r\n          />\r\n          <MDBInput \r\n          label=\"Password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          outline\r\n          value={this.state.password}\r\n          onChange={this.changeHandler}\r\n          onKeyDown={this.logMeIn}\r\n          size=\"lg\"\r\n          />\r\n          <MDBBtn\r\n          color=\"success\"\r\n          className=\"w-100 py-3 font-weight-bold mx-0\"\r\n          onClick={this.handleSubmit}\r\n          >\r\n          Sign in\r\n          </MDBBtn>\r\n        </MDBCardBody>\r\n      </MDBCard>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  graphql(LOGIN_USER, { name: \"login\" }),\r\n)(withApollo(Login));\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// Router\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBContainer, MDBRow, MDBCol } from \"mdbreact\";\r\n\r\n//> Components\r\nimport { \r\n  Register,\r\n  Login,\r\n} from \"../../organisms/sections\";\r\n\r\nimport {\r\n  TextTypist,\r\n} from \"../../molecules\";\r\n\r\n//> CSS\r\nimport \"./landing.scss\";\r\n\r\n//> Typist Data\r\nconst scope = [\r\n  \"engineers\",\r\n  \"programmers\",\r\n  \"developers\",\r\n  \"entrepreneurs\",\r\n  \"students\",\r\n  \"teachers\",\r\n  \"sneks\"\r\n];\r\n\r\nclass Landing extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  // Log in with JWT token, received from engine.snek.at/api/graphiql\r\n  logMeIn = (token) => {\r\n    // JWT Token\r\n    localStorage.setItem(\"jwt_snek\", token);\r\n    this.props.login(token);\r\n  }\r\n\r\n  render() {\r\n    const { globalStore } = this.props;\r\n\r\n    if(globalStore.data.logged) { return (<Redirect to=\"/me\"/>); }\r\n\r\n    if(globalStore.data.loaded){\r\n      return (\r\n        <div id=\"landing\" className=\"py-5\">\r\n          <MDBContainer>\r\n            <MDBRow className=\"\">\r\n              <MDBCol md=\"6\" className=\"pt-5\">\r\n                <h1 className=\"mt-5\">\r\n                Built for <TextTypist scope={scope} />\r\n                </h1>\r\n              </MDBCol>\r\n              <MDBCol md=\"6\">\r\n                {globalStore.data.pageLogin ? (\r\n                  <Login \r\n                  token={globalStore.data.token}\r\n                  loginHandler={this.logMeIn}\r\n                  />\r\n                ) : (\r\n                  <Register \r\n                  token={globalStore.data.token}\r\n                  />\r\n                )}\r\n              </MDBCol>\r\n            </MDBRow>\r\n          </MDBContainer>\r\n        </div>\r\n      );\r\n    } else {\r\n      return <p>Loading...</p>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Landing;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBCardFooter,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n  MDBCardText,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBBadge,\r\n  MDBTooltip,\r\n  MDBPopover,\r\n  MDBPopoverHeader,\r\n  MDBPopoverBody,\r\n  MDBIcon,\r\n  toast,\r\n  ToastContainer,\r\n} from \"mdbreact\";\r\n\r\nclass GitLabPage extends React.Component {\r\n  state = {\r\n    username: \"\",\r\n    server: \"\",\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  // Handle sumbit with JWT, send to engine.snek.at/api/graphiql\r\n  handleSubmit = () => {\r\n    if (this.state.username !== \"\")\r\n    {\r\n      if (this.state.server !== \"\")\r\n      {\r\n        this.state.username = this.state.username.replace(/\\./g,\"__\");\r\n        this.state.server = this.state.server.replace(/\\./g,\"__\");\r\n        window.open(`https://snek.at/redirect?server=${this.state.server}&username=${this.state.username}`, \"_self\");\r\n      }\r\n      else{\r\n        this.notify(\"warn\",\"Enter a server!\");\r\n      }\r\n    }\r\n    else{\r\n      this.notify(\"warn\",\"Enter a username!\");\r\n    }\r\n  }\r\n\r\n  notify = (type, message) => {\r\n    if (type === \"success\") {\r\n      toast.success(\r\n        <div>\r\n          <MDBIcon\r\n          icon=\"lock-open\"\r\n          className=\"text ml-2 cursor-pointer\"\r\n          />\r\n          {message}\r\n        </div>\r\n      );\r\n    }\r\n    if (type === \"error\"){\r\n      toast.error(\r\n        <div>\r\n          <MDBIcon\r\n          icon=\"lock\"\r\n          className=\"text ml-2 cursor-pointer\"\r\n          />\r\n          {message}\r\n        </div>\r\n      );\r\n    }\r\n    if (type === \"warn\"){\r\n      toast.warn(\r\n        <div>\r\n          <MDBIcon\r\n          icon=\"exclamation-triangle\"\r\n          className=\"text ml-2 cursor-pointer\"\r\n          />\r\n          {message}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <MDBCard id=\"gitlab\" className=\"text-dark\">\r\n      <ToastContainer\r\n        hideProgressBar={true}\r\n        newestOnTop={true}\r\n        autoClose={5000}\r\n      />\r\n      <MDBCardBody>\r\n        <h2>GitLab</h2>\r\n        <MDBInput\r\n        label=\"Username\"\r\n        type=\"text\"\r\n        name=\"username\"\r\n        outline\r\n        size=\"lg\"\r\n        value={this.state.username}\r\n        onChange={this.changeHandler}\r\n        />\r\n        <MDBInput \r\n        label=\"Server\"\r\n        type=\"text\"\r\n        name=\"server\"\r\n        outline\r\n        size=\"lg\"\r\n        value={this.state.server}\r\n        onChange={this.changeHandler}\r\n        />\r\n        <MDBBtn\r\n        color=\"success\"\r\n        className=\"w-100 py-3 font-weight-bold mx-0\"\r\n        onClick={this.handleSubmit}\r\n        >\r\n        Sign in\r\n        </MDBBtn>\r\n      </MDBCardBody>\r\n    </MDBCard>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GitLabPage;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { Route, Switch } from \"react-router-dom\";\r\n\r\n//> Components\r\nimport { \r\n  SettingsPage,\r\n  ProfilePage,\r\n  LandingPage,\r\n  RedirectPage,\r\n  GitLabPage,\r\n} from \"./components/pages\";\r\n\r\nclass Routes extends React.Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          component={(props) => (\r\n            <LandingPage \r\n            globalStore={this.props}\r\n            login={this.props.login}\r\n            {...props}\r\n            />\r\n          )}\r\n        />\r\n        <Route exact path=\"/settings\" component={SettingsPage} />\r\n        <Route\r\n          exact\r\n          path=\"/me\"\r\n          component={(props) => (\r\n            <ProfilePage \r\n            globalStore={this.props} {...props}\r\n            />\r\n          )}\r\n        />\r\n        <Route exact path=\"/redirect\" component={RedirectPage} />\r\n        <Route exact path=\"/gitlab\" component={GitLabPage} />\r\n        <Route \r\n        exact\r\n        path=\"/about\"\r\n        component={() => window.location = \"https://www.aichner-christian.com/about\"}\r\n        />\r\n        <Route\r\n          render={function() {\r\n            return <h1>Not Found</h1>;\r\n          }}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Routes;\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\n//> Components\r\n/**\r\n * Footer: Global Footer\r\n * Navbar: Global navigation bar\r\n */\r\nimport { \r\n  Navbar,\r\n  Footer,\r\n} from \"./components/molecules\";\r\n\r\n//> Routes\r\nimport Routes from \"./Routes\";\r\n\r\n//> Intel\r\nimport * as intel from \"./intel\";\r\n\r\n//> Apollo\r\nimport { graphql, withApollo } from \"react-apollo\";\r\nimport * as compose from \"lodash.flowright\";\r\nimport { gql } from \"apollo-boost\";\r\n\r\n//> Queries / Mutations\r\n// Verify the token\r\nconst VERIFY_TOKEN = gql`\r\n  mutation verify($token: String!) {\r\n      verifyToken(token: $token) {\r\n      payload\r\n      }\r\n  }\r\n`;\r\n// Login real user\r\nconst LOGIN_REAL_USER = gql`\r\n  query login($token: String!){\r\n  user: me(token: $token){\r\n      username\r\n      registrationData\r\n    }\r\n  }\r\n`;\r\n// Refresh the token\r\nconst REFRESH_TOKEN = gql`\r\n  mutation refresh($token: String!) {\r\n    refreshToken(token: $token) {\r\n      payload\r\n      token\r\n    }\r\n  }\r\n`;\r\n// Login anonymous user\r\nconst LOGIN_USER = gql`\r\n    mutation tokenAuth{\r\n        tokenAuth(username:\"cisco\",password:\"ciscocisco\"){\r\n            token\r\n        }\r\n    }\r\n`;\r\n\r\nclass App extends React.Component {\r\n  // Initialize state\r\n  state = {\r\n    contrib: null,\r\n    contribCalendar: null,\r\n    contribTypes: null,\r\n    user: null,\r\n    languages: null,\r\n    repos: null,\r\n    token: \"\",\r\n    loaded: false,\r\n    logged: false,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    // Clear state on reload\r\n    this.setState({\r\n      contrib: null,\r\n      contribCalendar: null,\r\n      contribTypes: null,\r\n      user: null,\r\n      languages: null,\r\n      repos: null,\r\n      pageLogin: false,\r\n    });\r\n\r\n    if(localStorage.getItem(\"jwt_snek\") !== null){\r\n      try {\r\n        // Verify JWT Token on first load\r\n        this._verifyToken();\r\n        // Refresh JWT token every 4 minutes\r\n        setInterval(async () => {\r\n          this._refreshToken();\r\n        }, 120000);\r\n      } catch(e) {\r\n        //console.log(2, e);\r\n      }\r\n    } else {\r\n      this._loginUser();\r\n    }\r\n  };\r\n\r\n  _verifyToken = () => {\r\n    this.props.verify({\r\n      variables: { \"token\": localStorage.getItem(\"jwt_snek\") }\r\n    })\r\n    .then(({data}) => {\r\n        if(data !== undefined){\r\n          if(data.verifyToken !== null){\r\n            this._isLogged(\r\n              data.verifyToken.payload.exp,\r\n              data.verifyToken.payload.origIat,\r\n              localStorage.getItem(\"jwt_snek\")\r\n            );\r\n          } else {\r\n            //> Troubleshooting Point 2\r\n            // Missing token payload @ Token verification with snek server (App.js)\r\n            //console.warn(TSID2, \"No token in payload.\");\r\n          }\r\n        } else {\r\n          //> Troubleshooting Point 2\r\n          // Missing token payload @ Token verification with snek server (App.js)\r\n          //console.warn(TSID2, \"No token in payload.\");\r\n        }\r\n    })\r\n    .catch((error) => {\r\n      //> Troubleshooting Point 3\r\n      // GraphQL mutation error @ Verify snek JWT (App.js)\r\n      //console.warn(TSID3, \"Mutation error:\",error);\r\n    });\r\n  }\r\n\r\n  // Reuqest JWT from engine.snek.at/api/graphiql\r\n  _loginUser = () => {\r\n    this.props.login()\r\n    .then(({data}) => {\r\n      if(data !== undefined){\r\n        // Set JWT, received from engine.snek.at/api/graphiql\r\n        this._setLogged(data.tokenAuth.token);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      //> Troubleshooting Point 4\r\n      // GraphQL mutation error @ Login snek JWT (App.js)\r\n      //console.error(TSID4, \"Mutation error:\",error);\r\n    });\r\n  }\r\n\r\n  // Set JWT, received from engine.snek.at/api/graphiql\r\n  _setLogged = (token) => {\r\n    this.setState({\r\n      token,\r\n      loaded: true,\r\n    }, () => localStorage.setItem(\"jwt_snek\", token));\r\n    this.handleLogin();\r\n  }\r\n\r\n  // Login with JWT, received from engine.snek.at/api/graphiql\r\n  _isLogged = (exp, orig, token) => {\r\n    /**\r\n     * Generate current timestamp\r\n     * Ref: https://flaviocopes.com/how-to-get-timestamp-javascript/\r\n     */\r\n    let currentTS = ~~(Date.now() / 1000);\r\n    // Check if the JWT token is still valid\r\n    if(currentTS > exp){\r\n      // JWT has expired\r\n      this._refeshToken(token);\r\n    } else {\r\n      // Only if anything has changed, update the data\r\n      this._setLogged(token);\r\n    }\r\n  }\r\n\r\n  // Refresh JWT, received from engine.snek.at/api/graphiql\r\n  _refreshToken = () => {\r\n    this.props.refresh({\r\n      variables: { \"token\": localStorage.getItem(\"jwt_token\") }\r\n    })\r\n    .then(({data}) => {\r\n      if(data !== undefined){\r\n        localStorage.setItem(\"jwt_snek\", data.refreshToken.token);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      //> Troubleshooting Point 5\r\n      // GraphQL mutation error @ Refreshing snek JWT every 2min (App.js)\r\n      //console.warn(TSID5, \"Mutation error:\",error);\r\n    });\r\n  }\r\n\r\n  handleChangeState = (key, value) => {\r\n    this.setState({\r\n      [key]: value\r\n    });\r\n  }\r\n\r\n  // Handle login with JWT token\r\n  handleLogin = async (token) => {\r\n    this.props.client.query({\r\n      query: LOGIN_REAL_USER,\r\n      variables: { \"token\": localStorage.getItem(\"jwt_snek\") }\r\n    }).then(({data}) => {\r\n      if(data){\r\n        let registrationData = JSON.parse(data.user.registrationData);\r\n        let plattformDataTemp = registrationData.platform_data.replace(/'/g,'\"');\r\n        let platformData = JSON.parse(plattformDataTemp);\r\n        let sourcesTemp = registrationData.sources.replace(/'/g,'\"');\r\n        let sources = JSON.parse(sourcesTemp);\r\n        this.setState({\r\n          logged: true,\r\n          contrib: platformData.contrib,\r\n          contribCalendar: platformData.contribCalendar,\r\n          contribTypes: platformData.contribTypes,\r\n          user: platformData.user,\r\n          orgs: platformData.orgs,\r\n          languages: platformData.languages,\r\n          repos: platformData.repos,\r\n        });\r\n        intel\r\n        .fill(sources)\r\n        .then(async () => {\r\n          intel.calendar();\r\n          intel.stats();\r\n          intel.repos();\r\n        })\r\n        .then(async () => {\r\n          this.setState({\r\n            logged: true,\r\n            contrib: intel.stats(),\r\n            contribCalendar: intel.calendar(),\r\n            contribTypes: intel.contribTypes(),\r\n            user: intel.user(),\r\n            orgs: intel.orgs(),\r\n            languages: intel.languages(),\r\n            repos: intel.repos(),\r\n          });\r\n        });\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      //> Troubleshooting Point 6\r\n      // Database error message @ Saving generated user data (App.js)\r\n      //console.warn(\"TSID6\", error.message);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div className=\"flyout\">\r\n          <Navbar \r\n          changeState={this.handleChangeState}\r\n          data={this.state}\r\n          />\r\n          <main>\r\n            <Routes \r\n            data={this.state}\r\n            changeState={this.handleChangeState}\r\n            login={this.handleLogin}\r\n            />\r\n          </main>\r\n          <Footer />\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\n// Graphql-Server is engine.snek.at/api/graphiql\r\nexport default compose(\r\n  graphql(VERIFY_TOKEN, { name: \"verify\" }),\r\n  graphql(REFRESH_TOKEN, { name: \"refresh\" }),\r\n  graphql(LOGIN_USER, { name: \"login\" }),\r\n)(withApollo(App));\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              //console.log(\"New content is available; please refresh.\");\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              //console.log(\"Content is cached for offline use.\");\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      //console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      //console.log(\"No internet connection found. App is running in offline mode.\");\r\n    });\r\n}\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n","//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// This serves as an entry point to the DOM and server renderers for React\r\nimport ReactDOM from \"react-dom\";\r\n\r\n//> Font Awesome\r\n// Font Awesome is an awesome icon library\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\n\r\n//> Bootstrap\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\n\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport \"mdbreact/dist/css/mdb.css\";\r\n\r\n//> CSS\r\n// Root SCSS file\r\nimport \"./index.scss\";\r\n\r\n//> Typist css\r\nimport \"react-typist/dist/Typist.css\";\r\n\r\n//> Apollo\r\nimport { ApolloClient } from \"apollo-client\";\r\nimport { createHttpLink } from \"apollo-link-http\";\r\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\r\nimport { ApolloProvider } from \"react-apollo\";\r\n\r\n//> Components\r\n// Root component\r\nimport App from \"./App\";\r\n\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\n\r\n// API Link\r\nconst httpLink = createHttpLink({\r\n  uri: \"https://engine.snek.at/api/graphiql\"\r\n});\r\n\r\n// Apollo Client\r\nconst client = new ApolloClient({\r\n  link: httpLink,\r\n  cache: new InMemoryCache()\r\n});\r\n\r\n// Render the root component to <div id=\"root\"></div>\r\nReactDOM.render(\r\n  <ApolloProvider client={client}>\r\n    <App />\r\n  </ApolloProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\nregisterServiceWorker();\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2019 Werbeagentur Christian Aichner\r\n */\r\n"],"sourceRoot":""}